function setup_instantclick(){InstantClick.supported&&InstantClick.instantanize(!0)}$.ajaxSetup({beforeSend:function(xhr,settings){function getCookie(name){var cookieValue=null;if(document.cookie&&""!==document.cookie)for(var cookies=document.cookie.split(";"),i=0;i<cookies.length;i++){var cookie=jQuery.trim(cookies[i]);if(cookie.substring(0,name.length+1)==name+"="){cookieValue=decodeURIComponent(cookie.substring(name.length+1));break}}return cookieValue}/^http:.*/.test(settings.url)||/^https:.*/.test(settings.url)||xhr.setRequestHeader("X-CSRFToken",getCookie("csrftoken"))}});var noop=function(){},methods=["error","info","log","warn"];"undefined"==typeof console&&(console={});for(var i in methods)"undefined"==typeof console[methods[i]]&&(console[methods[i]]=noop);if(updateDOM=function(){var createReactElement=function(definition){if("string"==typeof definition)return definition;var args=[definition.tag,definition.attributes];return definition.children.forEach(function(child){args.push(createReactElement(child))}),React.createElement.apply(React,args)},updateDOM=function(root,newDOM){if(void 0===newDOM.dom)return console.log("Falling back to jQuery HTML update"),void $(root).html(newDOM.html);var reactRoot=createReactElement(newDOM.dom);$(root).each(function(){ReactDOM.render(reactRoot,this)})};return updateDOM}(),$.extend({feature:function(body_class,callback){return $("body").hasClass("f_instantclick")?void InstantClick.on("change",function(){$.waypoints&&$.waypoints("destroy"),$("body").hasClass(body_class)&&callback()}):void($("body").hasClass(body_class)&&$(callback))}}),function($){$.fn.extend({withValue:function(value){return this.find("option").filter(function(){return $(this).val()===value.toString()})}})}(jQuery),$(function(){$("div.lazy_load").each(function(){var div=$(this);div.appear(function(){div.hide(),div.css({"background-image":div.data("background-image")}),div.fadeIn()})})}),$(function(){$("input.url[readOnly=readOnly]").on("click",function(){$(this).select()})}),$("body").hasClass("f_bootstrap3")||(!function($){"use strict";var Affix=function(element,options){this.options=$.extend({},$.fn.affix.defaults,options),this.$window=$(window).on("scroll.affix.data-api",$.proxy(this.checkPosition,this)).on("click.affix.data-api",$.proxy(function(){setTimeout($.proxy(this.checkPosition,this),1)},this)),this.$element=$(element),this.checkPosition()};Affix.prototype.checkPosition=function(){if(this.$element.is(":visible")){var affix,scrollHeight=$(document).height(),scrollTop=this.$window.scrollTop(),position=this.$element.offset(),offset=this.options.offset,offsetBottom=offset.bottom,offsetTop=offset.top,reset="affix affix-top affix-bottom";"object"!=typeof offset&&(offsetBottom=offsetTop=offset),"function"==typeof offsetTop&&(offsetTop=offset.top()),"function"==typeof offsetBottom&&(offsetBottom=offset.bottom()),affix=!(null!=this.unpin&&scrollTop+this.unpin<=position.top)&&(null!=offsetBottom&&position.top+this.$element.height()>=scrollHeight-offsetBottom?"bottom":null!=offsetTop&&scrollTop<=offsetTop&&"top"),this.affixed!==affix&&(this.affixed=affix,this.unpin="bottom"==affix?position.top-scrollTop:null,this.$element.removeClass(reset).addClass("affix"+(affix?"-"+affix:"")))}};var old=$.fn.affix;$.fn.affix=function(option){return this.each(function(){var $this=$(this),data=$this.data("affix"),options="object"==typeof option&&option;data||$this.data("affix",data=new Affix(this,options)),"string"==typeof option&&data[option]()})},$.fn.affix.Constructor=Affix,$.fn.affix.defaults={offset:0},$.fn.affix.noConflict=function(){return $.fn.affix=old,this},$(window).on("load",function(){$('[data-spy="affix"]').each(function(){var $spy=$(this),data=$spy.data();data.offset=data.offset||{},data.offsetBottom&&(data.offset.bottom=data.offsetBottom),data.offsetTop&&(data.offset.top=data.offsetTop),$spy.affix(data)})})}(window.jQuery),!function($){"use strict";var Button=function(element,options){this.$element=$(element),this.options=$.extend({},$.fn.button.defaults,options)};Button.prototype.setState=function(state){var d="disabled",$el=this.$element,data=$el.data(),val=$el.is("input")?"val":"html";state+="Text",data.resetText||$el.data("resetText",$el[val]()),$el[val](data[state]||this.options[state]),setTimeout(function(){"loadingText"==state?$el.addClass(d).attr(d,d):$el.removeClass(d).removeAttr(d)},0)},Button.prototype.toggle=function(){var $parent=this.$element.closest('[data-toggle="buttons-radio"]');$parent&&$parent.find(".active").removeClass("active"),this.$element.toggleClass("active")};var old=$.fn.button;$.fn.button=function(option){return this.each(function(){var $this=$(this),data=$this.data("button"),options="object"==typeof option&&option;data||$this.data("button",data=new Button(this,options)),"toggle"==option?data.toggle():option&&data.setState(option)})},$.fn.button.defaults={loadingText:"loading..."},$.fn.button.Constructor=Button,$.fn.button.noConflict=function(){return $.fn.button=old,this},$(document).on("click.button.data-api","[data-toggle^=button]",function(e){var $btn=$(e.target);$btn.hasClass("btn")||($btn=$btn.closest(".btn")),$btn.button("toggle")})}(window.jQuery),!function($){"use strict";var Carousel=function(element,options){this.$element=$(element),this.$indicators=this.$element.find(".carousel-indicators"),this.options=options,"hover"==this.options.pause&&this.$element.on("mouseenter",$.proxy(this.pause,this)).on("mouseleave",$.proxy(this.cycle,this))};Carousel.prototype={cycle:function(e){return e||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval($.proxy(this.next,this),this.options.interval)),this},getActiveIndex:function(){return this.$active=this.$element.find(".item.active"),this.$items=this.$active.parent().children(),this.$items.index(this.$active)},to:function(pos){var activeIndex=this.getActiveIndex(),that=this;if(!(pos>this.$items.length-1||pos<0))return this.sliding?this.$element.one("slid",function(){that.to(pos)}):activeIndex==pos?this.pause().cycle():this.slide(pos>activeIndex?"next":"prev",$(this.$items[pos]))},pause:function(e){return e||(this.paused=!0),this.$element.find(".next, .prev").length&&$.support.transition.end&&(this.$element.trigger($.support.transition.end),this.cycle()),clearInterval(this.interval),this.interval=null,this},next:function(){if(!this.sliding)return this.slide("next")},prev:function(){if(!this.sliding)return this.slide("prev")},slide:function(type,next){var e,$active=this.$element.find(".item.active"),$next=next||$active[type](),isCycling=this.interval,direction="next"==type?"left":"right",fallback="next"==type?"first":"last",that=this;if(this.sliding=!0,isCycling&&this.pause(),$next=$next.length?$next:this.$element.find(".item")[fallback](),e=$.Event("slide",{relatedTarget:$next[0],direction:direction}),!$next.hasClass("active")){if(this.$indicators.length&&(this.$indicators.find(".active").removeClass("active"),this.$element.one("slid",function(){var $nextIndicator=$(that.$indicators.children()[that.getActiveIndex()]);$nextIndicator&&$nextIndicator.addClass("active")})),$.support.transition&&this.$element.hasClass("slide")){if(this.$element.trigger(e),e.isDefaultPrevented())return;$next.addClass(type),$next[0].offsetWidth,$active.addClass(direction),$next.addClass(direction),this.$element.one($.support.transition.end,function(){$next.removeClass([type,direction].join(" ")).addClass("active"),$active.removeClass(["active",direction].join(" ")),that.sliding=!1,setTimeout(function(){that.$element.trigger("slid")},0)})}else{if(this.$element.trigger(e),e.isDefaultPrevented())return;$active.removeClass("active"),$next.addClass("active"),this.sliding=!1,this.$element.trigger("slid")}return isCycling&&this.cycle(),this}}};var old=$.fn.carousel;$.fn.carousel=function(option){return this.each(function(){var $this=$(this),data=$this.data("carousel"),options=$.extend({},$.fn.carousel.defaults,"object"==typeof option&&option),action="string"==typeof option?option:options.slide;data||$this.data("carousel",data=new Carousel(this,options)),"number"==typeof option?data.to(option):action?data[action]():options.interval&&data.pause().cycle()})},$.fn.carousel.defaults={interval:5e3,pause:"hover"},$.fn.carousel.Constructor=Carousel,$.fn.carousel.noConflict=function(){return $.fn.carousel=old,this},$(document).on("click.carousel.data-api","[data-slide], [data-slide-to]",function(e){var href,slideIndex,$this=$(this),$target=$($this.attr("data-target")||(href=$this.attr("href"))&&href.replace(/.*(?=#[^\s]+$)/,"")),options=$.extend({},$target.data(),$this.data());$target.carousel(options),(slideIndex=$this.attr("data-slide-to"))&&$target.data("carousel").pause().to(slideIndex).cycle(),e.preventDefault()})}(window.jQuery),!function($){"use strict";var Collapse=function(element,options){this.$element=$(element),this.options=$.extend({},$.fn.collapse.defaults,options),this.options.parent&&(this.$parent=$(this.options.parent)),this.options.toggle&&this.toggle()};Collapse.prototype={constructor:Collapse,dimension:function(){var hasWidth=this.$element.hasClass("width");return hasWidth?"width":"height"},show:function(){var dimension,scroll,actives,hasData;if(!this.transitioning&&!this.$element.hasClass("in")){if(dimension=this.dimension(),scroll=$.camelCase(["scroll",dimension].join("-")),actives=this.$parent&&this.$parent.find("> .accordion-group > .in"),actives&&actives.length){if(hasData=actives.data("collapse"),hasData&&hasData.transitioning)return;actives.collapse("hide"),hasData||actives.data("collapse",null)}this.$element[dimension](0),this.transition("addClass",$.Event("show"),"shown"),$.support.transition&&this.$element[dimension](this.$element[0][scroll])}},hide:function(){var dimension;!this.transitioning&&this.$element.hasClass("in")&&(dimension=this.dimension(),this.reset(this.$element[dimension]()),this.transition("removeClass",$.Event("hide"),"hidden"),this.$element[dimension](0))},reset:function(size){var dimension=this.dimension();return this.$element.removeClass("collapse")[dimension](size||"auto")[0].offsetWidth,this.$element[null!==size?"addClass":"removeClass"]("collapse"),this},transition:function(method,startEvent,completeEvent){var that=this,complete=function(){"show"==startEvent.type&&that.reset(),that.transitioning=0,that.$element.trigger(completeEvent)};this.$element.trigger(startEvent),startEvent.isDefaultPrevented()||(this.transitioning=1,this.$element[method]("in"),$.support.transition&&this.$element.hasClass("collapse")?this.$element.one($.support.transition.end,complete):complete())},toggle:function(){this[this.$element.hasClass("in")?"hide":"show"]()}};var old=$.fn.collapse;$.fn.collapse=function(option){return this.each(function(){var $this=$(this),data=$this.data("collapse"),options=$.extend({},$.fn.collapse.defaults,$this.data(),"object"==typeof option&&option);data||$this.data("collapse",data=new Collapse(this,options)),"string"==typeof option&&data[option]()})},$.fn.collapse.defaults={toggle:!0},$.fn.collapse.Constructor=Collapse,$.fn.collapse.noConflict=function(){return $.fn.collapse=old,this},$(document).on("click.collapse.data-api","[data-toggle=collapse]",function(e){var href,$this=$(this),target=$this.attr("data-target")||e.preventDefault()||(href=$this.attr("href"))&&href.replace(/.*(?=#[^\s]+$)/,""),option=$(target).data("collapse")?"toggle":$this.data();$this[$(target).hasClass("in")?"addClass":"removeClass"]("collapsed"),$(target).collapse(option)})}(window.jQuery),!function($){"use strict";function clearMenus(){$(toggle).each(function(){getParent($(this)).removeClass("open")})}function getParent($this){var $parent,selector=$this.attr("data-target");return selector||(selector=$this.attr("href"),selector=selector&&/#/.test(selector)&&selector.replace(/.*(?=#[^\s]*$)/,"")),$parent=selector&&$(selector),$parent&&$parent.length||($parent=$this.parent()),$parent}var toggle="[data-toggle=dropdown]",Dropdown=function(element){var $el=$(element).on("click.dropdown.data-api",this.toggle);$("html").on("click.dropdown.data-api",function(){$el.parent().removeClass("open")})};Dropdown.prototype={constructor:Dropdown,toggle:function(e){var $parent,isActive,$this=$(this);if(!$this.is(".disabled, :disabled"))return $parent=getParent($this),isActive=$parent.hasClass("open"),clearMenus(),isActive||$parent.toggleClass("open"),$this.focus(),!1},keydown:function(e){var $this,$items,$parent,isActive,index;if(/(38|40|27)/.test(e.keyCode)&&($this=$(this),e.preventDefault(),e.stopPropagation(),!$this.is(".disabled, :disabled"))){if($parent=getParent($this),isActive=$parent.hasClass("open"),!isActive||isActive&&27==e.keyCode)return 27==e.which&&$parent.find(toggle).focus(),$this.click();$items=$("[role=menu] li:not(.divider):visible a",$parent),$items.length&&(index=$items.index($items.filter(":focus")),38==e.keyCode&&index>0&&index--,40==e.keyCode&&index<$items.length-1&&index++,~index||(index=0),$items.eq(index).focus())}}};var old=$.fn.dropdown;$.fn.dropdown=function(option){return this.each(function(){var $this=$(this),data=$this.data("dropdown");data||$this.data("dropdown",data=new Dropdown(this)),"string"==typeof option&&data[option].call($this)})},$.fn.dropdown.Constructor=Dropdown,$.fn.dropdown.noConflict=function(){return $.fn.dropdown=old,this},$(document).on("click.dropdown.data-api",clearMenus).on("click.dropdown.data-api",".dropdown form",function(e){e.stopPropagation()}).on(".dropdown-menu",function(e){e.stopPropagation()}).on("click.dropdown.data-api",toggle,Dropdown.prototype.toggle).on("keydown.dropdown.data-api",toggle+", [role=menu]",Dropdown.prototype.keydown)}(window.jQuery),!function($){"use strict";var Modal=function(element,options){this.options=options,this.$element=$(element).delegate('[data-dismiss="modal"]',"click.dismiss.modal",$.proxy(this.hide,this)),this.options.remote&&this.$element.find(".modal-body").load(this.options.remote)};Modal.prototype={constructor:Modal,toggle:function(){return this[this.isShown?"hide":"show"]()},show:function(){var that=this,e=$.Event("show");this.$element.trigger(e),this.isShown||e.isDefaultPrevented()||(this.isShown=!0,this.escape(),this.backdrop(function(){var transition=$.support.transition&&that.$element.hasClass("fade");that.$element.parent().length||that.$element.appendTo(document.body),that.$element.show(),transition&&that.$element[0].offsetWidth,that.$element.addClass("in").attr("aria-hidden",!1),that.enforceFocus(),transition?that.$element.one($.support.transition.end,function(){that.$element.focus().trigger("shown")}):that.$element.focus().trigger("shown")}))},hide:function(e){e&&e.preventDefault();e=$.Event("hide"),this.$element.trigger(e),this.isShown&&!e.isDefaultPrevented()&&(this.isShown=!1,this.escape(),$(document).off("focusin.modal"),this.$element.removeClass("in").attr("aria-hidden",!0),$.support.transition&&this.$element.hasClass("fade")?this.hideWithTransition():this.hideModal())},enforceFocus:function(){var that=this;$(document).on("focusin.modal",function(e){that.$element[0]===e.target||that.$element.has(e.target).length||that.$element.focus()})},escape:function(){var that=this;this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.modal",function(e){27==e.which&&that.hide()}):this.isShown||this.$element.off("keyup.dismiss.modal")},hideWithTransition:function(){var that=this,timeout=setTimeout(function(){that.$element.off($.support.transition.end),that.hideModal()},500);this.$element.one($.support.transition.end,function(){clearTimeout(timeout),that.hideModal()})},hideModal:function(){var that=this;this.$element.hide(),this.backdrop(function(){that.removeBackdrop(),that.$element.trigger("hidden")})},removeBackdrop:function(){this.$backdrop.remove(),this.$backdrop=null},backdrop:function(callback){var animate=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var doAnimate=$.support.transition&&animate;if(this.$backdrop=$('<div class="modal-backdrop '+animate+'" />').appendTo(document.body),this.$backdrop.click("static"==this.options.backdrop?$.proxy(this.$element[0].focus,this.$element[0]):$.proxy(this.hide,this)),doAnimate&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!callback)return;doAnimate?this.$backdrop.one($.support.transition.end,callback):callback()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),$.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one($.support.transition.end,callback):callback()):callback&&callback()}};var old=$.fn.modal;$.fn.modal=function(option){return this.each(function(){var $this=$(this),data=$this.data("modal"),options=$.extend({},$.fn.modal.defaults,$this.data(),"object"==typeof option&&option);data||$this.data("modal",data=new Modal(this,options)),"string"==typeof option?data[option]():options.show&&data.show()})},$.fn.modal.defaults={backdrop:!0,keyboard:!0,show:!0},$.fn.modal.Constructor=Modal,$.fn.modal.noConflict=function(){return $.fn.modal=old,this},$(document).on("click.modal.data-api",'[data-toggle="modal"]',function(e){var $this=$(this),href=$this.attr("href"),$target=$($this.attr("data-target")||href&&href.replace(/.*(?=#[^\s]+$)/,"")),option=$target.data("modal")?"toggle":$.extend({remote:!/#/.test(href)&&href},$target.data(),$this.data());e.preventDefault(),$target.modal(option).one("hide",function(){$this.focus()})})}(window.jQuery),!function($){"use strict";var Tab=function(element){this.element=$(element)};Tab.prototype={constructor:Tab,show:function(){var previous,$target,e,$this=this.element,$ul=$this.closest("ul:not(.dropdown-menu)"),selector=$this.attr("data-target");selector||(selector=$this.attr("href"),selector=selector&&selector.replace(/.*(?=#[^\s]*$)/,"")),$this.parent("li").hasClass("active")||(previous=$ul.find(".active:last a")[0],e=$.Event("show",{relatedTarget:previous}),$this.trigger(e),e.isDefaultPrevented()||($target=$(selector),this.activate($this.parent("li"),$ul),this.activate($target,$target.parent(),function(){$this.trigger({type:"shown",relatedTarget:previous})})))},activate:function(element,container,callback){function next(){$active.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),element.addClass("active"),transition?(element[0].offsetWidth,element.addClass("in")):element.removeClass("fade"),element.parent(".dropdown-menu")&&element.closest("li.dropdown").addClass("active"),callback&&callback()}var $active=container.find("> .active"),transition=callback&&$.support.transition&&$active.hasClass("fade");transition?$active.one($.support.transition.end,next):next(),$active.removeClass("in")}};var old=$.fn.tab;$.fn.tab=function(option){return this.each(function(){var $this=$(this),data=$this.data("tab");data||$this.data("tab",data=new Tab(this)),"string"==typeof option&&data[option]()})},$.fn.tab.Constructor=Tab,$.fn.tab.noConflict=function(){return $.fn.tab=old,this},$(document).on("click.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(e){e.preventDefault(),$(this).tab("show")})}(window.jQuery),!function($){"use strict";var Tooltip=function(element,options){this.init("tooltip",element,options)};Tooltip.prototype={constructor:Tooltip,init:function(type,element,options){var eventIn,eventOut,triggers,trigger,i;for(this.type=type,this.$element=$(element),this.options=this.getOptions(options),this.enabled=!0,triggers=this.options.trigger.split(" "),i=triggers.length;i--;)trigger=triggers[i],"click"==trigger?this.$element.on("click."+this.type,this.options.selector,$.proxy(this.toggle,this)):"manual"!=trigger&&(eventIn="hover"==trigger?"mouseenter":"focus",eventOut="hover"==trigger?"mouseleave":"blur",this.$element.on(eventIn+"."+this.type,this.options.selector,$.proxy(this.enter,this)),this.$element.on(eventOut+"."+this.type,this.options.selector,$.proxy(this.leave,this)));this.options.selector?this._options=$.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},getOptions:function(options){return options=$.extend({},$.fn[this.type].defaults,this.$element.data(),options),options.delay&&"number"==typeof options.delay&&(options.delay={show:options.delay,hide:options.delay}),options},enter:function(e){var self=$(e.currentTarget)[this.type](this._options).data(this.type);return self.options.delay&&self.options.delay.show?(clearTimeout(this.timeout),self.hoverState="in",void(this.timeout=setTimeout(function(){"in"==self.hoverState&&self.show()},self.options.delay.show))):self.show()},leave:function(e){var self=$(e.currentTarget)[this.type](this._options).data(this.type);return this.timeout&&clearTimeout(this.timeout),self.options.delay&&self.options.delay.hide?(self.hoverState="out",void(this.timeout=setTimeout(function(){"out"==self.hoverState&&self.hide()},self.options.delay.hide))):self.hide()},show:function(){var $tip,pos,actualWidth,actualHeight,placement,tp,e=$.Event("show");if(this.hasContent()&&this.enabled){if(this.$element.trigger(e),e.isDefaultPrevented())return;switch($tip=this.tip(),this.setContent(),this.options.animation&&$tip.addClass("fade"),placement="function"==typeof this.options.placement?this.options.placement.call(this,$tip[0],this.$element[0]):this.options.placement,$tip.detach().css({top:0,left:0,display:"block"}),this.options.container?$tip.appendTo(this.options.container):$tip.insertAfter(this.$element),pos=this.getPosition(),actualWidth=$tip[0].offsetWidth,actualHeight=$tip[0].offsetHeight,placement){case"bottom":tp={top:pos.top+pos.height,left:pos.left+pos.width/2-actualWidth/2};break;case"top":tp={top:pos.top-actualHeight,left:pos.left+pos.width/2-actualWidth/2};break;case"left":tp={top:pos.top+pos.height/2-actualHeight/2,left:pos.left-actualWidth};break;case"right":tp={top:pos.top+pos.height/2-actualHeight/2,left:pos.left+pos.width}}this.applyPlacement(tp,placement),this.$element.trigger("shown")}},applyPlacement:function(offset,placement){var actualWidth,actualHeight,delta,replace,$tip=this.tip(),width=$tip[0].offsetWidth,height=$tip[0].offsetHeight;$tip.offset(offset).addClass(placement).addClass("in"),actualWidth=$tip[0].offsetWidth,actualHeight=$tip[0].offsetHeight,"top"==placement&&actualHeight!=height&&(offset.top=offset.top+height-actualHeight,replace=!0),"bottom"==placement||"top"==placement?(delta=0,offset.left<0&&(delta=offset.left*-2,offset.left=0,$tip.offset(offset),actualWidth=$tip[0].offsetWidth,actualHeight=$tip[0].offsetHeight),this.replaceArrow(delta-width+actualWidth,actualWidth,"left")):this.replaceArrow(actualHeight-height,actualHeight,"top"),replace&&$tip.offset(offset)},replaceArrow:function(delta,dimension,position){this.arrow().css(position,delta?50*(1-delta/dimension)+"%":"")},setContent:function(){var $tip=this.tip(),title=this.getTitle();$tip.find(".tooltip-inner")[this.options.html?"html":"text"](title),$tip.removeClass("fade in top bottom left right")},hide:function(){function removeWithAnimation(){var timeout=setTimeout(function(){$tip.off($.support.transition.end).detach()},500);$tip.one($.support.transition.end,function(){clearTimeout(timeout),$tip.detach()})}var $tip=this.tip(),e=$.Event("hide");if(this.$element.trigger(e),!e.isDefaultPrevented())return $tip.removeClass("in"),$.support.transition&&this.$tip.hasClass("fade")?removeWithAnimation():$tip.detach(),this.$element.trigger("hidden"),this},fixTitle:function(){var $e=this.$element;($e.attr("title")||"string"!=typeof $e.attr("data-original-title"))&&$e.attr("data-original-title",$e.attr("title")||"").attr("title","")},hasContent:function(){return this.getTitle()},getPosition:function(){var el=this.$element[0];return $.extend({},"function"==typeof el.getBoundingClientRect?el.getBoundingClientRect():{width:el.offsetWidth,height:el.offsetHeight},this.$element.offset())},getTitle:function(){var title,$e=this.$element,o=this.options;return title=$e.attr("data-original-title")||("function"==typeof o.title?o.title.call($e[0]):o.title)},tip:function(){return this.$tip=this.$tip||$(this.options.template)},arrow:function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},validate:function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled},toggle:function(e){var self=e?$(e.currentTarget)[this.type](this._options).data(this.type):this;self.tip().hasClass("in")?self.hide():self.show()},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}};var old=$.fn.tooltip;$.fn.tooltip=function(option){return this.each(function(){var $this=$(this),data=$this.data("tooltip"),options="object"==typeof option&&option;data||$this.data("tooltip",data=new Tooltip(this,options)),"string"==typeof option&&data[option]()})},$.fn.tooltip.Constructor=Tooltip,$.fn.tooltip.defaults={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1},$.fn.tooltip.noConflict=function(){return $.fn.tooltip=old,this}}(window.jQuery),!function($){"use strict";var Typeahead=function(element,options){this.$element=$(element),this.options=$.extend({},$.fn.typeahead.defaults,options),this.matcher=this.options.matcher||this.matcher,this.sorter=this.options.sorter||this.sorter,this.highlighter=this.options.highlighter||this.highlighter,this.updater=this.options.updater||this.updater,this.source=this.options.source,this.$menu=$(this.options.menu),this.shown=!1,this.listen()};Typeahead.prototype={constructor:Typeahead,select:function(){var val=this.$menu.find(".active").attr("data-value");return this.$element.val(this.updater(val)).change(),this.hide()},updater:function(item){return item},show:function(){var pos=$.extend({},this.$element.position(),{height:this.$element[0].offsetHeight});return this.$menu.insertAfter(this.$element).css({top:pos.top+pos.height,left:pos.left}).show(),this.shown=!0,this},hide:function(){return this.$menu.hide(),this.shown=!1,this},lookup:function(event){var items;return this.query=this.$element.val(),!this.query||this.query.length<this.options.minLength?this.shown?this.hide():this:(items=$.isFunction(this.source)?this.source(this.query,$.proxy(this.process,this)):this.source,items?this.process(items):this)},process:function(items){var that=this;return items=$.grep(items,function(item){return that.matcher(item)}),items=this.sorter(items),items.length?this.render(items.slice(0,this.options.items)).show():this.shown?this.hide():this},matcher:function(item){return~item.toLowerCase().indexOf(this.query.toLowerCase())},sorter:function(items){for(var item,beginswith=[],caseSensitive=[],caseInsensitive=[];item=items.shift();)item.toLowerCase().indexOf(this.query.toLowerCase())?~item.indexOf(this.query)?caseSensitive.push(item):caseInsensitive.push(item):beginswith.push(item);return beginswith.concat(caseSensitive,caseInsensitive)},highlighter:function(item){var query=this.query.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");return item.replace(new RegExp("("+query+")","ig"),function($1,match){return"<strong>"+match+"</strong>"})},render:function(items){var that=this;return items=$(items).map(function(i,item){return i=$(that.options.item).attr("data-value",item),i.find("a").html(that.highlighter(item)),i[0]}),items.first().addClass("active"),this.$menu.html(items),this},next:function(event){var active=this.$menu.find(".active").removeClass("active"),next=active.next();next.length||(next=$(this.$menu.find("li")[0])),next.addClass("active")},prev:function(event){var active=this.$menu.find(".active").removeClass("active"),prev=active.prev();prev.length||(prev=this.$menu.find("li").last()),prev.addClass("active")},listen:function(){this.$element.on("focus",$.proxy(this.focus,this)).on("blur",$.proxy(this.blur,this)).on("keypress",$.proxy(this.keypress,this)).on("keyup",$.proxy(this.keyup,this)),this.eventSupported("keydown")&&this.$element.on("keydown",$.proxy(this.keydown,this)),this.$menu.on("click",$.proxy(this.click,this)).on("mouseenter","li",$.proxy(this.mouseenter,this)).on("mouseleave","li",$.proxy(this.mouseleave,this))},eventSupported:function(eventName){var isSupported=eventName in this.$element;return isSupported||(this.$element.setAttribute(eventName,"return;"),isSupported="function"==typeof this.$element[eventName]),isSupported},move:function(e){if(this.shown){switch(e.keyCode){case 9:case 13:case 27:e.preventDefault();break;case 38:e.preventDefault(),this.prev();break;case 40:e.preventDefault(),this.next()}e.stopPropagation()}},keydown:function(e){this.suppressKeyPressRepeat=~$.inArray(e.keyCode,[40,38,9,13,27]),this.move(e)},keypress:function(e){this.suppressKeyPressRepeat||this.move(e)},keyup:function(e){switch(e.keyCode){case 40:case 38:case 16:case 17:case 18:break;case 9:case 13:if(!this.shown)return;this.select();break;case 27:if(!this.shown)return;this.hide();break;default:this.lookup()}e.stopPropagation(),e.preventDefault()},focus:function(e){this.focused=!0},blur:function(e){this.focused=!1,!this.mousedover&&this.shown&&this.hide()},click:function(e){e.stopPropagation(),e.preventDefault(),this.select(),this.$element.focus()},mouseenter:function(e){this.mousedover=!0,this.$menu.find(".active").removeClass("active"),$(e.currentTarget).addClass("active")},mouseleave:function(e){this.mousedover=!1,!this.focused&&this.shown&&this.hide()}};var old=$.fn.typeahead;$.fn.typeahead=function(option){return this.each(function(){var $this=$(this),data=$this.data("typeahead"),options="object"==typeof option&&option;data||$this.data("typeahead",data=new Typeahead(this,options)),"string"==typeof option&&data[option]()})},$.fn.typeahead.defaults={source:[],items:8,menu:'<ul class="typeahead dropdown-menu"></ul>',item:'<li><a href="#"></a></li>',minLength:1},$.fn.typeahead.Constructor=Typeahead,$.fn.typeahead.noConflict=function(){return $.fn.typeahead=old,this},$(document).on("focus.typeahead.data-api",'[data-provide="typeahead"]',function(e){var $this=$(this);$this.data("typeahead")||$this.typeahead($this.data())})}(window.jQuery),!function($){"use strict";var Popover=function(element,options){this.init("popover",element,options)};Popover.prototype=$.extend({},$.fn.tooltip.Constructor.prototype,{constructor:Popover,setContent:function(){var $tip=this.tip(),title=this.getTitle(),content=this.getContent();$tip.find(".popover-title")[this.options.html?"html":"text"](title),$tip.find(".popover-content")[this.options.html?"html":"text"](content),$tip.removeClass("fade top bottom left right in")},hasContent:function(){return this.getTitle()||this.getContent()},getContent:function(){var content,$e=this.$element,o=this.options;return content=("function"==typeof o.content?o.content.call($e[0]):o.content)||$e.attr("data-content")},tip:function(){return this.$tip||(this.$tip=$(this.options.template)),this.$tip},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}});var old=$.fn.popover;$.fn.popover=function(option){return this.each(function(){var $this=$(this),data=$this.data("popover"),options="object"==typeof option&&option;data||$this.data("popover",data=new Popover(this,options)),"string"==typeof option&&data[option]()})},$.fn.popover.Constructor=Popover,$.fn.popover.defaults=$.extend({},$.fn.tooltip.defaults,{placement:"right",trigger:"click",content:"",template:'<div class="popover"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),$.fn.popover.noConflict=function(){return $.fn.popover=old,this}}(window.jQuery)),$("body").hasClass("f_bootstrap3")){if("undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");+function($){var version=$.fn.jquery.split(" ")[0].split(".");if(version[0]<2&&version[1]<9||1==version[0]&&9==version[1]&&version[2]<1)throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher");
}(jQuery),+function($){"use strict";function transitionEnd(){var el=document.createElement("bootstrap"),transEndEventNames={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var name in transEndEventNames)if(void 0!==el.style[name])return{end:transEndEventNames[name]};return!1}$.fn.emulateTransitionEnd=function(duration){var called=!1,$el=this;$(this).one("bsTransitionEnd",function(){called=!0});var callback=function(){called||$($el).trigger($.support.transition.end)};return setTimeout(callback,duration),this},$(function(){$.support.transition=transitionEnd(),$.support.transition&&($.event.special.bsTransitionEnd={bindType:$.support.transition.end,delegateType:$.support.transition.end,handle:function(e){if($(e.target).is(this))return e.handleObj.handler.apply(this,arguments)}})})}(jQuery),+function($){"use strict";function Plugin(option){return this.each(function(){var $this=$(this),data=$this.data("bs.alert");data||$this.data("bs.alert",data=new Alert(this)),"string"==typeof option&&data[option].call($this)})}var dismiss='[data-dismiss="alert"]',Alert=function(el){$(el).on("click",dismiss,this.close)};Alert.VERSION="3.3.0",Alert.TRANSITION_DURATION=150,Alert.prototype.close=function(e){function removeElement(){$parent.detach().trigger("closed.bs.alert").remove()}var $this=$(this),selector=$this.attr("data-target");selector||(selector=$this.attr("href"),selector=selector&&selector.replace(/.*(?=#[^\s]*$)/,""));var $parent=$(selector);e&&e.preventDefault(),$parent.length||($parent=$this.closest(".alert")),$parent.trigger(e=$.Event("close.bs.alert")),e.isDefaultPrevented()||($parent.removeClass("in"),$.support.transition&&$parent.hasClass("fade")?$parent.one("bsTransitionEnd",removeElement).emulateTransitionEnd(Alert.TRANSITION_DURATION):removeElement())};var old=$.fn.alert;$.fn.alert=Plugin,$.fn.alert.Constructor=Alert,$.fn.alert.noConflict=function(){return $.fn.alert=old,this},$(document).on("click.bs.alert.data-api",dismiss,Alert.prototype.close)}(jQuery),+function($){"use strict";function Plugin(option){return this.each(function(){var $this=$(this),data=$this.data("bs.button"),options="object"==typeof option&&option;data||$this.data("bs.button",data=new Button(this,options)),"toggle"==option?data.toggle():option&&data.setState(option)})}var Button=function(element,options){this.$element=$(element),this.options=$.extend({},Button.DEFAULTS,options),this.isLoading=!1};Button.VERSION="3.3.0",Button.DEFAULTS={loadingText:"loading..."},Button.prototype.setState=function(state){var d="disabled",$el=this.$element,val=$el.is("input")?"val":"html",data=$el.data();state+="Text",null==data.resetText&&$el.data("resetText",$el[val]()),setTimeout($.proxy(function(){$el[val](null==data[state]?this.options[state]:data[state]),"loadingText"==state?(this.isLoading=!0,$el.addClass(d).attr(d,d)):this.isLoading&&(this.isLoading=!1,$el.removeClass(d).removeAttr(d))},this),0)},Button.prototype.toggle=function(){var changed=!0,$parent=this.$element.closest('[data-toggle="buttons"]');if($parent.length){var $input=this.$element.find("input");"radio"==$input.prop("type")&&($input.prop("checked")&&this.$element.hasClass("active")?changed=!1:$parent.find(".active").removeClass("active")),changed&&$input.prop("checked",!this.$element.hasClass("active")).trigger("change")}else this.$element.attr("aria-pressed",!this.$element.hasClass("active"));changed&&this.$element.toggleClass("active")};var old=$.fn.button;$.fn.button=Plugin,$.fn.button.Constructor=Button,$.fn.button.noConflict=function(){return $.fn.button=old,this},$(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(e){var $btn=$(e.target);$btn.hasClass("btn")||($btn=$btn.closest(".btn")),Plugin.call($btn,"toggle"),e.preventDefault()}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(e){$(e.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(e.type))})}(jQuery),+function($){"use strict";function Plugin(option){return this.each(function(){var $this=$(this),data=$this.data("bs.carousel"),options=$.extend({},Carousel.DEFAULTS,$this.data(),"object"==typeof option&&option),action="string"==typeof option?option:options.slide;data||$this.data("bs.carousel",data=new Carousel(this,options)),"number"==typeof option?data.to(option):action?data[action]():options.interval&&data.pause().cycle()})}var Carousel=function(element,options){this.$element=$(element),this.$indicators=this.$element.find(".carousel-indicators"),this.options=options,this.paused=this.sliding=this.interval=this.$active=this.$items=null,this.options.keyboard&&this.$element.on("keydown.bs.carousel",$.proxy(this.keydown,this)),"hover"==this.options.pause&&!("ontouchstart"in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",$.proxy(this.pause,this)).on("mouseleave.bs.carousel",$.proxy(this.cycle,this))};Carousel.VERSION="3.3.0",Carousel.TRANSITION_DURATION=600,Carousel.DEFAULTS={interval:5e3,pause:"hover",wrap:!0,keyboard:!0},Carousel.prototype.keydown=function(e){switch(e.which){case 37:this.prev();break;case 39:this.next();break;default:return}e.preventDefault()},Carousel.prototype.cycle=function(e){return e||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval($.proxy(this.next,this),this.options.interval)),this},Carousel.prototype.getItemIndex=function(item){return this.$items=item.parent().children(".item"),this.$items.index(item||this.$active)},Carousel.prototype.getItemForDirection=function(direction,active){var delta="prev"==direction?-1:1,activeIndex=this.getItemIndex(active),itemIndex=(activeIndex+delta)%this.$items.length;return this.$items.eq(itemIndex)},Carousel.prototype.to=function(pos){var that=this,activeIndex=this.getItemIndex(this.$active=this.$element.find(".item.active"));if(!(pos>this.$items.length-1||pos<0))return this.sliding?this.$element.one("slid.bs.carousel",function(){that.to(pos)}):activeIndex==pos?this.pause().cycle():this.slide(pos>activeIndex?"next":"prev",this.$items.eq(pos))},Carousel.prototype.pause=function(e){return e||(this.paused=!0),this.$element.find(".next, .prev").length&&$.support.transition&&(this.$element.trigger($.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},Carousel.prototype.next=function(){if(!this.sliding)return this.slide("next")},Carousel.prototype.prev=function(){if(!this.sliding)return this.slide("prev")},Carousel.prototype.slide=function(type,next){var $active=this.$element.find(".item.active"),$next=next||this.getItemForDirection(type,$active),isCycling=this.interval,direction="next"==type?"left":"right",fallback="next"==type?"first":"last",that=this;if(!$next.length){if(!this.options.wrap)return;$next=this.$element.find(".item")[fallback]()}if($next.hasClass("active"))return this.sliding=!1;var relatedTarget=$next[0],slideEvent=$.Event("slide.bs.carousel",{relatedTarget:relatedTarget,direction:direction});if(this.$element.trigger(slideEvent),!slideEvent.isDefaultPrevented()){if(this.sliding=!0,isCycling&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var $nextIndicator=$(this.$indicators.children()[this.getItemIndex($next)]);$nextIndicator&&$nextIndicator.addClass("active")}var slidEvent=$.Event("slid.bs.carousel",{relatedTarget:relatedTarget,direction:direction});return $.support.transition&&this.$element.hasClass("slide")?($next.addClass(type),$next[0].offsetWidth,$active.addClass(direction),$next.addClass(direction),$active.one("bsTransitionEnd",function(){$next.removeClass([type,direction].join(" ")).addClass("active"),$active.removeClass(["active",direction].join(" ")),that.sliding=!1,setTimeout(function(){that.$element.trigger(slidEvent)},0)}).emulateTransitionEnd(Carousel.TRANSITION_DURATION)):($active.removeClass("active"),$next.addClass("active"),this.sliding=!1,this.$element.trigger(slidEvent)),isCycling&&this.cycle(),this}};var old=$.fn.carousel;$.fn.carousel=Plugin,$.fn.carousel.Constructor=Carousel,$.fn.carousel.noConflict=function(){return $.fn.carousel=old,this};var clickHandler=function(e){var href,$this=$(this),$target=$($this.attr("data-target")||(href=$this.attr("href"))&&href.replace(/.*(?=#[^\s]+$)/,""));if($target.hasClass("carousel")){var options=$.extend({},$target.data(),$this.data()),slideIndex=$this.attr("data-slide-to");slideIndex&&(options.interval=!1),Plugin.call($target,options),slideIndex&&$target.data("bs.carousel").to(slideIndex),e.preventDefault()}};$(document).on("click.bs.carousel.data-api","[data-slide]",clickHandler).on("click.bs.carousel.data-api","[data-slide-to]",clickHandler),$(window).on("load",function(){$('[data-ride="carousel"]').each(function(){var $carousel=$(this);Plugin.call($carousel,$carousel.data())})})}(jQuery),+function($){"use strict";function getTargetFromTrigger($trigger){var href,target=$trigger.attr("data-target")||(href=$trigger.attr("href"))&&href.replace(/.*(?=#[^\s]+$)/,"");return $(target)}function Plugin(option){return this.each(function(){var $this=$(this),data=$this.data("bs.collapse"),options=$.extend({},Collapse.DEFAULTS,$this.data(),"object"==typeof option&&option);!data&&options.toggle&&"show"==option&&(options.toggle=!1),data||$this.data("bs.collapse",data=new Collapse(this,options)),"string"==typeof option&&data[option]()})}var Collapse=function(element,options){this.$element=$(element),this.options=$.extend({},Collapse.DEFAULTS,options),this.$trigger=$(this.options.trigger).filter('[href="#'+element.id+'"], [data-target="#'+element.id+'"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()};Collapse.VERSION="3.3.0",Collapse.TRANSITION_DURATION=350,Collapse.DEFAULTS={toggle:!0,trigger:'[data-toggle="collapse"]'},Collapse.prototype.dimension=function(){var hasWidth=this.$element.hasClass("width");return hasWidth?"width":"height"},Collapse.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var activesData,actives=this.$parent&&this.$parent.find("> .panel").children(".in, .collapsing");if(!(actives&&actives.length&&(activesData=actives.data("bs.collapse"),activesData&&activesData.transitioning))){var startEvent=$.Event("show.bs.collapse");if(this.$element.trigger(startEvent),!startEvent.isDefaultPrevented()){actives&&actives.length&&(Plugin.call(actives,"hide"),activesData||actives.data("bs.collapse",null));var dimension=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[dimension](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1;var complete=function(){this.$element.removeClass("collapsing").addClass("collapse in")[dimension](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!$.support.transition)return complete.call(this);var scrollSize=$.camelCase(["scroll",dimension].join("-"));this.$element.one("bsTransitionEnd",$.proxy(complete,this)).emulateTransitionEnd(Collapse.TRANSITION_DURATION)[dimension](this.$element[0][scrollSize])}}}},Collapse.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var startEvent=$.Event("hide.bs.collapse");if(this.$element.trigger(startEvent),!startEvent.isDefaultPrevented()){var dimension=this.dimension();this.$element[dimension](this.$element[dimension]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1;var complete=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};return $.support.transition?void this.$element[dimension](0).one("bsTransitionEnd",$.proxy(complete,this)).emulateTransitionEnd(Collapse.TRANSITION_DURATION):complete.call(this)}}},Collapse.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},Collapse.prototype.getParent=function(){return $(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each($.proxy(function(i,element){var $element=$(element);this.addAriaAndCollapsedClass(getTargetFromTrigger($element),$element)},this)).end()},Collapse.prototype.addAriaAndCollapsedClass=function($element,$trigger){var isOpen=$element.hasClass("in");$element.attr("aria-expanded",isOpen),$trigger.toggleClass("collapsed",!isOpen).attr("aria-expanded",isOpen)};var old=$.fn.collapse;$.fn.collapse=Plugin,$.fn.collapse.Constructor=Collapse,$.fn.collapse.noConflict=function(){return $.fn.collapse=old,this},$(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(e){var $this=$(this);$this.attr("data-target")||e.preventDefault();var $target=getTargetFromTrigger($this),data=$target.data("bs.collapse"),option=data?"toggle":$.extend({},$this.data(),{trigger:this});Plugin.call($target,option)})}(jQuery),+function($){"use strict";function clearMenus(e){e&&3===e.which||($(backdrop).remove(),$(toggle).each(function(){var $this=$(this),$parent=getParent($this),relatedTarget={relatedTarget:this};$parent.hasClass("open")&&($parent.trigger(e=$.Event("hide.bs.dropdown",relatedTarget)),e.isDefaultPrevented()||($this.attr("aria-expanded","false"),$parent.removeClass("open").trigger("hidden.bs.dropdown",relatedTarget)))}))}function getParent($this){var selector=$this.attr("data-target");selector||(selector=$this.attr("href"),selector=selector&&/#[A-Za-z]/.test(selector)&&selector.replace(/.*(?=#[^\s]*$)/,""));var $parent=selector&&$(selector);return $parent&&$parent.length?$parent:$this.parent()}function Plugin(option){return this.each(function(){var $this=$(this),data=$this.data("bs.dropdown");data||$this.data("bs.dropdown",data=new Dropdown(this)),"string"==typeof option&&data[option].call($this)})}var backdrop=".dropdown-backdrop",toggle='[data-toggle="dropdown"]',Dropdown=function(element){$(element).on("click.bs.dropdown",this.toggle)};Dropdown.VERSION="3.3.0",Dropdown.prototype.toggle=function(e){var $this=$(this);if(!$this.is(".disabled, :disabled")){var $parent=getParent($this),isActive=$parent.hasClass("open");if(clearMenus(),!isActive){"ontouchstart"in document.documentElement&&!$parent.closest(".navbar-nav").length&&$('<div class="dropdown-backdrop"/>').insertAfter($(this)).on("click",clearMenus);var relatedTarget={relatedTarget:this};if($parent.trigger(e=$.Event("show.bs.dropdown",relatedTarget)),e.isDefaultPrevented())return;$this.trigger("focus").attr("aria-expanded","true"),$parent.toggleClass("open").trigger("shown.bs.dropdown",relatedTarget)}return!1}},Dropdown.prototype.keydown=function(e){if(/(38|40|27|32)/.test(e.which)){var $this=$(this);if(e.preventDefault(),e.stopPropagation(),!$this.is(".disabled, :disabled")){var $parent=getParent($this),isActive=$parent.hasClass("open");if(!isActive&&27!=e.which||isActive&&27==e.which)return 27==e.which&&$parent.find(toggle).trigger("focus"),$this.trigger("click");var desc=" li:not(.divider):visible a",$items=$parent.find('[role="menu"]'+desc+', [role="listbox"]'+desc);if($items.length){var index=$items.index(e.target);38==e.which&&index>0&&index--,40==e.which&&index<$items.length-1&&index++,~index||(index=0),$items.eq(index).trigger("focus")}}}};var old=$.fn.dropdown;$.fn.dropdown=Plugin,$.fn.dropdown.Constructor=Dropdown,$.fn.dropdown.noConflict=function(){return $.fn.dropdown=old,this},$(document).on("click.bs.dropdown.data-api",clearMenus).on("click.bs.dropdown.data-api",".dropdown form",function(e){e.stopPropagation()}).on("click.bs.dropdown.data-api",toggle,Dropdown.prototype.toggle).on("keydown.bs.dropdown.data-api",toggle,Dropdown.prototype.keydown).on("keydown.bs.dropdown.data-api",'[role="menu"]',Dropdown.prototype.keydown).on("keydown.bs.dropdown.data-api",'[role="listbox"]',Dropdown.prototype.keydown)}(jQuery),+function($){"use strict";function Plugin(option,_relatedTarget){return this.each(function(){var $this=$(this),data=$this.data("bs.modal"),options=$.extend({},Modal.DEFAULTS,$this.data(),"object"==typeof option&&option);data||$this.data("bs.modal",data=new Modal(this,options)),"string"==typeof option?data[option](_relatedTarget):options.show&&data.show(_relatedTarget)})}var Modal=function(element,options){this.options=options,this.$body=$(document.body),this.$element=$(element),this.$backdrop=this.isShown=null,this.scrollbarWidth=0,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,$.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};Modal.VERSION="3.3.0",Modal.TRANSITION_DURATION=300,Modal.BACKDROP_TRANSITION_DURATION=150,Modal.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},Modal.prototype.toggle=function(_relatedTarget){return this.isShown?this.hide():this.show(_relatedTarget)},Modal.prototype.show=function(_relatedTarget){var that=this,e=$.Event("show.bs.modal",{relatedTarget:_relatedTarget});this.$element.trigger(e),this.isShown||e.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.$body.addClass("modal-open"),this.setScrollbar(),this.escape(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',$.proxy(this.hide,this)),this.backdrop(function(){var transition=$.support.transition&&that.$element.hasClass("fade");that.$element.parent().length||that.$element.appendTo(that.$body),that.$element.show().scrollTop(0),transition&&that.$element[0].offsetWidth,that.$element.addClass("in").attr("aria-hidden",!1),that.enforceFocus();var e=$.Event("shown.bs.modal",{relatedTarget:_relatedTarget});transition?that.$element.find(".modal-dialog").one("bsTransitionEnd",function(){that.$element.trigger("focus").trigger(e)}).emulateTransitionEnd(Modal.TRANSITION_DURATION):that.$element.trigger("focus").trigger(e)}))},Modal.prototype.hide=function(e){e&&e.preventDefault(),e=$.Event("hide.bs.modal"),this.$element.trigger(e),this.isShown&&!e.isDefaultPrevented()&&(this.isShown=!1,this.escape(),$(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.bs.modal"),$.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",$.proxy(this.hideModal,this)).emulateTransitionEnd(Modal.TRANSITION_DURATION):this.hideModal())},Modal.prototype.enforceFocus=function(){$(document).off("focusin.bs.modal").on("focusin.bs.modal",$.proxy(function(e){this.$element[0]===e.target||this.$element.has(e.target).length||this.$element.trigger("focus")},this))},Modal.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",$.proxy(function(e){27==e.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},Modal.prototype.hideModal=function(){var that=this;this.$element.hide(),this.backdrop(function(){that.$body.removeClass("modal-open"),that.resetScrollbar(),that.$element.trigger("hidden.bs.modal")})},Modal.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},Modal.prototype.backdrop=function(callback){var that=this,animate=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var doAnimate=$.support.transition&&animate;if(this.$backdrop=$('<div class="modal-backdrop '+animate+'" />').prependTo(this.$element).on("click.dismiss.bs.modal",$.proxy(function(e){e.target===e.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus.call(this.$element[0]):this.hide.call(this))},this)),doAnimate&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!callback)return;doAnimate?this.$backdrop.one("bsTransitionEnd",callback).emulateTransitionEnd(Modal.BACKDROP_TRANSITION_DURATION):callback()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var callbackRemove=function(){that.removeBackdrop(),callback&&callback()};$.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",callbackRemove).emulateTransitionEnd(Modal.BACKDROP_TRANSITION_DURATION):callbackRemove()}else callback&&callback()},Modal.prototype.checkScrollbar=function(){this.scrollbarWidth=this.measureScrollbar()},Modal.prototype.setScrollbar=function(){var bodyPad=parseInt(this.$body.css("padding-right")||0,10);this.scrollbarWidth&&this.$body.css("padding-right",bodyPad+this.scrollbarWidth)},Modal.prototype.resetScrollbar=function(){this.$body.css("padding-right","")},Modal.prototype.measureScrollbar=function(){if(document.body.clientWidth>=window.innerWidth)return 0;var scrollDiv=document.createElement("div");scrollDiv.className="modal-scrollbar-measure",this.$body.append(scrollDiv);var scrollbarWidth=scrollDiv.offsetWidth-scrollDiv.clientWidth;return this.$body[0].removeChild(scrollDiv),scrollbarWidth};var old=$.fn.modal;$.fn.modal=Plugin,$.fn.modal.Constructor=Modal,$.fn.modal.noConflict=function(){return $.fn.modal=old,this},$(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(e){var $this=$(this),href=$this.attr("href"),$target=$($this.attr("data-target")||href&&href.replace(/.*(?=#[^\s]+$)/,"")),option=$target.data("bs.modal")?"toggle":$.extend({remote:!/#/.test(href)&&href},$target.data(),$this.data());$this.is("a")&&e.preventDefault(),$target.one("show.bs.modal",function(showEvent){showEvent.isDefaultPrevented()||$target.one("hidden.bs.modal",function(){$this.is(":visible")&&$this.trigger("focus")})}),Plugin.call($target,option,this)})}(jQuery),+function($){"use strict";function Plugin(option){return this.each(function(){var $this=$(this),data=$this.data("bs.tooltip"),options="object"==typeof option&&option,selector=options&&options.selector;(data||"destroy"!=option)&&(selector?(data||$this.data("bs.tooltip",data={}),data[selector]||(data[selector]=new Tooltip(this,options))):data||$this.data("bs.tooltip",data=new Tooltip(this,options)),"string"==typeof option&&data[option]())})}var Tooltip=function(element,options){this.type=this.options=this.enabled=this.timeout=this.hoverState=this.$element=null,this.init("tooltip",element,options)};Tooltip.VERSION="3.3.0",Tooltip.TRANSITION_DURATION=150,Tooltip.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},Tooltip.prototype.init=function(type,element,options){this.enabled=!0,this.type=type,this.$element=$(element),this.options=this.getOptions(options),this.$viewport=this.options.viewport&&$(this.options.viewport.selector||this.options.viewport);for(var triggers=this.options.trigger.split(" "),i=triggers.length;i--;){var trigger=triggers[i];if("click"==trigger)this.$element.on("click."+this.type,this.options.selector,$.proxy(this.toggle,this));else if("manual"!=trigger){var eventIn="hover"==trigger?"mouseenter":"focusin",eventOut="hover"==trigger?"mouseleave":"focusout";this.$element.on(eventIn+"."+this.type,this.options.selector,$.proxy(this.enter,this)),this.$element.on(eventOut+"."+this.type,this.options.selector,$.proxy(this.leave,this))}}this.options.selector?this._options=$.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},Tooltip.prototype.getDefaults=function(){return Tooltip.DEFAULTS},Tooltip.prototype.getOptions=function(options){return options=$.extend({},this.getDefaults(),this.$element.data(),options),options.delay&&"number"==typeof options.delay&&(options.delay={show:options.delay,hide:options.delay}),options},Tooltip.prototype.getDelegateOptions=function(){var options={},defaults=this.getDefaults();return this._options&&$.each(this._options,function(key,value){defaults[key]!=value&&(options[key]=value)}),options},Tooltip.prototype.enter=function(obj){var self=obj instanceof this.constructor?obj:$(obj.currentTarget).data("bs."+this.type);return self&&self.$tip&&self.$tip.is(":visible")?void(self.hoverState="in"):(self||(self=new this.constructor(obj.currentTarget,this.getDelegateOptions()),$(obj.currentTarget).data("bs."+this.type,self)),clearTimeout(self.timeout),self.hoverState="in",self.options.delay&&self.options.delay.show?void(self.timeout=setTimeout(function(){"in"==self.hoverState&&self.show()},self.options.delay.show)):self.show())},Tooltip.prototype.leave=function(obj){var self=obj instanceof this.constructor?obj:$(obj.currentTarget).data("bs."+this.type);return self||(self=new this.constructor(obj.currentTarget,this.getDelegateOptions()),$(obj.currentTarget).data("bs."+this.type,self)),clearTimeout(self.timeout),self.hoverState="out",self.options.delay&&self.options.delay.hide?void(self.timeout=setTimeout(function(){"out"==self.hoverState&&self.hide()},self.options.delay.hide)):self.hide()},Tooltip.prototype.show=function(){var e=$.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(e);var inDom=$.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(e.isDefaultPrevented()||!inDom)return;var that=this,$tip=this.tip(),tipId=this.getUID(this.type);this.setContent(),$tip.attr("id",tipId),this.$element.attr("aria-describedby",tipId),this.options.animation&&$tip.addClass("fade");var placement="function"==typeof this.options.placement?this.options.placement.call(this,$tip[0],this.$element[0]):this.options.placement,autoToken=/\s?auto?\s?/i,autoPlace=autoToken.test(placement);autoPlace&&(placement=placement.replace(autoToken,"")||"top"),$tip.detach().css({top:0,left:0,display:"block"}).addClass(placement).data("bs."+this.type,this),this.options.container?$tip.appendTo(this.options.container):$tip.insertAfter(this.$element);var pos=this.getPosition(),actualWidth=$tip[0].offsetWidth,actualHeight=$tip[0].offsetHeight;if(autoPlace){var orgPlacement=placement,$container=this.options.container?$(this.options.container):this.$element.parent(),containerDim=this.getPosition($container);placement="bottom"==placement&&pos.bottom+actualHeight>containerDim.bottom?"top":"top"==placement&&pos.top-actualHeight<containerDim.top?"bottom":"right"==placement&&pos.right+actualWidth>containerDim.width?"left":"left"==placement&&pos.left-actualWidth<containerDim.left?"right":placement,$tip.removeClass(orgPlacement).addClass(placement)}var calculatedOffset=this.getCalculatedOffset(placement,pos,actualWidth,actualHeight);this.applyPlacement(calculatedOffset,placement);var complete=function(){var prevHoverState=that.hoverState;that.$element.trigger("shown.bs."+that.type),that.hoverState=null,"out"==prevHoverState&&that.leave(that)};$.support.transition&&this.$tip.hasClass("fade")?$tip.one("bsTransitionEnd",complete).emulateTransitionEnd(Tooltip.TRANSITION_DURATION):complete()}},Tooltip.prototype.applyPlacement=function(offset,placement){var $tip=this.tip(),width=$tip[0].offsetWidth,height=$tip[0].offsetHeight,marginTop=parseInt($tip.css("margin-top"),10),marginLeft=parseInt($tip.css("margin-left"),10);isNaN(marginTop)&&(marginTop=0),isNaN(marginLeft)&&(marginLeft=0),offset.top=offset.top+marginTop,offset.left=offset.left+marginLeft,$.offset.setOffset($tip[0],$.extend({using:function(props){$tip.css({top:Math.round(props.top),left:Math.round(props.left)})}},offset),0),$tip.addClass("in");var actualWidth=$tip[0].offsetWidth,actualHeight=$tip[0].offsetHeight;"top"==placement&&actualHeight!=height&&(offset.top=offset.top+height-actualHeight);var delta=this.getViewportAdjustedDelta(placement,offset,actualWidth,actualHeight);delta.left?offset.left+=delta.left:offset.top+=delta.top;var isVertical=/top|bottom/.test(placement),arrowDelta=isVertical?2*delta.left-width+actualWidth:2*delta.top-height+actualHeight,arrowOffsetPosition=isVertical?"offsetWidth":"offsetHeight";$tip.offset(offset),this.replaceArrow(arrowDelta,$tip[0][arrowOffsetPosition],isVertical)},Tooltip.prototype.replaceArrow=function(delta,dimension,isHorizontal){this.arrow().css(isHorizontal?"left":"top",50*(1-delta/dimension)+"%").css(isHorizontal?"top":"left","")},Tooltip.prototype.setContent=function(){var $tip=this.tip(),title=this.getTitle();$tip.find(".tooltip-inner")[this.options.html?"html":"text"](title),$tip.removeClass("fade in top bottom left right")},Tooltip.prototype.hide=function(callback){function complete(){"in"!=that.hoverState&&$tip.detach(),that.$element.removeAttr("aria-describedby").trigger("hidden.bs."+that.type),callback&&callback()}var that=this,$tip=this.tip(),e=$.Event("hide.bs."+this.type);if(this.$element.trigger(e),!e.isDefaultPrevented())return $tip.removeClass("in"),$.support.transition&&this.$tip.hasClass("fade")?$tip.one("bsTransitionEnd",complete).emulateTransitionEnd(Tooltip.TRANSITION_DURATION):complete(),this.hoverState=null,this},Tooltip.prototype.fixTitle=function(){var $e=this.$element;($e.attr("title")||"string"!=typeof $e.attr("data-original-title"))&&$e.attr("data-original-title",$e.attr("title")||"").attr("title","")},Tooltip.prototype.hasContent=function(){return this.getTitle()},Tooltip.prototype.getPosition=function($element){$element=$element||this.$element;var el=$element[0],isBody="BODY"==el.tagName,elRect=el.getBoundingClientRect();null==elRect.width&&(elRect=$.extend({},elRect,{width:elRect.right-elRect.left,height:elRect.bottom-elRect.top}));var elOffset=isBody?{top:0,left:0}:$element.offset(),scroll={scroll:isBody?document.documentElement.scrollTop||document.body.scrollTop:$element.scrollTop()},outerDims=isBody?{width:$(window).width(),height:$(window).height()}:null;return $.extend({},elRect,scroll,outerDims,elOffset)},Tooltip.prototype.getCalculatedOffset=function(placement,pos,actualWidth,actualHeight){return"bottom"==placement?{top:pos.top+pos.height,left:pos.left+pos.width/2-actualWidth/2}:"top"==placement?{top:pos.top-actualHeight,left:pos.left+pos.width/2-actualWidth/2}:"left"==placement?{top:pos.top+pos.height/2-actualHeight/2,left:pos.left-actualWidth}:{top:pos.top+pos.height/2-actualHeight/2,left:pos.left+pos.width}},Tooltip.prototype.getViewportAdjustedDelta=function(placement,pos,actualWidth,actualHeight){var delta={top:0,left:0};if(!this.$viewport)return delta;var viewportPadding=this.options.viewport&&this.options.viewport.padding||0,viewportDimensions=this.getPosition(this.$viewport);if(/right|left/.test(placement)){var topEdgeOffset=pos.top-viewportPadding-viewportDimensions.scroll,bottomEdgeOffset=pos.top+viewportPadding-viewportDimensions.scroll+actualHeight;topEdgeOffset<viewportDimensions.top?delta.top=viewportDimensions.top-topEdgeOffset:bottomEdgeOffset>viewportDimensions.top+viewportDimensions.height&&(delta.top=viewportDimensions.top+viewportDimensions.height-bottomEdgeOffset)}else{var leftEdgeOffset=pos.left-viewportPadding,rightEdgeOffset=pos.left+viewportPadding+actualWidth;leftEdgeOffset<viewportDimensions.left?delta.left=viewportDimensions.left-leftEdgeOffset:rightEdgeOffset>viewportDimensions.width&&(delta.left=viewportDimensions.left+viewportDimensions.width-rightEdgeOffset)}return delta},Tooltip.prototype.getTitle=function(){var title,$e=this.$element,o=this.options;return title=$e.attr("data-original-title")||("function"==typeof o.title?o.title.call($e[0]):o.title)},Tooltip.prototype.getUID=function(prefix){do prefix+=~~(1e6*Math.random());while(document.getElementById(prefix));return prefix},Tooltip.prototype.tip=function(){return this.$tip=this.$tip||$(this.options.template)},Tooltip.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},Tooltip.prototype.enable=function(){this.enabled=!0},Tooltip.prototype.disable=function(){this.enabled=!1},Tooltip.prototype.toggleEnabled=function(){this.enabled=!this.enabled},Tooltip.prototype.toggle=function(e){var self=this;e&&(self=$(e.currentTarget).data("bs."+this.type),self||(self=new this.constructor(e.currentTarget,this.getDelegateOptions()),$(e.currentTarget).data("bs."+this.type,self))),self.tip().hasClass("in")?self.leave(self):self.enter(self);
},Tooltip.prototype.destroy=function(){var that=this;clearTimeout(this.timeout),this.hide(function(){that.$element.off("."+that.type).removeData("bs."+that.type)})};var old=$.fn.tooltip;$.fn.tooltip=Plugin,$.fn.tooltip.Constructor=Tooltip,$.fn.tooltip.noConflict=function(){return $.fn.tooltip=old,this}}(jQuery),+function($){"use strict";function Plugin(option){return this.each(function(){var $this=$(this),data=$this.data("bs.popover"),options="object"==typeof option&&option,selector=options&&options.selector;(data||"destroy"!=option)&&(selector?(data||$this.data("bs.popover",data={}),data[selector]||(data[selector]=new Popover(this,options))):data||$this.data("bs.popover",data=new Popover(this,options)),"string"==typeof option&&data[option]())})}var Popover=function(element,options){this.init("popover",element,options)};if(!$.fn.tooltip)throw new Error("Popover requires tooltip.js");Popover.VERSION="3.3.0",Popover.DEFAULTS=$.extend({},$.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),Popover.prototype=$.extend({},$.fn.tooltip.Constructor.prototype),Popover.prototype.constructor=Popover,Popover.prototype.getDefaults=function(){return Popover.DEFAULTS},Popover.prototype.setContent=function(){var $tip=this.tip(),title=this.getTitle(),content=this.getContent();$tip.find(".popover-title")[this.options.html?"html":"text"](title),$tip.find(".popover-content").children().detach().end()[this.options.html?"string"==typeof content?"html":"append":"text"](content),$tip.removeClass("fade top bottom left right in"),$tip.find(".popover-title").html()||$tip.find(".popover-title").hide()},Popover.prototype.hasContent=function(){return this.getTitle()||this.getContent()},Popover.prototype.getContent=function(){var $e=this.$element,o=this.options;return $e.attr("data-content")||("function"==typeof o.content?o.content.call($e[0]):o.content)},Popover.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")},Popover.prototype.tip=function(){return this.$tip||(this.$tip=$(this.options.template)),this.$tip};var old=$.fn.popover;$.fn.popover=Plugin,$.fn.popover.Constructor=Popover,$.fn.popover.noConflict=function(){return $.fn.popover=old,this}}(jQuery),+function($){"use strict";function ScrollSpy(element,options){var process=$.proxy(this.process,this);this.$body=$("body"),this.$scrollElement=$($(element).is("body")?window:element),this.options=$.extend({},ScrollSpy.DEFAULTS,options),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",process),this.refresh(),this.process()}function Plugin(option){return this.each(function(){var $this=$(this),data=$this.data("bs.scrollspy"),options="object"==typeof option&&option;data||$this.data("bs.scrollspy",data=new ScrollSpy(this,options)),"string"==typeof option&&data[option]()})}ScrollSpy.VERSION="3.3.0",ScrollSpy.DEFAULTS={offset:10},ScrollSpy.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},ScrollSpy.prototype.refresh=function(){var offsetMethod="offset",offsetBase=0;$.isWindow(this.$scrollElement[0])||(offsetMethod="position",offsetBase=this.$scrollElement.scrollTop()),this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight();var self=this;this.$body.find(this.selector).map(function(){var $el=$(this),href=$el.data("target")||$el.attr("href"),$href=/^#./.test(href)&&$(href);return $href&&$href.length&&$href.is(":visible")&&[[$href[offsetMethod]().top+offsetBase,href]]||null}).sort(function(a,b){return a[0]-b[0]}).each(function(){self.offsets.push(this[0]),self.targets.push(this[1])})},ScrollSpy.prototype.process=function(){var i,scrollTop=this.$scrollElement.scrollTop()+this.options.offset,scrollHeight=this.getScrollHeight(),maxScroll=this.options.offset+scrollHeight-this.$scrollElement.height(),offsets=this.offsets,targets=this.targets,activeTarget=this.activeTarget;if(this.scrollHeight!=scrollHeight&&this.refresh(),scrollTop>=maxScroll)return activeTarget!=(i=targets[targets.length-1])&&this.activate(i);if(activeTarget&&scrollTop<offsets[0])return this.activeTarget=null,this.clear();for(i=offsets.length;i--;)activeTarget!=targets[i]&&scrollTop>=offsets[i]&&(!offsets[i+1]||scrollTop<=offsets[i+1])&&this.activate(targets[i])},ScrollSpy.prototype.activate=function(target){this.activeTarget=target,this.clear();var selector=this.selector+'[data-target="'+target+'"],'+this.selector+'[href="'+target+'"]',active=$(selector).parents("li").addClass("active");active.parent(".dropdown-menu").length&&(active=active.closest("li.dropdown").addClass("active")),active.trigger("activate.bs.scrollspy")},ScrollSpy.prototype.clear=function(){$(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};var old=$.fn.scrollspy;$.fn.scrollspy=Plugin,$.fn.scrollspy.Constructor=ScrollSpy,$.fn.scrollspy.noConflict=function(){return $.fn.scrollspy=old,this},$(window).on("load.bs.scrollspy.data-api",function(){$('[data-spy="scroll"]').each(function(){var $spy=$(this);Plugin.call($spy,$spy.data())})})}(jQuery),+function($){"use strict";function Plugin(option){return this.each(function(){var $this=$(this),data=$this.data("bs.tab");data||$this.data("bs.tab",data=new Tab(this)),"string"==typeof option&&data[option]()})}var Tab=function(element){this.element=$(element)};Tab.VERSION="3.3.0",Tab.TRANSITION_DURATION=150,Tab.prototype.show=function(){var $this=this.element,$ul=$this.closest("ul:not(.dropdown-menu)"),selector=$this.data("target");if(selector||(selector=$this.attr("href"),selector=selector&&selector.replace(/.*(?=#[^\s]*$)/,"")),!$this.parent("li").hasClass("active")){var $previous=$ul.find(".active:last a"),hideEvent=$.Event("hide.bs.tab",{relatedTarget:$this[0]}),showEvent=$.Event("show.bs.tab",{relatedTarget:$previous[0]});if($previous.trigger(hideEvent),$this.trigger(showEvent),!showEvent.isDefaultPrevented()&&!hideEvent.isDefaultPrevented()){var $target=$(selector);this.activate($this.closest("li"),$ul),this.activate($target,$target.parent(),function(){$previous.trigger({type:"hidden.bs.tab",relatedTarget:$this[0]}),$this.trigger({type:"shown.bs.tab",relatedTarget:$previous[0]})})}}},Tab.prototype.activate=function(element,container,callback){function next(){$active.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1),element.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0),transition?(element[0].offsetWidth,element.addClass("in")):element.removeClass("fade"),element.parent(".dropdown-menu")&&element.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0),callback&&callback()}var $active=container.find("> .active"),transition=callback&&$.support.transition&&($active.length&&$active.hasClass("fade")||!!container.find("> .fade").length);$active.length&&transition?$active.one("bsTransitionEnd",next).emulateTransitionEnd(Tab.TRANSITION_DURATION):next(),$active.removeClass("in")};var old=$.fn.tab;$.fn.tab=Plugin,$.fn.tab.Constructor=Tab,$.fn.tab.noConflict=function(){return $.fn.tab=old,this};var clickHandler=function(e){e.preventDefault(),Plugin.call($(this),"show")};$(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',clickHandler).on("click.bs.tab.data-api",'[data-toggle="pill"]',clickHandler)}(jQuery),+function($){"use strict";function Plugin(option){return this.each(function(){var $this=$(this),data=$this.data("bs.affix"),options="object"==typeof option&&option;data||$this.data("bs.affix",data=new Affix(this,options)),"string"==typeof option&&data[option]()})}var Affix=function(element,options){this.options=$.extend({},Affix.DEFAULTS,options),this.$target=$(this.options.target).on("scroll.bs.affix.data-api",$.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",$.proxy(this.checkPositionWithEventLoop,this)),this.$element=$(element),this.affixed=this.unpin=this.pinnedOffset=null,this.checkPosition()};Affix.VERSION="3.3.0",Affix.RESET="affix affix-top affix-bottom",Affix.DEFAULTS={offset:0,target:window},Affix.prototype.getState=function(scrollHeight,height,offsetTop,offsetBottom){var scrollTop=this.$target.scrollTop(),position=this.$element.offset(),targetHeight=this.$target.height();if(null!=offsetTop&&"top"==this.affixed)return scrollTop<offsetTop&&"top";if("bottom"==this.affixed)return null!=offsetTop?!(scrollTop+this.unpin<=position.top)&&"bottom":!(scrollTop+targetHeight<=scrollHeight-offsetBottom)&&"bottom";var initializing=null==this.affixed,colliderTop=initializing?scrollTop:position.top,colliderHeight=initializing?targetHeight:height;return null!=offsetTop&&colliderTop<=offsetTop?"top":null!=offsetBottom&&colliderTop+colliderHeight>=scrollHeight-offsetBottom&&"bottom"},Affix.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(Affix.RESET).addClass("affix");var scrollTop=this.$target.scrollTop(),position=this.$element.offset();return this.pinnedOffset=position.top-scrollTop},Affix.prototype.checkPositionWithEventLoop=function(){setTimeout($.proxy(this.checkPosition,this),1)},Affix.prototype.checkPosition=function(){if(this.$element.is(":visible")){var height=this.$element.height(),offset=this.options.offset,offsetTop=offset.top,offsetBottom=offset.bottom,scrollHeight=$("body").height();"object"!=typeof offset&&(offsetBottom=offsetTop=offset),"function"==typeof offsetTop&&(offsetTop=offset.top(this.$element)),"function"==typeof offsetBottom&&(offsetBottom=offset.bottom(this.$element));var affix=this.getState(scrollHeight,height,offsetTop,offsetBottom);if(this.affixed!=affix){null!=this.unpin&&this.$element.css("top","");var affixType="affix"+(affix?"-"+affix:""),e=$.Event(affixType+".bs.affix");if(this.$element.trigger(e),e.isDefaultPrevented())return;this.affixed=affix,this.unpin="bottom"==affix?this.getPinnedOffset():null,this.$element.removeClass(Affix.RESET).addClass(affixType).trigger(affixType.replace("affix","affixed")+".bs.affix")}"bottom"==affix&&this.$element.offset({top:scrollHeight-height-offsetBottom})}};var old=$.fn.affix;$.fn.affix=Plugin,$.fn.affix.Constructor=Affix,$.fn.affix.noConflict=function(){return $.fn.affix=old,this},$(window).on("load",function(){$('[data-spy="affix"]').each(function(){var $spy=$(this),data=$spy.data();data.offset=data.offset||{},null!=data.offsetBottom&&(data.offset.bottom=data.offsetBottom),null!=data.offsetTop&&(data.offset.top=data.offsetTop),Plugin.call($spy,data)})})}(jQuery)}!function($,undefined){function UTCDate(){return new Date(Date.UTC.apply(Date,arguments))}function UTCToday(){var today=new Date;return UTCDate(today.getFullYear(),today.getMonth(),today.getDate())}function alias(method){return function(){return this[method].apply(this,arguments)}}function opts_from_el(el,prefix){function re_lower(_,a){return a.toLowerCase()}var inkey,data=$(el).data(),out={},replace=new RegExp("^"+prefix.toLowerCase()+"([A-Z])");prefix=new RegExp("^"+prefix.toLowerCase());for(var key in data)prefix.test(key)&&(inkey=key.replace(replace,re_lower),out[inkey]=data[key]);return out}function opts_from_locale(lang){var out={};if(dates[lang]||(lang=lang.split("-")[0],dates[lang])){var d=dates[lang];return $.each(locale_opts,function(i,k){k in d&&(out[k]=d[k])}),out}}var $window=$(window),DateArray=function(){var extras={get:function(i){return this.slice(i)[0]},contains:function(d){for(var val=d&&d.valueOf(),i=0,l=this.length;i<l;i++)if(this[i].valueOf()===val)return i;return-1},remove:function(i){this.splice(i,1)},replace:function(new_array){new_array&&($.isArray(new_array)||(new_array=[new_array]),this.clear(),this.push.apply(this,new_array))},clear:function(){this.length=0},copy:function(){var a=new DateArray;return a.replace(this),a}};return function(){var a=[];return a.push.apply(a,arguments),$.extend(a,extras),a}}(),Datepicker=function(element,options){this.dates=new DateArray,this.viewDate=UTCToday(),this.focusDate=null,this._process_options(options),this.element=$(element),this.isInline=!1,this.isInput=this.element.is("input"),this.component=!!this.element.is(".date")&&this.element.find(".add-on, .input-group-addon, .btn"),this.hasInput=this.component&&this.element.find("input").length,this.component&&0===this.component.length&&(this.component=!1),this.picker=$(DPGlobal.template),this._buildEvents(),this._attachEvents(),this.isInline?this.picker.addClass("datepicker-inline").appendTo(this.element):this.picker.addClass("datepicker-dropdown dropdown-menu"),this.o.rtl&&this.picker.addClass("datepicker-rtl"),this.viewMode=this.o.startView,this.o.calendarWeeks&&this.picker.find("tfoot th.today").attr("colspan",function(i,val){return parseInt(val)+1}),this._allow_update=!1,this.setStartDate(this._o.startDate),this.setEndDate(this._o.endDate),this.setDaysOfWeekDisabled(this.o.daysOfWeekDisabled),this.fillDow(),this.fillMonths(),this._allow_update=!0,this.update(),this.showMode(),this.isInline&&this.show()};Datepicker.prototype={constructor:Datepicker,_process_options:function(opts){this._o=$.extend({},this._o,opts);var o=this.o=$.extend({},this._o),lang=o.language;switch(dates[lang]||(lang=lang.split("-")[0],dates[lang]||(lang=defaults.language)),o.language=lang,o.startView){case 2:case"decade":o.startView=2;break;case 1:case"year":o.startView=1;break;default:o.startView=0}switch(o.minViewMode){case 1:case"months":o.minViewMode=1;break;case 2:case"years":o.minViewMode=2;break;default:o.minViewMode=0}o.startView=Math.max(o.startView,o.minViewMode),o.multidate!==!0&&(o.multidate=Number(o.multidate)||!1,o.multidate!==!1?o.multidate=Math.max(0,o.multidate):o.multidate=1),o.multidateSeparator=String(o.multidateSeparator),o.weekStart%=7,o.weekEnd=(o.weekStart+6)%7;var format=DPGlobal.parseFormat(o.format);o.startDate!==-(1/0)&&(o.startDate?o.startDate instanceof Date?o.startDate=this._local_to_utc(this._zero_time(o.startDate)):o.startDate=DPGlobal.parseDate(o.startDate,format,o.language):o.startDate=-(1/0)),o.endDate!==1/0&&(o.endDate?o.endDate instanceof Date?o.endDate=this._local_to_utc(this._zero_time(o.endDate)):o.endDate=DPGlobal.parseDate(o.endDate,format,o.language):o.endDate=1/0),o.daysOfWeekDisabled=o.daysOfWeekDisabled||[],$.isArray(o.daysOfWeekDisabled)||(o.daysOfWeekDisabled=o.daysOfWeekDisabled.split(/[,\s]*/)),o.daysOfWeekDisabled=$.map(o.daysOfWeekDisabled,function(d){return parseInt(d,10)});var plc=String(o.orientation).toLowerCase().split(/\s+/g),_plc=o.orientation.toLowerCase();if(plc=$.grep(plc,function(word){return/^auto|left|right|top|bottom$/.test(word)}),o.orientation={x:"auto",y:"auto"},_plc&&"auto"!==_plc)if(1===plc.length)switch(plc[0]){case"top":case"bottom":o.orientation.y=plc[0];break;case"left":case"right":o.orientation.x=plc[0]}else _plc=$.grep(plc,function(word){return/^left|right$/.test(word)}),o.orientation.x=_plc[0]||"auto",_plc=$.grep(plc,function(word){return/^top|bottom$/.test(word)}),o.orientation.y=_plc[0]||"auto";else;},_events:[],_secondaryEvents:[],_applyEvents:function(evs){for(var el,ch,ev,i=0;i<evs.length;i++)el=evs[i][0],2===evs[i].length?(ch=undefined,ev=evs[i][1]):3===evs[i].length&&(ch=evs[i][1],ev=evs[i][2]),el.on(ev,ch)},_unapplyEvents:function(evs){for(var el,ev,ch,i=0;i<evs.length;i++)el=evs[i][0],2===evs[i].length?(ch=undefined,ev=evs[i][1]):3===evs[i].length&&(ch=evs[i][1],ev=evs[i][2]),el.off(ev,ch)},_buildEvents:function(){this.isInput?this._events=[[this.element,{focus:$.proxy(this.show,this),keyup:$.proxy(function(e){$.inArray(e.keyCode,[27,37,39,38,40,32,13,9])===-1&&this.update()},this),keydown:$.proxy(this.keydown,this)}]]:this.component&&this.hasInput?this._events=[[this.element.find("input"),{focus:$.proxy(this.show,this),keyup:$.proxy(function(e){$.inArray(e.keyCode,[27,37,39,38,40,32,13,9])===-1&&this.update()},this),keydown:$.proxy(this.keydown,this)}],[this.component,{click:$.proxy(this.show,this)}]]:this.element.is("div")?this.isInline=!0:this._events=[[this.element,{click:$.proxy(this.show,this)}]],this._events.push([this.element,"*",{blur:$.proxy(function(e){this._focused_from=e.target},this)}],[this.element,{blur:$.proxy(function(e){this._focused_from=e.target},this)}]),this._secondaryEvents=[[this.picker,{click:$.proxy(this.click,this)}],[$(window),{resize:$.proxy(this.place,this)}],[$(document),{"mousedown touchstart":$.proxy(function(e){this.element.is(e.target)||this.element.find(e.target).length||this.picker.is(e.target)||this.picker.find(e.target).length||this.hide()},this)}]]},_attachEvents:function(){this._detachEvents(),this._applyEvents(this._events)},_detachEvents:function(){this._unapplyEvents(this._events)},_attachSecondaryEvents:function(){this._detachSecondaryEvents(),this._applyEvents(this._secondaryEvents)},_detachSecondaryEvents:function(){this._unapplyEvents(this._secondaryEvents)},_trigger:function(event,altdate){var date=altdate||this.dates.get(-1),local_date=this._utc_to_local(date);this.element.trigger({type:event,date:local_date,dates:$.map(this.dates,this._utc_to_local),format:$.proxy(function(ix,format){0===arguments.length?(ix=this.dates.length-1,format=this.o.format):"string"==typeof ix&&(format=ix,ix=this.dates.length-1),format=format||this.o.format;var date=this.dates.get(ix);return DPGlobal.formatDate(date,format,this.o.language)},this)})},show:function(){this.isInline||this.picker.appendTo("body"),this.picker.show(),this.place(),this._attachSecondaryEvents(),this._trigger("show")},hide:function(){this.isInline||this.picker.is(":visible")&&(this.focusDate=null,this.picker.hide().detach(),this._detachSecondaryEvents(),this.viewMode=this.o.startView,this.showMode(),this.o.forceParse&&(this.isInput&&this.element.val()||this.hasInput&&this.element.find("input").val())&&this.setValue(),this._trigger("hide"))},remove:function(){this.hide(),this._detachEvents(),this._detachSecondaryEvents(),this.picker.remove(),delete this.element.data().datepicker,this.isInput||delete this.element.data().date},_utc_to_local:function(utc){return utc&&new Date(utc.getTime()+6e4*utc.getTimezoneOffset())},_local_to_utc:function(local){return local&&new Date(local.getTime()-6e4*local.getTimezoneOffset())},_zero_time:function(local){return local&&new Date(local.getFullYear(),local.getMonth(),local.getDate())},_zero_utc_time:function(utc){return utc&&new Date(Date.UTC(utc.getUTCFullYear(),utc.getUTCMonth(),utc.getUTCDate()))},getDates:function(){return $.map(this.dates,this._utc_to_local)},getUTCDates:function(){return $.map(this.dates,function(d){return new Date(d)})},getDate:function(){return this._utc_to_local(this.getUTCDate())},getUTCDate:function(){return new Date(this.dates.get(-1))},setDates:function(){var args=$.isArray(arguments[0])?arguments[0]:arguments;this.update.apply(this,args),this._trigger("changeDate"),this.setValue()},setUTCDates:function(){var args=$.isArray(arguments[0])?arguments[0]:arguments;this.update.apply(this,$.map(args,this._utc_to_local)),this._trigger("changeDate"),this.setValue()},setDate:alias("setDates"),setUTCDate:alias("setUTCDates"),setValue:function(){var formatted=this.getFormattedDate();this.isInput?this.element.val(formatted).change():this.component&&this.element.find("input").val(formatted).change()},getFormattedDate:function(format){format===undefined&&(format=this.o.format);var lang=this.o.language;return $.map(this.dates,function(d){return DPGlobal.formatDate(d,format,lang)}).join(this.o.multidateSeparator)},setStartDate:function(startDate){this._process_options({startDate:startDate}),this.update(),this.updateNavArrows()},setEndDate:function(endDate){this._process_options({endDate:endDate}),this.update(),this.updateNavArrows()},setDaysOfWeekDisabled:function(daysOfWeekDisabled){this._process_options({daysOfWeekDisabled:daysOfWeekDisabled}),this.update(),this.updateNavArrows()},place:function(){if(!this.isInline){var calendarWidth=this.picker.outerWidth(),calendarHeight=this.picker.outerHeight(),visualPadding=10,windowWidth=$window.width(),windowHeight=$window.height(),scrollTop=$window.scrollTop(),zIndex=parseInt(this.element.parents().filter(function(){return"auto"!==$(this).css("z-index")}).first().css("z-index"))+10,offset=this.component?this.component.parent().offset():this.element.offset(),height=this.component?this.component.outerHeight(!0):this.element.outerHeight(!1),width=this.component?this.component.outerWidth(!0):this.element.outerWidth(!1),left=offset.left,top=offset.top;this.picker.removeClass("datepicker-orient-top datepicker-orient-bottom datepicker-orient-right datepicker-orient-left"),"auto"!==this.o.orientation.x?(this.picker.addClass("datepicker-orient-"+this.o.orientation.x),"right"===this.o.orientation.x&&(left-=calendarWidth-width)):(this.picker.addClass("datepicker-orient-left"),offset.left<0?left-=offset.left-visualPadding:offset.left+calendarWidth>windowWidth&&(left=windowWidth-calendarWidth-visualPadding));var top_overflow,bottom_overflow,yorient=this.o.orientation.y;"auto"===yorient&&(top_overflow=-scrollTop+offset.top-calendarHeight,bottom_overflow=scrollTop+windowHeight-(offset.top+height+calendarHeight),yorient=Math.max(top_overflow,bottom_overflow)===bottom_overflow?"top":"bottom"),this.picker.addClass("datepicker-orient-"+yorient),"top"===yorient?top+=height:top-=calendarHeight+parseInt(this.picker.css("padding-top")),this.picker.css({top:top,left:left,zIndex:zIndex})}},_allow_update:!0,update:function(){if(this._allow_update){var oldDates=this.dates.copy(),dates=[],fromArgs=!1;arguments.length?($.each(arguments,$.proxy(function(i,date){date instanceof Date&&(date=this._local_to_utc(date)),dates.push(date)},this)),fromArgs=!0):(dates=this.isInput?this.element.val():this.element.data("date")||this.element.find("input").val(),dates=dates&&this.o.multidate?dates.split(this.o.multidateSeparator):[dates],delete this.element.data().date),dates=$.map(dates,$.proxy(function(date){return DPGlobal.parseDate(date,this.o.format,this.o.language)},this)),dates=$.grep(dates,$.proxy(function(date){return date<this.o.startDate||date>this.o.endDate||!date},this),!0),this.dates.replace(dates),this.dates.length?this.viewDate=new Date(this.dates.get(-1)):this.viewDate<this.o.startDate?this.viewDate=new Date(this.o.startDate):this.viewDate>this.o.endDate&&(this.viewDate=new Date(this.o.endDate)),fromArgs?this.setValue():dates.length&&String(oldDates)!==String(this.dates)&&this._trigger("changeDate"),!this.dates.length&&oldDates.length&&this._trigger("clearDate"),this.fill()}},fillDow:function(){var dowCnt=this.o.weekStart,html="<tr>";if(this.o.calendarWeeks){var cell='<th class="cw">&nbsp;</th>';html+=cell,this.picker.find(".datepicker-days thead tr:first-child").prepend(cell)}for(;dowCnt<this.o.weekStart+7;)html+='<th class="dow">'+dates[this.o.language].daysMin[dowCnt++%7]+"</th>";html+="</tr>",this.picker.find(".datepicker-days thead").append(html)},fillMonths:function(){for(var html="",i=0;i<12;)html+='<span class="month">'+dates[this.o.language].monthsShort[i++]+"</span>";this.picker.find(".datepicker-months td").html(html)},setRange:function(range){range&&range.length?this.range=$.map(range,function(d){return d.valueOf()}):delete this.range,this.fill()},getClassNames:function(date){var cls=[],year=this.viewDate.getUTCFullYear(),month=this.viewDate.getUTCMonth(),today=new Date;return date.getUTCFullYear()<year||date.getUTCFullYear()===year&&date.getUTCMonth()<month?cls.push("old"):(date.getUTCFullYear()>year||date.getUTCFullYear()===year&&date.getUTCMonth()>month)&&cls.push("new"),this.focusDate&&date.valueOf()===this.focusDate.valueOf()&&cls.push("focused"),this.o.todayHighlight&&date.getUTCFullYear()===today.getFullYear()&&date.getUTCMonth()===today.getMonth()&&date.getUTCDate()===today.getDate()&&cls.push("today"),this.dates.contains(date)!==-1&&cls.push("active"),(date.valueOf()<this.o.startDate||date.valueOf()>this.o.endDate||$.inArray(date.getUTCDay(),this.o.daysOfWeekDisabled)!==-1)&&cls.push("disabled"),this.range&&(date>this.range[0]&&date<this.range[this.range.length-1]&&cls.push("range"),$.inArray(date.valueOf(),this.range)!==-1&&cls.push("selected")),cls},fill:function(){var tooltip,d=new Date(this.viewDate),year=d.getUTCFullYear(),month=d.getUTCMonth(),startYear=this.o.startDate!==-(1/0)?this.o.startDate.getUTCFullYear():-(1/0),startMonth=this.o.startDate!==-(1/0)?this.o.startDate.getUTCMonth():-(1/0),endYear=this.o.endDate!==1/0?this.o.endDate.getUTCFullYear():1/0,endMonth=this.o.endDate!==1/0?this.o.endDate.getUTCMonth():1/0,todaytxt=dates[this.o.language].today||dates.en.today||"",cleartxt=dates[this.o.language].clear||dates.en.clear||"";this.picker.find(".datepicker-days thead th.datepicker-switch").text(dates[this.o.language].months[month]+" "+year),this.picker.find("tfoot th.today").text(todaytxt).toggle(this.o.todayBtn!==!1),this.picker.find("tfoot th.clear").text(cleartxt).toggle(this.o.clearBtn!==!1),this.updateNavArrows(),this.fillMonths();var prevMonth=UTCDate(year,month-1,28),day=DPGlobal.getDaysInMonth(prevMonth.getUTCFullYear(),prevMonth.getUTCMonth());prevMonth.setUTCDate(day),prevMonth.setUTCDate(day-(prevMonth.getUTCDay()-this.o.weekStart+7)%7);var nextMonth=new Date(prevMonth);nextMonth.setUTCDate(nextMonth.getUTCDate()+42),nextMonth=nextMonth.valueOf();for(var clsName,html=[];prevMonth.valueOf()<nextMonth;){if(prevMonth.getUTCDay()===this.o.weekStart&&(html.push("<tr>"),this.o.calendarWeeks)){var ws=new Date(+prevMonth+(this.o.weekStart-prevMonth.getUTCDay()-7)%7*864e5),th=new Date(Number(ws)+(11-ws.getUTCDay())%7*864e5),yth=new Date(Number(yth=UTCDate(th.getUTCFullYear(),0,1))+(11-yth.getUTCDay())%7*864e5),calWeek=(th-yth)/864e5/7+1;html.push('<td class="cw">'+calWeek+"</td>")}if(clsName=this.getClassNames(prevMonth),clsName.push("day"),this.o.beforeShowDay!==$.noop){var before=this.o.beforeShowDay(this._utc_to_local(prevMonth));before===undefined?before={}:"boolean"==typeof before?before={enabled:before}:"string"==typeof before&&(before={classes:before}),before.enabled===!1&&clsName.push("disabled"),before.classes&&(clsName=clsName.concat(before.classes.split(/\s+/))),before.tooltip&&(tooltip=before.tooltip)}clsName=$.unique(clsName),html.push('<td class="'+clsName.join(" ")+'"'+(tooltip?' title="'+tooltip+'"':"")+">"+prevMonth.getUTCDate()+"</td>"),prevMonth.getUTCDay()===this.o.weekEnd&&html.push("</tr>"),prevMonth.setUTCDate(prevMonth.getUTCDate()+1)}this.picker.find(".datepicker-days tbody").empty().append(html.join(""));var months=this.picker.find(".datepicker-months").find("th:eq(1)").text(year).end().find("span").removeClass("active");$.each(this.dates,function(i,d){d.getUTCFullYear()===year&&months.eq(d.getUTCMonth()).addClass("active")}),(year<startYear||year>endYear)&&months.addClass("disabled"),year===startYear&&months.slice(0,startMonth).addClass("disabled"),year===endYear&&months.slice(endMonth+1).addClass("disabled"),html="",year=10*parseInt(year/10,10);var yearCont=this.picker.find(".datepicker-years").find("th:eq(1)").text(year+"-"+(year+9)).end().find("td");year-=1;for(var classes,years=$.map(this.dates,function(d){return d.getUTCFullYear()}),i=-1;i<11;i++)classes=["year"],i===-1?classes.push("old"):10===i&&classes.push("new"),$.inArray(year,years)!==-1&&classes.push("active"),(year<startYear||year>endYear)&&classes.push("disabled"),html+='<span class="'+classes.join(" ")+'">'+year+"</span>",year+=1;yearCont.html(html)},updateNavArrows:function(){if(this._allow_update){var d=new Date(this.viewDate),year=d.getUTCFullYear(),month=d.getUTCMonth();switch(this.viewMode){case 0:this.o.startDate!==-(1/0)&&year<=this.o.startDate.getUTCFullYear()&&month<=this.o.startDate.getUTCMonth()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),this.o.endDate!==1/0&&year>=this.o.endDate.getUTCFullYear()&&month>=this.o.endDate.getUTCMonth()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"});break;case 1:case 2:this.o.startDate!==-(1/0)&&year<=this.o.startDate.getUTCFullYear()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),this.o.endDate!==1/0&&year>=this.o.endDate.getUTCFullYear()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"})}}},click:function(e){e.preventDefault();var year,month,day,target=$(e.target).closest("span, td, th");if(1===target.length)switch(target[0].nodeName.toLowerCase()){case"th":switch(target[0].className){case"datepicker-switch":this.showMode(1);break;case"prev":case"next":var dir=DPGlobal.modes[this.viewMode].navStep*("prev"===target[0].className?-1:1);switch(this.viewMode){case 0:this.viewDate=this.moveMonth(this.viewDate,dir),this._trigger("changeMonth",this.viewDate);break;case 1:case 2:this.viewDate=this.moveYear(this.viewDate,dir),1===this.viewMode&&this._trigger("changeYear",this.viewDate)}this.fill();break;case"today":var date=new Date;date=UTCDate(date.getFullYear(),date.getMonth(),date.getDate(),0,0,0),this.showMode(-2);var which="linked"===this.o.todayBtn?null:"view";this._setDate(date,which);break;case"clear":var element;this.isInput?element=this.element:this.component&&(element=this.element.find("input")),element&&element.val("").change(),this.update(),this._trigger("changeDate"),this.o.autoclose&&this.hide()}break;case"span":target.is(".disabled")||(this.viewDate.setUTCDate(1),target.is(".month")?(day=1,month=target.parent().find("span").index(target),year=this.viewDate.getUTCFullYear(),this.viewDate.setUTCMonth(month),this._trigger("changeMonth",this.viewDate),1===this.o.minViewMode&&this._setDate(UTCDate(year,month,day))):(day=1,month=0,year=parseInt(target.text(),10)||0,this.viewDate.setUTCFullYear(year),this._trigger("changeYear",this.viewDate),2===this.o.minViewMode&&this._setDate(UTCDate(year,month,day))),this.showMode(-1),this.fill());break;case"td":target.is(".day")&&!target.is(".disabled")&&(day=parseInt(target.text(),10)||1,year=this.viewDate.getUTCFullYear(),month=this.viewDate.getUTCMonth(),target.is(".old")?0===month?(month=11,year-=1):month-=1:target.is(".new")&&(11===month?(month=0,year+=1):month+=1),this._setDate(UTCDate(year,month,day)))}this.picker.is(":visible")&&this._focused_from&&$(this._focused_from).focus(),delete this._focused_from},_toggle_multidate:function(date){var ix=this.dates.contains(date);if(date?ix!==-1?this.dates.remove(ix):this.dates.push(date):this.dates.clear(),"number"==typeof this.o.multidate)for(;this.dates.length>this.o.multidate;)this.dates.remove(0)},_setDate:function(date,which){which&&"date"!==which||this._toggle_multidate(date&&new Date(date)),which&&"view"!==which||(this.viewDate=date&&new Date(date)),this.fill(),this.setValue(),this._trigger("changeDate");var element;this.isInput?element=this.element:this.component&&(element=this.element.find("input")),element&&element.change(),!this.o.autoclose||which&&"date"!==which||this.hide()},moveMonth:function(date,dir){if(!date)return undefined;if(!dir)return date;var new_month,test,new_date=new Date(date.valueOf()),day=new_date.getUTCDate(),month=new_date.getUTCMonth(),mag=Math.abs(dir);if(dir=dir>0?1:-1,1===mag)test=dir===-1?function(){return new_date.getUTCMonth()===month}:function(){return new_date.getUTCMonth()!==new_month},new_month=month+dir,new_date.setUTCMonth(new_month),(new_month<0||new_month>11)&&(new_month=(new_month+12)%12);else{for(var i=0;i<mag;i++)new_date=this.moveMonth(new_date,dir);new_month=new_date.getUTCMonth(),new_date.setUTCDate(day),test=function(){return new_month!==new_date.getUTCMonth()}}for(;test();)new_date.setUTCDate(--day),new_date.setUTCMonth(new_month);return new_date},moveYear:function(date,dir){return this.moveMonth(date,12*dir);
},dateWithinRange:function(date){return date>=this.o.startDate&&date<=this.o.endDate},keydown:function(e){if(this.picker.is(":not(:visible)"))return void(27===e.keyCode&&this.show());var dir,newDate,newViewDate,dateChanged=!1,focusDate=this.focusDate||this.viewDate;switch(e.keyCode){case 27:this.focusDate?(this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.fill()):this.hide(),e.preventDefault();break;case 37:case 39:if(!this.o.keyboardNavigation)break;dir=37===e.keyCode?-1:1,e.ctrlKey?(newDate=this.moveYear(this.dates.get(-1)||UTCToday(),dir),newViewDate=this.moveYear(focusDate,dir),this._trigger("changeYear",this.viewDate)):e.shiftKey?(newDate=this.moveMonth(this.dates.get(-1)||UTCToday(),dir),newViewDate=this.moveMonth(focusDate,dir),this._trigger("changeMonth",this.viewDate)):(newDate=new Date(this.dates.get(-1)||UTCToday()),newDate.setUTCDate(newDate.getUTCDate()+dir),newViewDate=new Date(focusDate),newViewDate.setUTCDate(focusDate.getUTCDate()+dir)),this.dateWithinRange(newDate)&&(this.focusDate=this.viewDate=newViewDate,this.setValue(),this.fill(),e.preventDefault());break;case 38:case 40:if(!this.o.keyboardNavigation)break;dir=38===e.keyCode?-1:1,e.ctrlKey?(newDate=this.moveYear(this.dates.get(-1)||UTCToday(),dir),newViewDate=this.moveYear(focusDate,dir),this._trigger("changeYear",this.viewDate)):e.shiftKey?(newDate=this.moveMonth(this.dates.get(-1)||UTCToday(),dir),newViewDate=this.moveMonth(focusDate,dir),this._trigger("changeMonth",this.viewDate)):(newDate=new Date(this.dates.get(-1)||UTCToday()),newDate.setUTCDate(newDate.getUTCDate()+7*dir),newViewDate=new Date(focusDate),newViewDate.setUTCDate(focusDate.getUTCDate()+7*dir)),this.dateWithinRange(newDate)&&(this.focusDate=this.viewDate=newViewDate,this.setValue(),this.fill(),e.preventDefault());break;case 32:break;case 13:focusDate=this.focusDate||this.dates.get(-1)||this.viewDate,this._toggle_multidate(focusDate),dateChanged=!0,this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.setValue(),this.fill(),this.picker.is(":visible")&&(e.preventDefault(),this.o.autoclose&&this.hide());break;case 9:this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.fill(),this.hide()}if(dateChanged){this.dates.length?this._trigger("changeDate"):this._trigger("clearDate");var element;this.isInput?element=this.element:this.component&&(element=this.element.find("input")),element&&element.change()}},showMode:function(dir){dir&&(this.viewMode=Math.max(this.o.minViewMode,Math.min(2,this.viewMode+dir))),this.picker.find(">div").hide().filter(".datepicker-"+DPGlobal.modes[this.viewMode].clsName).css("display","block"),this.updateNavArrows()}};var DateRangePicker=function(element,options){this.element=$(element),this.inputs=$.map(options.inputs,function(i){return i.jquery?i[0]:i}),delete options.inputs,$(this.inputs).datepicker(options).bind("changeDate",$.proxy(this.dateUpdated,this)),this.pickers=$.map(this.inputs,function(i){return $(i).data("datepicker")}),this.updateDates()};DateRangePicker.prototype={updateDates:function(){this.dates=$.map(this.pickers,function(i){return i.getUTCDate()}),this.updateRanges()},updateRanges:function(){var range=$.map(this.dates,function(d){return d.valueOf()});$.each(this.pickers,function(i,p){p.setRange(range)})},dateUpdated:function(e){if(!this.updating){this.updating=!0;var dp=$(e.target).data("datepicker"),new_date=dp.getUTCDate(),i=$.inArray(e.target,this.inputs),l=this.inputs.length;if(i!==-1){if($.each(this.pickers,function(i,p){p.getUTCDate()||p.setUTCDate(new_date)}),new_date<this.dates[i])for(;i>=0&&new_date<this.dates[i];)this.pickers[i--].setUTCDate(new_date);else if(new_date>this.dates[i])for(;i<l&&new_date>this.dates[i];)this.pickers[i++].setUTCDate(new_date);this.updateDates(),delete this.updating}}},remove:function(){$.map(this.pickers,function(p){p.remove()}),delete this.element.data().datepicker}};var old=$.fn.datepicker;$.fn.datepicker=function(option){var args=Array.apply(null,arguments);args.shift();var internal_return;return this.each(function(){var $this=$(this),data=$this.data("datepicker"),options="object"==typeof option&&option;if(!data){var elopts=opts_from_el(this,"date"),xopts=$.extend({},defaults,elopts,options),locopts=opts_from_locale(xopts.language),opts=$.extend({},defaults,locopts,elopts,options);if($this.is(".input-daterange")||opts.inputs){var ropts={inputs:opts.inputs||$this.find("input").toArray()};$this.data("datepicker",data=new DateRangePicker(this,$.extend(opts,ropts)))}else $this.data("datepicker",data=new Datepicker(this,opts))}if("string"==typeof option&&"function"==typeof data[option]&&(internal_return=data[option].apply(data,args),internal_return!==undefined))return!1}),internal_return!==undefined?internal_return:this};var defaults=$.fn.datepicker.defaults={autoclose:!1,beforeShowDay:$.noop,calendarWeeks:!1,clearBtn:!1,daysOfWeekDisabled:[],endDate:1/0,forceParse:!0,format:"mm/dd/yyyy",keyboardNavigation:!0,language:"en",minViewMode:0,multidate:!1,multidateSeparator:",",orientation:"auto",rtl:!1,startDate:-(1/0),startView:0,todayBtn:!1,todayHighlight:!1,weekStart:0},locale_opts=$.fn.datepicker.locale_opts=["format","rtl","weekStart"];$.fn.datepicker.Constructor=Datepicker;var dates=$.fn.datepicker.dates={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa","Su"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",clear:"Clear"}},DPGlobal={modes:[{clsName:"days",navFnc:"Month",navStep:1},{clsName:"months",navFnc:"FullYear",navStep:1},{clsName:"years",navFnc:"FullYear",navStep:10}],isLeapYear:function(year){return year%4===0&&year%100!==0||year%400===0},getDaysInMonth:function(year,month){return[31,DPGlobal.isLeapYear(year)?29:28,31,30,31,30,31,31,30,31,30,31][month]},validParts:/dd?|DD?|mm?|MM?|yy(?:yy)?/g,nonpunctuation:/[^ -\/:-@\[\u3400-\u9fff-`{-~\t\n\r]+/g,parseFormat:function(format){var separators=format.replace(this.validParts,"\0").split("\0"),parts=format.match(this.validParts);if(!separators||!separators.length||!parts||0===parts.length)throw new Error("Invalid date format.");return{separators:separators,parts:parts}},parseDate:function(date,format,language){function match_part(){var m=this.slice(0,parts[i].length),p=parts[i].slice(0,m.length);return m===p}if(!date)return undefined;if(date instanceof Date)return date;"string"==typeof format&&(format=DPGlobal.parseFormat(format));var part,dir,i,part_re=/([\-+]\d+)([dmwy])/,parts=date.match(/([\-+]\d+)([dmwy])/g);if(/^[\-+]\d+[dmwy]([\s,]+[\-+]\d+[dmwy])*$/.test(date)){for(date=new Date,i=0;i<parts.length;i++)switch(part=part_re.exec(parts[i]),dir=parseInt(part[1]),part[2]){case"d":date.setUTCDate(date.getUTCDate()+dir);break;case"m":date=Datepicker.prototype.moveMonth.call(Datepicker.prototype,date,dir);break;case"w":date.setUTCDate(date.getUTCDate()+7*dir);break;case"y":date=Datepicker.prototype.moveYear.call(Datepicker.prototype,date,dir)}return UTCDate(date.getUTCFullYear(),date.getUTCMonth(),date.getUTCDate(),0,0,0)}parts=date&&date.match(this.nonpunctuation)||[],date=new Date;var val,filtered,parsed={},setters_order=["yyyy","yy","M","MM","m","mm","d","dd"],setters_map={yyyy:function(d,v){return d.setUTCFullYear(v)},yy:function(d,v){return d.setUTCFullYear(2e3+v)},m:function(d,v){if(isNaN(d))return d;for(v-=1;v<0;)v+=12;for(v%=12,d.setUTCMonth(v);d.getUTCMonth()!==v;)d.setUTCDate(d.getUTCDate()-1);return d},d:function(d,v){return d.setUTCDate(v)}};setters_map.M=setters_map.MM=setters_map.mm=setters_map.m,setters_map.dd=setters_map.d,date=UTCDate(date.getFullYear(),date.getMonth(),date.getDate(),0,0,0);var fparts=format.parts.slice();if(parts.length!==fparts.length&&(fparts=$(fparts).filter(function(i,p){return $.inArray(p,setters_order)!==-1}).toArray()),parts.length===fparts.length){var cnt;for(i=0,cnt=fparts.length;i<cnt;i++){if(val=parseInt(parts[i],10),part=fparts[i],isNaN(val))switch(part){case"MM":filtered=$(dates[language].months).filter(match_part),val=$.inArray(filtered[0],dates[language].months)+1;break;case"M":filtered=$(dates[language].monthsShort).filter(match_part),val=$.inArray(filtered[0],dates[language].monthsShort)+1}parsed[part]=val}var _date,s;for(i=0;i<setters_order.length;i++)s=setters_order[i],s in parsed&&!isNaN(parsed[s])&&(_date=new Date(date),setters_map[s](_date,parsed[s]),isNaN(_date)||(date=_date))}return date},formatDate:function(date,format,language){if(!date)return"";"string"==typeof format&&(format=DPGlobal.parseFormat(format));var val={d:date.getUTCDate(),D:dates[language].daysShort[date.getUTCDay()],DD:dates[language].days[date.getUTCDay()],m:date.getUTCMonth()+1,M:dates[language].monthsShort[date.getUTCMonth()],MM:dates[language].months[date.getUTCMonth()],yy:date.getUTCFullYear().toString().substring(2),yyyy:date.getUTCFullYear()};val.dd=(val.d<10?"0":"")+val.d,val.mm=(val.m<10?"0":"")+val.m,date=[];for(var seps=$.extend([],format.separators),i=0,cnt=format.parts.length;i<=cnt;i++)seps.length&&date.push(seps.shift()),date.push(val[format.parts[i]]);return date.join("")},headTemplate:'<thead><tr><th class="prev">&laquo;</th><th colspan="5" class="datepicker-switch"></th><th class="next">&raquo;</th></tr></thead>',contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>',footTemplate:'<tfoot><tr><th colspan="7" class="today"></th></tr><tr><th colspan="7" class="clear"></th></tr></tfoot>'};DPGlobal.template='<div class="datepicker"><div class="datepicker-days"><table class=" table-condensed">'+DPGlobal.headTemplate+"<tbody></tbody>"+DPGlobal.footTemplate+'</table></div><div class="datepicker-months"><table class="table-condensed">'+DPGlobal.headTemplate+DPGlobal.contTemplate+DPGlobal.footTemplate+'</table></div><div class="datepicker-years"><table class="table-condensed">'+DPGlobal.headTemplate+DPGlobal.contTemplate+DPGlobal.footTemplate+"</table></div></div>",$.fn.datepicker.DPGlobal=DPGlobal,$.fn.datepicker.noConflict=function(){return $.fn.datepicker=old,this},$(document).on("focus.datepicker.data-api click.datepicker.data-api",'[data-provide="datepicker"]',function(e){var $this=$(this);$this.data("datepicker")||(e.preventDefault(),$this.datepicker("show"))}),$(function(){$('[data-provide="datepicker-inline"]').datepicker()})}(window.jQuery),!function($){"use strict";var Tag=function(element,options){this.element=$(element),this.options=$.extend(!0,{},$.fn.tag.defaults,options),this.values=$.grep($.map(this.element.val().split(","),$.trim),function(value){return value.length>0}),this.show()};Tag.prototype={constructor:Tag,show:function(){var that=this,pos=that.element.prev()||that.element.parent();pos.after(that.element.detach().hide()),that.element.wrap($('<div class="tags">')).parent().on("click",function(){that.input.focus()}),that.values.length&&$.each(that.values,function(){that.createBadge(this)}),that.input=$('<input type="text">').attr("placeholder",that.options.placeholder).insertAfter(that.element).on("focus",function(){that.element.parent().addClass("tags-hover")}).on("blur",function(){that.skip||(that.process(),that.element.parent().removeClass("tags-hover"),that.element.siblings(".tag").removeClass("tag-important")),that.skip=!1}).on("keydown",function(event){if(188==event.keyCode||13==event.keyCode||9==event.keyCode)!$.trim($(this).val())||that.element.siblings(".typeahead").length&&!that.element.siblings(".typeahead").is(":hidden")?188==event.keyCode&&(!that.element.siblings(".typeahead").length||that.element.siblings(".typeahead").is(":hidden")?event.preventDefault():(that.input.data("typeahead").select(),event.stopPropagation(),event.preventDefault())):(9!=event.keyCode&&event.preventDefault(),that.process());else if($.trim($(this).val())||8!=event.keyCode)that.element.siblings(".tag").removeClass("tag-important");else{var count=that.element.siblings(".tag").length;if(count){var tag=that.element.siblings(".tag:eq("+(count-1)+")");tag.hasClass("tag-important")?that.remove(count-1):tag.addClass("tag-important")}}}).typeahead({source:that.options.source,matcher:function(value){return~value.toLowerCase().indexOf(this.query.toLowerCase())&&(that.inValues(value)==-1||that.options.allowDuplicates)},updater:$.proxy(that.add,that)}),$(that.input.data("typeahead").$menu).on("mousedown",function(){that.skip=!0}),this.element.trigger("shown")},inValues:function(value){if(this.options.caseInsensitive){var index=-1;return $.each(this.values,function(indexInArray,valueOfElement){if(valueOfElement.toLowerCase()==value.toLowerCase())return index=indexInArray,!1}),index}return $.inArray(value,this.values)},createBadge:function(value){var that=this;$("<span/>",{"class":"tag"}).text(value.toString()).append($('<button type="button" class="close">&times;</button>').on("click",function(){that.remove(that.element.siblings(".tag").index($(this).closest(".tag")))})).insertBefore(that.element)},add:function(value){var that=this;if(!that.options.allowDuplicates){var index=that.inValues(value);if(index!=-1){var badge=that.element.siblings(".tag:eq("+index+")");return badge.addClass("tag-warning"),void setTimeout(function(){$(badge).removeClass("tag-warning")},500)}}this.values.push(value),this.createBadge(value),this.element.val(this.values.join(", ")),this.element.trigger("added",[value])},remove:function(index){if(index>=0){var value=this.values.splice(index,1);this.element.siblings(".tag:eq("+index+")").remove(),this.element.val(this.values.join(", ")),this.element.trigger("removed",[value])}},process:function(){var values=$.grep($.map(this.input.val().split(","),$.trim),function(value){return value.length>0}),that=this;$.each(values,function(){that.add(this)}),this.input.val("")},skip:!1};var old=$.fn.tag;$.fn.tag=function(option){return this.each(function(){var that=$(this),data=that.data("tag"),options="object"==typeof option&&option;data||that.data("tag",data=new Tag(this,options)),"string"==typeof option&&data[option]()})},$.fn.tag.defaults={allowDuplicates:!1,caseInsensitive:!0,placeholder:"",source:[]},$.fn.tag.Constructor=Tag,$.fn.tag.noConflict=function(){return $.fn.tag=old,this},$(window).on("load",function(){$('[data-provide="tag"]').each(function(){var that=$(this);that.data("tag")||that.tag(that.data())})})}(window.jQuery);var instantClick,InstantClick=instantClick=function(document,location,$userAgent){function removeHash(url){var index=url.indexOf("#");return index<0?url:url.substr(0,index)}function getLinkTarget(target){for(;target&&"A"!=target.nodeName;)target=target.parentNode;return target}function isBlacklisted(elem){do{if(!elem.hasAttribute)break;if(elem.hasAttribute("data-instant"))return!1;if(elem.hasAttribute("data-no-instant"))return!0}while(elem=elem.parentNode);return!1}function isPreloadable(a){var domain=location.protocol+"//"+location.host;return!(a.target||a.hasAttribute("download")||0!=a.href.indexOf(domain+"/")||a.href.indexOf("#")>-1&&removeHash(a.href)==$currentLocationWithoutHash||isBlacklisted(a))}function triggerPageEvent(eventType,arg1,arg2,arg3){for(var returnValue=!1,i=0;i<$eventsCallbacks[eventType].length;i++)if("receive"==eventType){var altered=$eventsCallbacks[eventType][i](arg1,arg2,arg3);altered&&("body"in altered&&(arg2=altered.body),"title"in altered&&(arg3=altered.title),returnValue=altered)}else $eventsCallbacks[eventType][i](arg1,arg2,arg3);return returnValue}function changePage(title,body,newUrl,scrollY,pop){if(document.documentElement.replaceChild(body,document.body),newUrl){history.pushState(null,null,newUrl);var hashIndex=newUrl.indexOf("#"),hashElem=hashIndex>-1&&document.getElementById(newUrl.substr(hashIndex+1)),offset=0;if(hashElem)for(;hashElem.offsetParent;)offset+=hashElem.offsetTop,hashElem=hashElem.offsetParent;scrollTo(0,offset),$currentLocationWithoutHash=removeHash(newUrl)}else scrollTo(0,scrollY);$isChromeForIOS&&document.title==title?document.title=title+String.fromCharCode(160):document.title=title,instantanize(),pop?triggerPageEvent("restore"):triggerPageEvent("change",!1)}function setPreloadingAsHalted(){$isPreloading=!1,$isWaitingForCompletion=!1}function removeNoscriptTags(html){return html.replace(/<noscript[\s\S]+?<\/noscript>/gi,"")}function mousedownListener(e){if(!($lastTouchTimestamp>+new Date-500)){var a=getLinkTarget(e.target);a&&isPreloadable(a)&&preload(a.href)}}function mouseoverListener(e){if(!($lastTouchTimestamp>+new Date-500)){var a=getLinkTarget(e.target);a&&isPreloadable(a)&&(a.addEventListener("mouseout",mouseoutListener),$delayBeforePreload?($urlToPreload=a.href,$preloadTimer=setTimeout(preload,$delayBeforePreload)):preload(a.href))}}function touchstartListener(e){$lastTouchTimestamp=+new Date;var a=getLinkTarget(e.target);a&&isPreloadable(a)&&($preloadOnMousedown?a.removeEventListener("mousedown",mousedownListener):a.removeEventListener("mouseover",mouseoverListener),preload(a.href))}function clickListener(e){var a=getLinkTarget(e.target);a&&isPreloadable(a)&&(e.which>1||e.metaKey||e.ctrlKey||(e.preventDefault(),display(a.href)))}function mouseoutListener(){return $preloadTimer?(clearTimeout($preloadTimer),void($preloadTimer=!1)):void($isPreloading&&!$isWaitingForCompletion&&($xhr.abort(),setPreloadingAsHalted()))}function readystatechangeListener(){if(!($xhr.readyState<4)&&0!=$xhr.status){if($timing.ready=+new Date-$timing.start,$xhr.getResponseHeader("Content-Type").match(/\/(x|ht|xht)ml/)){var doc=document.implementation.createHTMLDocument("");doc.documentElement.innerHTML=removeNoscriptTags($xhr.responseText),$title=doc.title,$body=doc.body;var alteredOnReceive=triggerPageEvent("receive",$url,$body,$title);alteredOnReceive&&("body"in alteredOnReceive&&($body=alteredOnReceive.body),"title"in alteredOnReceive&&($title=alteredOnReceive.title));var urlWithoutHash=removeHash($url);$history[urlWithoutHash]={body:$body,title:$title,scrollY:urlWithoutHash in $history?$history[urlWithoutHash].scrollY:0};for(var elem,data,elems=doc.head.children,found=0,i=0;i<elems.length;i++)if(elem=elems[i],elem.hasAttribute("data-instant-track")){data=elem.getAttribute("href")||elem.getAttribute("src")||elem.innerHTML;for(var j=0;j<$trackedAssets.length;j++)$trackedAssets[j]==data&&found++}found!=$trackedAssets.length&&($mustRedirect=!0)}else $mustRedirect=!0;$isWaitingForCompletion&&($isWaitingForCompletion=!1,display($url))}}function popstateListener(){var loc=removeHash(location.href);if(loc!=$currentLocationWithoutHash){if(!(loc in $history))return void(location.href=location.href);$history[$currentLocationWithoutHash].scrollY=pageYOffset,$currentLocationWithoutHash=loc,changePage($history[loc].title,$history[loc].body,!1,$history[loc].scrollY,!0)}}function instantanize(isInitializing){if(document.body.addEventListener("touchstart",touchstartListener,!0),$preloadOnMousedown?document.body.addEventListener("mousedown",mousedownListener,!0):document.body.addEventListener("mouseover",mouseoverListener,!0),document.body.addEventListener("click",clickListener,!0),!isInitializing)for(var script,copy,parentNode,nextSibling,scripts=document.body.getElementsByTagName("script"),i=0,j=scripts.length;i<j;i++)script=scripts[i],script.hasAttribute("data-no-instant")||(copy=document.createElement("script"),script.src&&(copy.src=script.src),script.innerHTML&&(copy.innerHTML=script.innerHTML),parentNode=script.parentNode,nextSibling=script.nextSibling,parentNode.removeChild(script),parentNode.insertBefore(copy,nextSibling))}function preload(url){!$preloadOnMousedown&&"display"in $timing&&+new Date-($timing.start+$timing.display)<100||($preloadTimer&&(clearTimeout($preloadTimer),$preloadTimer=!1),url||(url=$urlToPreload),$isPreloading&&(url==$url||$isWaitingForCompletion)||($isPreloading=!0,$isWaitingForCompletion=!1,$url=url,$body=!1,$mustRedirect=!1,$timing={start:+new Date},triggerPageEvent("fetch"),$xhr.open("GET",url),$xhr.send()))}function display(url){return"display"in $timing||($timing.display=+new Date-$timing.start),$preloadTimer||!$isPreloading?$preloadTimer&&$url&&$url!=url?void(location.href=url):(preload(url),triggerPageEvent("wait"),void($isWaitingForCompletion=!0)):$isWaitingForCompletion?void(location.href=url):$mustRedirect?void(location.href=$url):$body?($history[$currentLocationWithoutHash].scrollY=pageYOffset,setPreloadingAsHalted(),void changePage($title,$body,$url)):(triggerPageEvent("wait"),void($isWaitingForCompletion=!0))}function init(preloadingMode){if(!$currentLocationWithoutHash){if(!supported)return void triggerPageEvent("change",!0);"mousedown"==preloadingMode?$preloadOnMousedown=!0:"number"==typeof preloadingMode&&($delayBeforePreload=preloadingMode),$currentLocationWithoutHash=removeHash(location.href),$history[$currentLocationWithoutHash]={body:document.body,title:document.title,scrollY:pageYOffset};for(var elem,data,elems=document.head.children,i=0;i<elems.length;i++)elem=elems[i],elem.hasAttribute("data-instant-track")&&(data=elem.getAttribute("href")||elem.getAttribute("src")||elem.innerHTML,$trackedAssets.push(data));$xhr=new XMLHttpRequest,$xhr.addEventListener("readystatechange",readystatechangeListener),instantanize(!0),triggerPageEvent("change",!0),addEventListener("popstate",popstateListener)}}function on(eventType,callback){$eventsCallbacks[eventType].push(callback)}function manualPageChange(new_url){$currentLocationWithoutHash=new_url,$history[$currentLocationWithoutHash]={scrollY:pageYOffset}}var $currentLocationWithoutHash,$urlToPreload,$preloadTimer,$lastTouchTimestamp,$xhr,$preloadOnMousedown,$delayBeforePreload,$isChromeForIOS=$userAgent.indexOf(" CriOS/")>-1,$history={},$url=!1,$title=!1,$mustRedirect=!1,$body=!1,$timing={},$isPreloading=!1,$isWaitingForCompletion=!1,$trackedAssets=[],$eventsCallbacks={fetch:[],receive:[],wait:[],change:[],restore:[]},supported="pushState"in history&&(!$userAgent.match("Android")||$userAgent.match("Chrome/"))&&"file:"!=location.protocol;return{supported:supported,init:init,on:on,instantanize:instantanize,manualPageChange:manualPageChange}}(document,location,navigator.userAgent);!function($){function height_adjustment(){var standalone=window.navigator.standalone,userAgent=window.navigator.userAgent.toLowerCase(),safari=/safari/.test(userAgent),ios=/iphone|ipod|ipad/.test(userAgent);return ios&&safari&&!standalone?60:0}$.fn.appear=function(fn,options){var settings=$.extend({data:void 0,one:!0},options);return this.each(function(){var t=$(this);if(t.appeared=!1,!fn)return void t.trigger("appear",settings.data);var w=$(window),check=function(){if(!t.is(":visible"))return void(t.appeared=!1);var a=w.scrollLeft(),b=w.scrollTop(),o=t.offset(),x=o.left,y=o.top,h=w.height()+height_adjustment();y+t.height()>=b&&y<=b+h&&x+t.width()>=a&&x<=a+w.width()?t.appeared||t.trigger("appear",settings.data):t.appeared=!1},modifiedFn=function(){if(t.appeared=!0,settings.one){w.unbind("scroll",check);var i=$.inArray(check,$.fn.appear.checks);i>=0&&$.fn.appear.checks.splice(i,1)}fn.apply(this,arguments)};settings.one?t.one("appear",settings.data,modifiedFn):t.bind("appear",settings.data,modifiedFn),w.scroll(check),$.fn.appear.checks.push(check),check()})},$.extend($.fn.appear,{checks:[],timeout:null,checkAll:function(){var length=$.fn.appear.checks.length;if(length>0)for(;length--;)$.fn.appear.checks[length]()},run:function(){$.fn.appear.timeout&&clearTimeout($.fn.appear.timeout),$.fn.appear.timeout=setTimeout($.fn.appear.checkAll,20)}}),$.each(["append","prepend","after","before","attr","removeAttr","addClass","removeClass","toggleClass","remove","css","show","hide"],function(i,n){var old=$.fn[n];old&&($.fn[n]=function(){var r=old.apply(this,arguments);return $.fn.appear.run(),r})})}(jQuery),function(factory){"use strict";"function"==typeof define&&define.amd?define(["jquery"],factory):factory(jQuery)}(function($){"use strict";function parseDateString(dateString){if(dateString instanceof Date)return dateString;if(String(dateString).match(matchers))return String(dateString).match(/^[0-9]*$/)&&(dateString=Number(dateString)),String(dateString).match(/\-/)&&(dateString=String(dateString).replace(/\-/g,"/")),new Date(dateString);throw new Error("Couldn't cast `"+dateString+"` to a date object.")}function escapedRegExp(str){var sanitize=str.toString().replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1");return new RegExp(sanitize)}function strftime(offsetObject){return function(format){var directives=format.match(/%(-|!)?[A-Z]{1}(:[^;]+;)?/gi);if(directives)for(var i=0,len=directives.length;i<len;++i){var directive=directives[i].match(/%(-|!)?([a-zA-Z]{1})(:[^;]+;)?/),regexp=escapedRegExp(directive[0]),modifier=directive[1]||"",plural=directive[3]||"",value=null;directive=directive[2],DIRECTIVE_KEY_MAP.hasOwnProperty(directive)&&(value=DIRECTIVE_KEY_MAP[directive],value=Number(offsetObject[value])),null!==value&&("!"===modifier&&(value=pluralize(plural,value)),""===modifier&&value<10&&(value="0"+value.toString()),format=format.replace(regexp,value.toString()))}return format=format.replace(/%%/,"%")}}function pluralize(format,count){var plural="s",singular="";return format&&(format=format.replace(/(:|;|\s)/gi,"").split(/\,/),1===format.length?plural=format[0]:(singular=format[0],plural=format[1])),1===Math.abs(count)?singular:plural}var instances=[],matchers=[],defaultOptions={precision:100,elapse:!1};matchers.push(/^[0-9]*$/.source),matchers.push(/([0-9]{1,2}\/){2}[0-9]{4}( [0-9]{1,2}(:[0-9]{2}){2})?/.source),matchers.push(/[0-9]{4}([\/\-][0-9]{1,2}){2}( [0-9]{1,2}(:[0-9]{2}){2})?/.source),matchers=new RegExp(matchers.join("|"));var DIRECTIVE_KEY_MAP={Y:"years",m:"months",n:"daysToMonth",w:"weeks",d:"daysToWeek",D:"totalDays",H:"hours",M:"minutes",S:"seconds"},Countdown=function(el,finalDate,options){this.el=el,this.$el=$(el),this.interval=null,this.offset={},this.options=$.extend({},defaultOptions),this.instanceNumber=instances.length,instances.push(this),this.$el.data("countdown-instance",this.instanceNumber),options&&("function"==typeof options?(this.$el.on("update.countdown",options),this.$el.on("stoped.countdown",options),this.$el.on("finish.countdown",options)):this.options=$.extend({},defaultOptions,options)),this.setFinalDate(finalDate),this.start()};$.extend(Countdown.prototype,{start:function(){null!==this.interval&&clearInterval(this.interval);var self=this;this.update(),this.interval=setInterval(function(){self.update.call(self)},this.options.precision)},stop:function(){clearInterval(this.interval),this.interval=null,this.dispatchEvent("stoped")},toggle:function(){this.interval?this.stop():this.start()},pause:function(){this.stop()},resume:function(){this.start()},remove:function(){this.stop.call(this),instances[this.instanceNumber]=null,delete this.$el.data().countdownInstance},setFinalDate:function(value){this.finalDate=parseDateString(value)},update:function(){if(0===this.$el.closest("html").length)return void this.remove();var newTotalSecsLeft,hasEventsAttached=void 0!==$._data(this.el,"events"),now=new Date;newTotalSecsLeft=this.finalDate.getTime()-now.getTime(),newTotalSecsLeft=Math.ceil(newTotalSecsLeft/1e3),newTotalSecsLeft=!this.options.elapse&&newTotalSecsLeft<0?0:Math.abs(newTotalSecsLeft),this.totalSecsLeft!==newTotalSecsLeft&&hasEventsAttached&&(this.totalSecsLeft=newTotalSecsLeft,this.elapsed=now>=this.finalDate,this.offset={seconds:this.totalSecsLeft%60,minutes:Math.floor(this.totalSecsLeft/60)%60,hours:Math.floor(this.totalSecsLeft/60/60)%24,days:Math.floor(this.totalSecsLeft/60/60/24)%7,daysToWeek:Math.floor(this.totalSecsLeft/60/60/24)%7,daysToMonth:Math.floor(this.totalSecsLeft/60/60/24%30.4368),totalDays:Math.floor(this.totalSecsLeft/60/60/24),weeks:Math.floor(this.totalSecsLeft/60/60/24/7),months:Math.floor(this.totalSecsLeft/60/60/24/30.4368),years:Math.abs(this.finalDate.getFullYear()-now.getFullYear())},this.options.elapse||0!==this.totalSecsLeft?this.dispatchEvent("update"):(this.stop(),this.dispatchEvent("finish")))},dispatchEvent:function(eventName){var event=$.Event(eventName+".countdown");event.finalDate=this.finalDate,event.elapsed=this.elapsed,event.offset=$.extend({},this.offset),event.strftime=strftime(this.offset),this.$el.trigger(event)}}),$.fn.countdown=function(){var argumentsArray=Array.prototype.slice.call(arguments,0);return this.each(function(){var instanceNumber=$(this).data("countdown-instance");if(void 0!==instanceNumber){var instance=instances[instanceNumber],method=argumentsArray[0];Countdown.prototype.hasOwnProperty(method)?instance[method].apply(instance,argumentsArray.slice(1)):null===String(method).match(/^[$A-Z_][0-9A-Z_$]*$/i)?(instance.setFinalDate.call(instance,method),instance.start()):$.error("Method %s does not exist on jQuery.countdown".replace(/\%s/gi,method))}else new Countdown(this,argumentsArray[0],argumentsArray[1])})}}),function(){var $,cardFromNumber,cardFromType,cards,defaultFormat,formatBackCardNumber,formatBackExpiry,formatCardNumber,formatExpiry,formatForwardSlash,hasTextSelected,luhnCheck,oninput,reFormatCardNumber,restrictCVC,restrictCardNumber,restrictExpiry,restrictNumeric,setCardType,__slice=[].slice,__indexOf=[].indexOf||function(item){for(var i=0,l=this.length;i<l;i++)if(i in this&&this[i]===item)return i;return-1};$=jQuery,$.payment={},$.payment.fn={},$.fn.payment=function(){var args,method;return method=arguments[0],args=2<=arguments.length?__slice.call(arguments,1):[],$.payment.fn[method].apply(this,args)},defaultFormat=/(\d{1,4})/g,cards=[{type:"maestro",pattern:/^(5018|5020|5038|6304|6759|676[1-3])/,format:defaultFormat,length:[12,13,14,15,16,17,18,19],cvcLength:[3],luhn:!0},{type:"dinersclub",pattern:/^(36|38|30[0-5])/,format:defaultFormat,length:[14],cvcLength:[3],luhn:!0},{type:"laser",pattern:/^(6706|6771|6709)/,format:defaultFormat,length:[16,17,18,19],cvcLength:[3],luhn:!0},{type:"jcb",pattern:/^35/,format:defaultFormat,length:[16],cvcLength:[3],luhn:!0},{type:"unionpay",pattern:/^62/,format:defaultFormat,length:[16,17,18,19],cvcLength:[3],luhn:!1},{type:"discover",pattern:/^(6011|65|64[4-9]|622)/,format:defaultFormat,length:[16],cvcLength:[3],luhn:!0},{type:"mastercard",pattern:/^5[1-5]/,format:defaultFormat,length:[16],cvcLength:[3],luhn:!0},{type:"amex",pattern:/^3[47]/,format:/(\d{1,4})(\d{1,6})?(\d{1,5})?/,length:[15],cvcLength:[3,4],luhn:!0},{type:"visa",pattern:/^4/,format:defaultFormat,length:[13,16],cvcLength:[3],luhn:!0}],oninput="keypress","oninput"in document.createElement("input")&&(oninput="input"),cardFromNumber=function(num){var card,_i,_len;for(num=(num+"").replace(/\D/g,""),_i=0,_len=cards.length;_i<_len;_i++)if(card=cards[_i],card.pattern.test(num))return card},cardFromType=function(type){var card,_i,_len;for(_i=0,_len=cards.length;_i<_len;_i++)if(card=cards[_i],card.type===type)return card},luhnCheck=function(num){var digit,digits,odd,sum,_i,_len;for(odd=!0,sum=0,digits=(num+"").split("").reverse(),_i=0,_len=digits.length;_i<_len;_i++)digit=digits[_i],digit=parseInt(digit,10),(odd=!odd)&&(digit*=2),digit>9&&(digit-=9),sum+=digit;return sum%10===0},hasTextSelected=function($target){var _ref;return null!=$target.prop("selectionStart")&&$target.prop("selectionStart")!==$target.prop("selectionEnd")||!("undefined"==typeof document||null===document||null==(_ref=document.selection)||"function"!=typeof _ref.createRange||!_ref.createRange().text)},reFormatCardNumber=function(e){return setTimeout(function(_this){return function(){var $target,value;return $target=$(e.currentTarget),value=$target.val(),value=$.payment.formatCardNumber(value),$target.val(value)}}(this))},formatCardNumber=function(e){var $target,card,digit,length,re,upperLength,value;if(digit=String.fromCharCode(e.which),/^\d+$/.test(digit)&&($target=$(e.currentTarget),value=$target.val(),card=cardFromNumber(value+digit),length=(value.replace(/\D/g,"")+digit).length,upperLength=16,card&&(upperLength=card.length[card.length.length-1]),
!(length>=upperLength||null!=$target.prop("selectionStart")&&$target.prop("selectionStart")!==value.length)))return re=card&&"amex"===card.type?/^(\d{4}|\d{4}\s\d{6})$/:/(?:^|\s)(\d{4})$/,re.test(value)?(e.preventDefault(),$target.val(value+" "+digit)):re.test(value+digit)?(e.preventDefault(),$target.val(value+digit+" ")):void 0},formatBackCardNumber=function(e){var $target,value;if($target=$(e.currentTarget),value=$target.val(),!e.meta&&8===e.which&&(null==$target.prop("selectionStart")||$target.prop("selectionStart")===value.length))return/\d\s$/.test(value)?(e.preventDefault(),$target.val(value.replace(/\d\s$/,""))):/\s\d?$/.test(value)?(e.preventDefault(),$target.val(value.replace(/\s\d?$/,""))):void 0},formatExpiry=function(e){var $target,digit,val;if($target=$(e.currentTarget),val=$target.val(),e.which){if(digit=String.fromCharCode(e.which),!/^\d+$/.test(digit))return;val+=digit}return/^\d$/.test(val)&&"0"!==val&&"1"!==val?(e.preventDefault(),$target.val("0"+val+" / ")):/^\d{2}$/.test(val)?(e.preventDefault(),$target.val(""+val+" / ")):/^\d{3}$/.test(val)?(e.preventDefault(),$target.val(""+val.slice(0,2)+" / "+val.slice(2,3))):void 0},formatForwardSlash=function(e){var $target,slash,val;if(slash=String.fromCharCode(e.which),"/"===slash)return $target=$(e.currentTarget),val=$target.val(),/^\d$/.test(val)&&"0"!==val?$target.val("0"+val+" / "):void 0},formatBackExpiry=function(e){var $target,value;if(!e.meta&&($target=$(e.currentTarget),value=$target.val(),8===e.which&&(null==$target.prop("selectionStart")||$target.prop("selectionStart")===value.length)))return/\d(\s|\/)+$/.test(value)?(e.preventDefault(),$target.val(value.replace(/\d(\s|\/)*$/,""))):/\s\/\s?\d?$/.test(value)?(e.preventDefault(),$target.val(value.replace(/\s\/\s?\d?$/,""))):void 0},restrictNumeric=function(e){var input;return!(!e.metaKey&&!e.ctrlKey)||32!==e.which&&(0===e.which||(e.which<33||(input=String.fromCharCode(e.which),!!/[\d\s]/.test(input))))},restrictCardNumber=function(e){var $target,card,digit,value;if($target=$(e.currentTarget),digit=String.fromCharCode(e.which),/^\d+$/.test(digit)&&!hasTextSelected($target))return value=($target.val()+digit).replace(/\D/g,""),card=cardFromNumber(value),card?value.length<=card.length[card.length.length-1]:value.length<=16},restrictExpiry=function(e){var $target,digit,value;if($target=$(e.currentTarget),digit=String.fromCharCode(e.which),/^\d+$/.test(digit)&&!hasTextSelected($target))return value=$target.val()+digit,value=value.replace(/\D/g,""),!(value.length>6)&&void 0},restrictCVC=function(e){var $target,digit,val;if($target=$(e.currentTarget),digit=String.fromCharCode(e.which),/^\d+$/.test(digit)&&!hasTextSelected($target))return val=$target.val()+digit,val.length<=4},setCardType=function(e){var $target,allTypes,card,cardType,val;if($target=$(e.currentTarget),val=$target.val(),cardType=$.payment.cardType(val)||"unknown",!$target.hasClass(cardType))return allTypes=function(){var _i,_len,_results;for(_results=[],_i=0,_len=cards.length;_i<_len;_i++)card=cards[_i],_results.push(card.type);return _results}(),$target.removeClass("unknown"),$target.removeClass(allTypes.join(" ")),$target.addClass(cardType),$target.toggleClass("identified","unknown"!==cardType),$target.trigger("payment.cardType",cardType)},$.payment.fn.formatCardCVC=function(){return this.payment("restrictNumeric"),this.on("keypress",restrictCVC),this},$.payment.fn.formatCardExpiry=function(){return this.payment("restrictNumeric"),this.on("keypress",restrictExpiry),this.on(oninput,formatExpiry),this.on("keypress",formatForwardSlash),this.on("keydown",formatBackExpiry),this},$.payment.fn.formatCardNumber=function(){return this.payment("restrictNumeric"),this.on("keypress",restrictCardNumber),this.on("keypress",formatCardNumber),this.on("keydown",formatBackCardNumber),this.on("keyup",setCardType),this.on("paste",reFormatCardNumber),this},$.payment.fn.restrictNumeric=function(){return this.on("keypress",restrictNumeric),this},$.payment.fn.cardExpiryVal=function(){return $.payment.cardExpiryVal($(this).val())},$.payment.cardExpiryVal=function(value){var month,prefix,year,_ref;return value=value.replace(/\s/g,""),_ref=value.split("/",2),month=_ref[0],year=_ref[1],2===(null!=year?year.length:void 0)&&/^\d+$/.test(year)&&(prefix=(new Date).getFullYear(),prefix=prefix.toString().slice(0,2),year=prefix+year),month=parseInt(month,10),year=parseInt(year,10),{month:month,year:year}},$.payment.validateCardNumber=function(num){var card,_ref;return num=(num+"").replace(/\s+|-/g,""),!!/^\d+$/.test(num)&&(card=cardFromNumber(num),!!card&&(_ref=num.length,__indexOf.call(card.length,_ref)>=0&&(card.luhn===!1||luhnCheck(num))))},$.payment.validateCardExpiry=function(_this){return function(month,year){var currentTime,expiry,prefix,_ref;return"object"==typeof month&&"month"in month&&(_ref=month,month=_ref.month,year=_ref.year),!(!month||!year)&&(month=$.trim(month),year=$.trim(year),!!/^\d+$/.test(month)&&(!!/^\d+$/.test(year)&&(parseInt(month,10)<=12&&(2===year.length&&(prefix=(new Date).getFullYear(),prefix=prefix.toString().slice(0,2),year=prefix+year),expiry=new Date(year,month),currentTime=new Date,expiry.setMonth(expiry.getMonth()-1),expiry.setMonth(expiry.getMonth()+1,1),expiry>currentTime))))}}(this),$.payment.validateCardCVC=function(cvc,type){var _ref,_ref1;return cvc=$.trim(cvc),!!/^\d+$/.test(cvc)&&(type?(_ref=cvc.length,__indexOf.call(null!=(_ref1=cardFromType(type))?_ref1.cvcLength:void 0,_ref)>=0):cvc.length>=3&&cvc.length<=4)},$.payment.cardType=function(num){var _ref;return num?(null!=(_ref=cardFromNumber(num))?_ref.type:void 0)||null:null},$.payment.formatCardNumber=function(num){var card,groups,upperLength,_ref;return(card=cardFromNumber(num))?(upperLength=card.length[card.length.length-1],num=num.replace(/\D/g,""),num=num.slice(0,+upperLength+1||9e9),card.format.global?null!=(_ref=num.match(card.format))?_ref.join(" "):void 0:(groups=card.format.exec(num),null!=groups&&groups.shift(),null!=groups?groups.join(" "):void 0)):num}}.call(this),function(window,document,$){function args(elem){var newAttrs={},rinlinejQuery=/^jQuery\d+$/;return $.each(elem.attributes,function(i,attr){attr.specified&&!rinlinejQuery.test(attr.name)&&(newAttrs[attr.name]=attr.value)}),newAttrs}function clearPlaceholder(event,value){var input=this,$input=$(input);if(input.value==$input.attr("placeholder")&&$input.hasClass("placeholder"))if($input.data("placeholder-password")){if($input=$input.hide().next().show().attr("id",$input.removeAttr("id").data("placeholder-id")),event===!0)return $input[0].value=value;$input.focus()}else input.value="",$input.removeClass("placeholder"),input==document.activeElement&&input.select()}function setPlaceholder(){var $replacement,input=this,$input=$(input),id=this.id;if(""==input.value){if("password"==input.type){if(!$input.data("placeholder-textinput")){try{$replacement=$input.clone().attr({type:"text"})}catch(e){$replacement=$("<input>").attr($.extend(args(this),{type:"text"}))}$replacement.removeAttr("name").data({"placeholder-password":!0,"placeholder-id":id}).bind("focus.placeholder",clearPlaceholder),$input.data({"placeholder-textinput":$replacement,"placeholder-id":id}).before($replacement)}$input=$input.removeAttr("id").hide().prev().attr("id",id).show()}$input.addClass("placeholder"),$input[0].value=$input.attr("placeholder")}else $input.removeClass("placeholder")}var hooks,placeholder,isInputSupported="placeholder"in document.createElement("input"),isTextareaSupported="placeholder"in document.createElement("textarea"),prototype=$.fn,valHooks=$.valHooks;isInputSupported&&isTextareaSupported?(placeholder=prototype.placeholder=function(){return this},placeholder.input=placeholder.textarea=!0):(placeholder=prototype.placeholder=function(){var $this=this;return $this.filter((isInputSupported?"textarea":":input")+"[placeholder]").not(".placeholder").bind({"focus.placeholder":clearPlaceholder,"blur.placeholder":setPlaceholder}).data("placeholder-enabled",!0).trigger("blur.placeholder"),$this},placeholder.input=isInputSupported,placeholder.textarea=isTextareaSupported,hooks={get:function(element){var $element=$(element);return $element.data("placeholder-enabled")&&$element.hasClass("placeholder")?"":element.value},set:function(element,value){var $element=$(element);return $element.data("placeholder-enabled")?(""==value?(element.value=value,element!=document.activeElement&&setPlaceholder.call(element)):$element.hasClass("placeholder")?clearPlaceholder.call(element,!0,value)||(element.value=value):element.value=value,$element):element.value=value}},isInputSupported||(valHooks.input=hooks),isTextareaSupported||(valHooks.textarea=hooks),$(function(){$(document).delegate("form","submit.placeholder",function(){var $inputs=$(".placeholder",this).each(clearPlaceholder);setTimeout(function(){$inputs.each(setPlaceholder)},10)})}),$(window).bind("beforeunload.placeholder",function(){$(".placeholder").each(function(){this.value=""})}))}(this,document,jQuery),$(document).ready(function(){$("input, textarea").placeholder()}),function($){"use strict";var defaults={api_key:"",output_fields:{line_1:"#line_1",line_2:"#line_2",line_3:"#line_3",post_town:"#post_town",postcode:"#postcode",postcode_inward:void 0,postcode_outward:void 0,udprn:void 0,dependant_locality:void 0,double_dependant_locality:void 0,thoroughfare:void 0,dependant_thoroughfare:void 0,building_number:void 0,building_name:void 0,sub_building_name:void 0,po_box:void 0,department_name:void 0,organisation_name:void 0,postcode_type:void 0,su_organisation_indicator:void 0,delivery_point_suffix:void 0},api_endpoint:"https://api.ideal-postcodes.co.uk/v1",$input:void 0,input_label:"Please enter your postcode",input_muted_style:"color:#CBCBCB;",input_class:"",input_id:"idpc_input",$button:void 0,button_id:"idpc_button",button_label:"Find my Address",button_class:"",$dropdown:void 0,dropdown_id:"idpc_dropdown",dropdown_select_message:"Please select your address",dropdown_class:"",$error_message:void 0,error_message_id:"idpc_error_message",error_message_invalid_postcode:"Please check your postcode, it seems to be incorrect",error_message_not_found:"Your postcode could not be found. Please type in your address",error_message_default:"Sorry, we weren't able to get the address you were looking for. Please type your address manually",error_message_class:"",last_lookup:"",disable_interval:1e3,debug_mode:!1,onLookupSuccess:void 0,onLookupError:void 0,onAddressSelected:void 0},Idpc={init:function(options){$.extend(Idpc,defaults),options&&$.extend(Idpc,options),Idpc.rig_output_fields()},rig_output_fields:function(){var $output_fields={};for(var key in Idpc.output_fields)void 0!==Idpc.output_fields[key]&&($output_fields[key]=$(Idpc.output_fields[key]));Idpc.output_fields=$output_fields},setupPostcodeInput:function(context,options){Idpc.$context=context,options&&$.extend(Idpc,options),Idpc.$input=$("<input />",{type:"text",id:Idpc.input_id,value:Idpc.input_label,"class":Idpc.input_class}).val(Idpc.input_label).attr("style",Idpc.input_muted_style).focus(function(){Idpc.$input.removeAttr("style").val("")}).blur(function(){Idpc.$input.val()||(Idpc.$input.val(Idpc.input_label),Idpc.$input.attr("style",Idpc.input_muted_style))}).submit(function(){return!1}).keypress(function(event){13===event.which&&Idpc.$button.trigger("click")}).appendTo(Idpc.$context),Idpc.$button=$("<button />",{html:Idpc.button_label,id:Idpc.button_id,"class":Idpc.button_class}).attr("type","button").attr("onclick","return false;").submit(function(){return!1}).click(function(){var postcode=Idpc.$input.val();return Idpc.last_lookup!==postcode&&(Idpc.last_lookup=postcode,Idpc.disable_lookup_button(),Idpc.clear_existing_fields(),Idpc.lookupPostcode(postcode)),!1}).appendTo(Idpc.$context)},lookupPostcode:function(postcode){if($.idealPostcodes.validatePostcodeFormat(postcode)){var success=function(data){Idpc.handle_api_success(data),Idpc.onLookupSuccess&&Idpc.onLookupSuccess(data)},error=function(){Idpc.show_error("Unable to connect to server"),Idpc.onLookupError&&Idpc.onLookupError()};$.idealPostcodes.lookupPostcode(postcode,Idpc.api_key,success,error)}else Idpc.show_error(Idpc.error_message_invalid_postcode)},disable_lookup_button:function(message){Idpc.$button.prop("disabled",!0).html(message||"Looking up postcode...")},enable_lookup_button:function(){setTimeout(function(){Idpc.$button.prop("disabled",!1).html(Idpc.button_label)},Idpc.disable_interval)},handle_api_success:function(data){Idpc.response_code=data.code,Idpc.response_message=data.message,Idpc.result=data.result,2e3===Idpc.response_code?(Idpc.last_lookup=Idpc.$input.val(),Idpc.show_dropdown(Idpc.result).appendTo(Idpc.$context),Idpc.enable_lookup_button()):Idpc.handle_api_error()},handle_api_error:function(){4040===Idpc.response_code?Idpc.show_error(Idpc.error_message_not_found):Idpc.debug_mode?Idpc.show_error("("+Idpc.response_code+") "+Idpc.response_message):Idpc.show_error(Idpc.error_message_default),Idpc.enable_lookup_button()},clear_existing_fields:function(){Idpc.clear_dropdown_menu(),Idpc.clear_error_messages(),Idpc.clear_input_fields()},clear_dropdown_menu:function(){Idpc.$dropdown&&Idpc.$dropdown.length&&Idpc.$dropdown.remove()},clear_error_messages:function(){Idpc.$error_message&&Idpc.$error_message.length&&Idpc.$error_message.remove()},clear_input_fields:function(){for(var key in Idpc.output_fields)Idpc.output_fields[key].val("")},show_dropdown:function(data){var length=data.length,dropDown=$("<select />",{id:Idpc.dropdown_id,"class":Idpc.dropdown_class});$("<option />",{value:"ideal",text:Idpc.dropdown_select_message}).appendTo(dropDown);for(var i=0;i<length;i+=1)$("<option />",{value:i,text:data[i].line_1+" "+data[i].line_2}).appendTo(dropDown);return Idpc.link_to_fields(dropDown),Idpc.$dropdown=dropDown,dropDown},link_to_fields:function($address_dropdown){var data=Idpc.result;return $address_dropdown.change(function(){var index=$(this).val();index>=0&&(Idpc.populate_output_fields(data[index]),Idpc.onAddressSelected&&Idpc.onAddressSelected.call(this,data[index]))}),$address_dropdown},populate_output_fields:function(result_object){for(var key in Idpc.output_fields)Idpc.output_fields[key].val(result_object[key])},show_error:function(message){Idpc.enable_lookup_button(),Idpc.$error_message=$("<p />",{html:message,id:Idpc.error_message_id,"class":Idpc.error_message_class}).appendTo(Idpc.$context)}};$.idealPostcodes={defaults:function(){return defaults},setup:function(options){Idpc.init(options)},validatePostcodeFormat:function(postcode){return!!postcode.match(/^[a-zA-Z0-9]{1,4}\s?\d[a-zA-Z]{2}$/)},lookupPostcode:function(postcode,api_key,success,error){var endpoint=Idpc.api_endpoint||defaults.api_endpoint,resource="postcodes",url=[endpoint,resource,postcode].join("/"),options={url:url,data:{api_key:api_key},dataType:"jsonp",timeout:5e3,success:success};error&&(options.error=error),$.ajax(options)},clearAll:function(){Idpc.$context=null,Idpc.$input&&Idpc.$input.remove(),Idpc.$button&&Idpc.$button.remove(),Idpc.$dropdown&&Idpc.$dropdown.remove(),Idpc.$error_message&&Idpc.$error_message.remove()}},$.fn.setupPostcodeLookup=function(options){return Idpc.setupPostcodeInput($(this),options),this}}(jQuery);var Hashtable=function(){function hashObject(obj){var hashCode;if("string"==typeof obj)return obj;if(typeof obj.hashCode==FUNCTION)return hashCode=obj.hashCode(),"string"==typeof hashCode?hashCode:hashObject(hashCode);if(typeof obj.toString==FUNCTION)return obj.toString();try{return String(obj)}catch(ex){return Object.prototype.toString.call(obj)}}function equals_fixedValueHasEquals(fixedValue,variableValue){return fixedValue.equals(variableValue)}function equals_fixedValueNoEquals(fixedValue,variableValue){return typeof variableValue.equals==FUNCTION?variableValue.equals(fixedValue):fixedValue===variableValue}function createKeyValCheck(kvStr){return function(kv){if(null===kv)throw new Error("null is not a valid "+kvStr);if("undefined"==typeof kv)throw new Error(kvStr+" must not be undefined")}}function Bucket(hash,firstKey,firstValue,equalityFunction){this[0]=hash,this.entries=[],this.addEntry(firstKey,firstValue),null!==equalityFunction&&(this.getEqualityFunction=function(){return equalityFunction})}function createBucketSearcher(mode){return function(key){for(var entry,i=this.entries.length,equals=this.getEqualityFunction(key);i--;)if(entry=this.entries[i],equals(key,entry[0]))switch(mode){case EXISTENCE:return!0;case ENTRY:return entry;case ENTRY_INDEX_AND_VALUE:return[i,entry[1]]}return!1}}function createBucketLister(entryProperty){return function(aggregatedArr){for(var startIndex=aggregatedArr.length,i=0,len=this.entries.length;i<len;++i)aggregatedArr[startIndex+i]=this.entries[i][entryProperty]}}function searchBuckets(buckets,hash){for(var bucket,i=buckets.length;i--;)if(bucket=buckets[i],hash===bucket[0])return i;return null}function getBucketForHash(bucketsByHash,hash){var bucket=bucketsByHash[hash];return bucket&&bucket instanceof Bucket?bucket:null}function Hashtable(hashingFunctionParam,equalityFunctionParam){var that=this,buckets=[],bucketsByHash={},hashingFunction=typeof hashingFunctionParam==FUNCTION?hashingFunctionParam:hashObject,equalityFunction=typeof equalityFunctionParam==FUNCTION?equalityFunctionParam:null;this.put=function(key,value){checkKey(key),checkValue(value);var bucket,bucketEntry,hash=hashingFunction(key),oldValue=null;return bucket=getBucketForHash(bucketsByHash,hash),bucket?(bucketEntry=bucket.getEntryForKey(key),bucketEntry?(oldValue=bucketEntry[1],bucketEntry[1]=value):bucket.addEntry(key,value)):(bucket=new Bucket(hash,key,value,equalityFunction),buckets[buckets.length]=bucket,bucketsByHash[hash]=bucket),oldValue},this.get=function(key){checkKey(key);var hash=hashingFunction(key),bucket=getBucketForHash(bucketsByHash,hash);if(bucket){var bucketEntry=bucket.getEntryForKey(key);if(bucketEntry)return bucketEntry[1]}return null},this.containsKey=function(key){checkKey(key);var bucketKey=hashingFunction(key),bucket=getBucketForHash(bucketsByHash,bucketKey);return!!bucket&&bucket.containsKey(key)},this.containsValue=function(value){checkValue(value);for(var i=buckets.length;i--;)if(buckets[i].containsValue(value))return!0;return!1},this.clear=function(){buckets.length=0,bucketsByHash={}},this.isEmpty=function(){return!buckets.length};var createBucketAggregator=function(bucketFuncName){return function(){for(var aggregated=[],i=buckets.length;i--;)buckets[i][bucketFuncName](aggregated);return aggregated}};this.keys=createBucketAggregator("keys"),this.values=createBucketAggregator("values"),this.entries=createBucketAggregator("getEntries"),this.remove=function(key){checkKey(key);var bucketIndex,hash=hashingFunction(key),oldValue=null,bucket=getBucketForHash(bucketsByHash,hash);return bucket&&(oldValue=bucket.removeEntryForKey(key),null!==oldValue&&(bucket.entries.length||(bucketIndex=searchBuckets(buckets,hash),arrayRemoveAt(buckets,bucketIndex),delete bucketsByHash[hash]))),oldValue},this.size=function(){for(var total=0,i=buckets.length;i--;)total+=buckets[i].entries.length;return total},this.each=function(callback){for(var entry,entries=that.entries(),i=entries.length;i--;)entry=entries[i],callback(entry[0],entry[1])},this.putAll=function(hashtable,conflictCallback){for(var entry,key,value,thisValue,entries=hashtable.entries(),i=entries.length,hasConflictCallback=typeof conflictCallback==FUNCTION;i--;)entry=entries[i],key=entry[0],value=entry[1],hasConflictCallback&&(thisValue=that.get(key))&&(value=conflictCallback(key,thisValue,value)),that.put(key,value)},this.clone=function(){var clone=new Hashtable(hashingFunctionParam,equalityFunctionParam);return clone.putAll(that),clone}}var FUNCTION="function",arrayRemoveAt=typeof Array.prototype.splice==FUNCTION?function(arr,idx){arr.splice(idx,1)}:function(arr,idx){var itemsAfterDeleted,i,len;if(idx===arr.length-1)arr.length=idx;else for(itemsAfterDeleted=arr.slice(idx+1),arr.length=idx,i=0,len=itemsAfterDeleted.length;i<len;++i)arr[idx+i]=itemsAfterDeleted[i]},checkKey=createKeyValCheck("key"),checkValue=createKeyValCheck("value"),EXISTENCE=0,ENTRY=1,ENTRY_INDEX_AND_VALUE=2;return Bucket.prototype={getEqualityFunction:function(searchValue){return typeof searchValue.equals==FUNCTION?equals_fixedValueHasEquals:equals_fixedValueNoEquals},getEntryForKey:createBucketSearcher(ENTRY),getEntryAndIndexForKey:createBucketSearcher(ENTRY_INDEX_AND_VALUE),removeEntryForKey:function(key){var result=this.getEntryAndIndexForKey(key);return result?(arrayRemoveAt(this.entries,result[0]),result[1]):null},addEntry:function(key,value){this.entries[this.entries.length]=[key,value]},keys:createBucketLister(0),values:createBucketLister(1),getEntries:function(entries){for(var startIndex=entries.length,i=0,len=this.entries.length;i<len;++i)entries[startIndex+i]=this.entries[i].slice(0)},containsKey:createBucketSearcher(EXISTENCE),containsValue:function(value){for(var i=this.entries.length;i--;)if(value===this.entries[i][1])return!0;return!1}},Hashtable}();!function(jQuery){function FormatData(dec,group,neg){this.dec=dec,this.group=group,this.neg=neg}function init(){for(var localeGroupIdx=0;localeGroupIdx<nfAllLocales.length;localeGroupIdx++){localeGroup=nfAllLocales[localeGroupIdx];for(var i=0;i<localeGroup.length;i++)nfLocales.put(localeGroup[i],localeGroupIdx)}}function formatCodes(locale,isFullLocale){0==nfLocales.size()&&init();var dec=".",group=",",neg="-";0==isFullLocale&&(locale.indexOf("_")!=-1?locale=locale.split("_")[1].toLowerCase():locale.indexOf("-")!=-1&&(locale=locale.split("-")[1].toLowerCase()));var codesIndex=nfLocales.get(locale);if(codesIndex){var codes=nfLocaleFormatting[codesIndex];codes&&(dec=codes[0],group=codes[1])}return new FormatData(dec,group,neg)}var nfLocales=new Hashtable,nfLocalesLikeUS=["ae","au","ca","cn","eg","gb","hk","il","in","jp","sk","th","tw","us"],nfLocalesLikeDE=["at","br","de","dk","es","gr","it","nl","pt","tr","vn"],nfLocalesLikeFR=["cz","fi","fr","ru","se","pl"],nfLocalesLikeCH=["ch"],nfLocaleFormatting=[[".",","],[",","."],[","," "],[".","'"]],nfAllLocales=[nfLocalesLikeUS,nfLocalesLikeDE,nfLocalesLikeFR,nfLocalesLikeCH];jQuery.fn.formatNumber=function(options,writeBack,giveReturnValue){return this.each(function(){null==writeBack&&(writeBack=!0),null==giveReturnValue&&(giveReturnValue=!0);var text;text=jQuery(this).is(":input")?new String(jQuery(this).val()):new String(jQuery(this).text());var returnString=jQuery.formatNumber(text,options);if(writeBack&&(jQuery(this).is(":input")?jQuery(this).val(returnString):jQuery(this).text(returnString)),giveReturnValue)return returnString})},jQuery.formatNumber=function(numberString,options){for(var options=jQuery.extend({},jQuery.fn.formatNumber.defaults,options),formatData=formatCodes(options.locale.toLowerCase(),options.isFullLocale),validFormat=(formatData.dec,formatData.group,formatData.neg,"0#-,."),prefix="",negativeInFront=!1,i=0;i<options.format.length;i++){if(validFormat.indexOf(options.format.charAt(i))!=-1){if(0==i&&"-"==options.format.charAt(i)){negativeInFront=!0;continue}break}prefix+=options.format.charAt(i)}for(var suffix="",i=options.format.length-1;i>=0&&validFormat.indexOf(options.format.charAt(i))==-1;i--)suffix=options.format.charAt(i)+suffix;options.format=options.format.substring(prefix.length),options.format=options.format.substring(0,options.format.length-suffix.length);var number=new Number(numberString);return jQuery._formatNumber(number,options,suffix,prefix,negativeInFront)},jQuery._formatNumber=function(number,options,suffix,prefix,negativeInFront){var options=jQuery.extend({},jQuery.fn.formatNumber.defaults,options),formatData=formatCodes(options.locale.toLowerCase(),options.isFullLocale),dec=formatData.dec,group=formatData.group,neg=formatData.neg,forcedToZero=!1;if(isNaN(number)){if(1!=options.nanForceZero)return null;number=0,forcedToZero=!0}"%"==suffix&&(number=100*number);var returnString="";if(options.format.indexOf(".")>-1){var decimalPortion=dec,decimalFormat=options.format.substring(options.format.lastIndexOf(".")+1);if(1==options.round)number=new Number(number.toFixed(decimalFormat.length));else{var numStr=number.toString();numStr=numStr.substring(0,numStr.lastIndexOf(".")+decimalFormat.length+1),number=new Number(numStr)}var decimalValue=number%1,decimalString=new String(decimalValue.toFixed(decimalFormat.length));decimalString=decimalString.substring(decimalString.lastIndexOf(".")+1);for(var i=0;i<decimalFormat.length;i++)if("#"!=decimalFormat.charAt(i)||"0"==decimalString.charAt(i)){if("#"==decimalFormat.charAt(i)&&"0"==decimalString.charAt(i)){var notParsed=decimalString.substring(i);if(notParsed.match("[1-9]")){decimalPortion+=decimalString.charAt(i);continue}break}"0"==decimalFormat.charAt(i)&&(decimalPortion+=decimalString.charAt(i))}else decimalPortion+=decimalString.charAt(i);returnString+=decimalPortion}else number=Math.round(number);var ones=Math.floor(number);number<0&&(ones=Math.ceil(number));var onesFormat="";onesFormat=options.format.indexOf(".")==-1?options.format:options.format.substring(0,options.format.indexOf("."));var onePortion="";if(0!=ones||"#"!=onesFormat.substr(onesFormat.length-1)||forcedToZero){var oneText=new String(Math.abs(ones)),groupLength=9999;onesFormat.lastIndexOf(",")!=-1&&(groupLength=onesFormat.length-onesFormat.lastIndexOf(",")-1);for(var groupCount=0,i=oneText.length-1;i>-1;i--)onePortion=oneText.charAt(i)+onePortion,groupCount++,groupCount==groupLength&&0!=i&&(onePortion=group+onePortion,groupCount=0);if(onesFormat.length>onePortion.length){var padStart=onesFormat.indexOf("0");if(padStart!=-1)for(var padLen=onesFormat.length-padStart,pos=onesFormat.length-onePortion.length-1;onePortion.length<padLen;){var padChar=onesFormat.charAt(pos);","==padChar&&(padChar=group),onePortion=padChar+onePortion,pos--}}}return onePortion||onesFormat.indexOf("0",onesFormat.length-1)===-1||(onePortion="0"),returnString=onePortion+returnString,number<0&&negativeInFront&&prefix.length>0?prefix=neg+prefix:number<0&&(returnString=neg+returnString),options.decimalSeparatorAlwaysShown||returnString.lastIndexOf(dec)==returnString.length-1&&(returnString=returnString.substring(0,returnString.length-1)),returnString=prefix+returnString+suffix},jQuery.fn.parseNumber=function(options,writeBack,giveReturnValue){null==writeBack&&(writeBack=!0),null==giveReturnValue&&(giveReturnValue=!0);var text;text=jQuery(this).is(":input")?new String(jQuery(this).val()):new String(jQuery(this).text());var number=jQuery.parseNumber(text,options);if(number&&(writeBack&&(jQuery(this).is(":input")?jQuery(this).val(number.toString()):jQuery(this).text(number.toString())),giveReturnValue))return number},jQuery.parseNumber=function(numberString,options){for(var options=jQuery.extend({},jQuery.fn.parseNumber.defaults,options),formatData=formatCodes(options.locale.toLowerCase(),options.isFullLocale),dec=formatData.dec,group=formatData.group,neg=formatData.neg,valid="1234567890.-";numberString.indexOf(group)>-1;)numberString=numberString.replace(group,"");numberString=numberString.replace(dec,".").replace(neg,"-");var validText="",hasPercent=!1;"%"!=numberString.charAt(numberString.length-1)&&1!=options.isPercentage||(hasPercent=!0);for(var i=0;i<numberString.length;i++)valid.indexOf(numberString.charAt(i))>-1&&(validText+=numberString.charAt(i));var number=new Number(validText);if(hasPercent){number/=100;var decimalPos=validText.indexOf(".");if(decimalPos!=-1){var decimalPoints=validText.length-decimalPos-1;number=number.toFixed(decimalPoints+2)}else number=number.toFixed(validText.length-1)}return number},jQuery.fn.parseNumber.defaults={locale:"us",decimalSeparatorAlwaysShown:!1,isPercentage:!1,isFullLocale:!1},jQuery.fn.formatNumber.defaults={format:"#,###.00",locale:"us",decimalSeparatorAlwaysShown:!1,nanForceZero:!0,round:!0,isFullLocale:!1},Number.prototype.toFixed=function(precision){return jQuery._roundNumber(this,precision)},jQuery._roundNumber=function(number,decimalPlaces){var power=Math.pow(10,decimalPlaces||0),value=String(Math.round(number*power)/power);if(decimalPlaces>0){var dp=value.indexOf(".");for(dp==-1?(value+=".",dp=0):dp=value.length-(dp+1);dp<decimalPlaces;)value+="0",dp++}return value}}(jQuery),function(){var cache={};this.tmpl=function tmpl(str,data){var fn=/\W/.test(str)?new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+str.replace(/[\r\t\n]/g," ").split("<%").join("\t").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("\t").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');"):cache[str]=cache[str]||tmpl(document.getElementById(str).innerHTML);return data?fn(data):fn}}(),function($){$.baseClass=function(obj){return obj=$(obj),obj.get(0).className.match(/([^ ]+)/)[1]},$.fn.addDependClass=function(className,delimiter){var options={delimiter:delimiter?delimiter:"-"};return this.each(function(){var baseClass=$.baseClass(this);baseClass&&$(this).addClass(baseClass+options.delimiter+className)})},$.fn.removeDependClass=function(className,delimiter){var options={delimiter:delimiter?delimiter:"-"};return this.each(function(){var baseClass=$.baseClass(this);baseClass&&$(this).removeClass(baseClass+options.delimiter+className)})},$.fn.toggleDependClass=function(className,delimiter){var options={delimiter:delimiter?delimiter:"-"};return this.each(function(){var baseClass=$.baseClass(this);baseClass&&($(this).is("."+baseClass+options.delimiter+className)?$(this).removeClass(baseClass+options.delimiter+className):$(this).addClass(baseClass+options.delimiter+className))})}}(jQuery),function($){function Draggable(){this._init.apply(this,arguments)}Draggable.prototype.oninit=function(){},Draggable.prototype.events=function(){},Draggable.prototype.onmousedown=function(){this.ptr.css({position:"absolute"})},Draggable.prototype.onmousemove=function(evt,x,y){this.ptr.css({left:x,top:y})},Draggable.prototype.onmouseup=function(){},Draggable.prototype.isDefault={drag:!1,clicked:!1,toclick:!0,mouseup:!1},Draggable.prototype._init=function(){if(arguments.length>0){this.ptr=$(arguments[0]),this.outer=$(".draggable-outer"),this.is={},$.extend(this.is,this.isDefault);var _offset=this.ptr.offset();this.d={left:_offset.left,top:_offset.top,width:this.ptr.width(),height:this.ptr.height()},this.oninit.apply(this,arguments),this._events()}},Draggable.prototype._getPageCoords=function(event){return event.targetTouches&&event.targetTouches[0]?{x:event.targetTouches[0].pageX,y:event.targetTouches[0].pageY}:{x:event.pageX,y:event.pageY}},Draggable.prototype._bindEvent=function(ptr,eventType,handler){this.supportTouches_?ptr.get(0).addEventListener(this.events_[eventType],handler,!1):ptr.bind(this.events_[eventType],handler)},Draggable.prototype._events=function(){var self=this;this.supportTouches_="ontouchend"in document,this.events_={click:this.supportTouches_?"touchstart":"click",down:this.supportTouches_?"touchstart":"mousedown",move:this.supportTouches_?"touchmove":"mousemove",up:this.supportTouches_?"touchend":"mouseup"},this._bindEvent($(document),"move",function(event){self.is.drag&&(event.stopPropagation(),event.preventDefault(),self._mousemove(event))}),this._bindEvent($(document),"down",function(event){self.is.drag&&(event.stopPropagation(),event.preventDefault())}),this._bindEvent($(document),"up",function(event){self._mouseup(event)}),this._bindEvent(this.ptr,"down",function(event){return self._mousedown(event),!1}),this._bindEvent(this.ptr,"up",function(event){self._mouseup(event)}),this.ptr.find("a").click(function(){if(self.is.clicked=!0,!self.is.toclick)return self.is.toclick=!0,!1}).mousedown(function(event){return self._mousedown(event),!1}),this.events()},Draggable.prototype._mousedown=function(evt){this.is.drag=!0,this.is.clicked=!1,this.is.mouseup=!1;var _offset=this.ptr.offset(),coords=this._getPageCoords(evt);this.cx=coords.x-_offset.left,this.cy=coords.y-_offset.top,
$.extend(this.d,{left:_offset.left,top:_offset.top,width:this.ptr.width(),height:this.ptr.height()}),this.outer&&this.outer.get(0)&&this.outer.css({height:Math.max(this.outer.height(),$(document.body).height()),overflow:"hidden"}),this.onmousedown(evt)},Draggable.prototype._mousemove=function(evt){this.is.toclick=!1;var coords=this._getPageCoords(evt);this.onmousemove(evt,coords.x-this.cx,coords.y-this.cy)},Draggable.prototype._mouseup=function(evt){this.is.drag&&(this.is.drag=!1,this.outer&&this.outer.get(0)&&($.browser.mozilla?this.outer.css({overflow:"hidden"}):this.outer.css({overflow:"visible"}),$.browser.msie&&"6.0"==$.browser.version?this.outer.css({height:"100%"}):this.outer.css({height:"auto"})),this.onmouseup(evt))},window.Draggable=Draggable}(jQuery),function($){function isArray(value){return"undefined"!=typeof value&&(value instanceof Array||!(value instanceof Object)&&"[object Array]"==Object.prototype.toString.call(value)||"number"==typeof value.length&&"undefined"!=typeof value.splice&&"undefined"!=typeof value.propertyIsEnumerable&&!value.propertyIsEnumerable("splice"))}function jSlider(){return this.init.apply(this,arguments)}function jSliderPointer(){Draggable.apply(this,arguments)}$.slider=function(node,settings){var jNode=$(node);return jNode.data("jslider")||jNode.data("jslider",new jSlider(node,settings)),jNode.data("jslider")},$.fn.slider=function(action,opt_value){function isDef(val){return void 0!==val}function isDefAndNotNull(val){return null!=val}var returnValue,args=arguments;return this.each(function(){var self=$.slider(this,action);if("string"==typeof action)switch(action){case"value":if(isDef(args[1])&&isDef(args[2])){var pointers=self.getPointers();isDefAndNotNull(pointers[0])&&isDefAndNotNull(args[1])&&(pointers[0].set(args[1]),pointers[0].setIndexOver()),isDefAndNotNull(pointers[1])&&isDefAndNotNull(args[2])&&(pointers[1].set(args[2]),pointers[1].setIndexOver())}else if(isDef(args[1])){var pointers=self.getPointers();isDefAndNotNull(pointers[0])&&isDefAndNotNull(args[1])&&(pointers[0].set(args[1]),pointers[0].setIndexOver())}else returnValue=self.getValue();break;case"prc":if(isDef(args[1])&&isDef(args[2])){var pointers=self.getPointers();isDefAndNotNull(pointers[0])&&isDefAndNotNull(args[1])&&(pointers[0]._set(args[1]),pointers[0].setIndexOver()),isDefAndNotNull(pointers[1])&&isDefAndNotNull(args[2])&&(pointers[1]._set(args[2]),pointers[1].setIndexOver())}else if(isDef(args[1])){var pointers=self.getPointers();isDefAndNotNull(pointers[0])&&isDefAndNotNull(args[1])&&(pointers[0]._set(args[1]),pointers[0].setIndexOver())}else returnValue=self.getPrcValue();break;case"calculatedValue":var value=self.getValue().split(";");returnValue="";for(var i=0;i<value.length;i++)returnValue+=(i>0?";":"")+self.nice(value[i]);break;case"skin":self.setSkin(args[1])}else action||opt_value||(isArray(returnValue)||(returnValue=[]),returnValue.push(self))}),isArray(returnValue)&&1==returnValue.length&&(returnValue=returnValue[0]),returnValue||this};var OPTIONS={settings:{from:1,to:10,step:1,smooth:!0,limits:!0,round:0,format:{format:"#,##0.##"},value:"5;7",dimension:""},className:"jslider",selector:".jslider-",template:tmpl('<span class="<%=className%>"><table><tr><td><div class="<%=className%>-bg"><i class="l"></i><i class="f"></i><i class="r"></i><i class="v"></i></div><div class="<%=className%>-pointer"></div><div class="<%=className%>-pointer <%=className%>-pointer-to"></div><div class="<%=className%>-label"><span><%=settings.from%></span></div><div class="<%=className%>-label <%=className%>-label-to"><%=settings.dimension%><span><%=settings.to%></span></div><div class="<%=className%>-value"><%=settings.dimension%><span></span></div><div class="<%=className%>-value <%=className%>-value-to"><%=settings.dimension%><span></span></div><div class="<%=className%>-scale"><%=scale%></div></td></tr></table></span>')};jSlider.prototype.init=function(node,settings){this.settings=$.extend(!0,{},OPTIONS.settings,settings?settings:{}),this.inputNode=$(node).hide(),this.settings.interval=this.settings.to-this.settings.from,this.settings.value=this.inputNode.attr("value"),this.settings.calculate&&$.isFunction(this.settings.calculate)&&(this.nice=this.settings.calculate),this.settings.onstatechange&&$.isFunction(this.settings.onstatechange)&&(this.onstatechange=this.settings.onstatechange),this.is={init:!1},this.o={},this.create()},jSlider.prototype.onstatechange=function(){},jSlider.prototype.create=function(){var $this=this;this.domNode=$(OPTIONS.template({className:OPTIONS.className,settings:{from:this.nice(this.settings.from),to:this.nice(this.settings.to),dimension:this.settings.dimension},scale:this.generateScale()})),this.inputNode.after(this.domNode),this.drawScale(),this.settings.skin&&this.settings.skin.length>0&&this.setSkin(this.settings.skin),this.sizes={domWidth:this.domNode.width(),domOffset:this.domNode.offset()},$.extend(this.o,{pointers:{},labels:{0:{o:this.domNode.find(OPTIONS.selector+"value").not(OPTIONS.selector+"value-to")},1:{o:this.domNode.find(OPTIONS.selector+"value").filter(OPTIONS.selector+"value-to")}},limits:{0:this.domNode.find(OPTIONS.selector+"label").not(OPTIONS.selector+"label-to"),1:this.domNode.find(OPTIONS.selector+"label").filter(OPTIONS.selector+"label-to")}}),$.extend(this.o.labels[0],{value:this.o.labels[0].o.find("span")}),$.extend(this.o.labels[1],{value:this.o.labels[1].o.find("span")}),$this.settings.value.split(";")[1]||(this.settings.single=!0,this.domNode.addDependClass("single")),$this.settings.limits||this.domNode.addDependClass("limitless"),this.domNode.find(OPTIONS.selector+"pointer").each(function(i){var value=$this.settings.value.split(";")[i];if(value){$this.o.pointers[i]=new jSliderPointer(this,i,$this);var prev=$this.settings.value.split(";")[i-1];prev&&new Number(value)<new Number(prev)&&(value=prev),value=value<$this.settings.from?$this.settings.from:value,value=value>$this.settings.to?$this.settings.to:value,$this.o.pointers[i].set(value,!0)}}),this.o.value=this.domNode.find(".v"),this.is.init=!0,$.each(this.o.pointers,function(i){$this.redraw(this)}),function(self){$(window).resize(function(){self.onresize()})}(this)},jSlider.prototype.setSkin=function(skin){this.skin_&&this.domNode.removeDependClass(this.skin_,"_"),this.domNode.addDependClass(this.skin_=skin,"_")},jSlider.prototype.setPointersIndex=function(i){$.each(this.getPointers(),function(i){this.index(i)})},jSlider.prototype.getPointers=function(){return this.o.pointers},jSlider.prototype.generateScale=function(){if(this.settings.scale&&this.settings.scale.length>0){for(var str="",s=this.settings.scale,prc=Math.round(100/(s.length-1)*10)/10,i=0;i<s.length;i++)str+='<span style="left: '+i*prc+'%">'+("|"!=s[i]?"<ins>"+s[i]+"</ins>":"")+"</span>";return str}return""},jSlider.prototype.drawScale=function(){this.domNode.find(OPTIONS.selector+"scale span ins").each(function(){$(this).css({marginLeft:-$(this).outerWidth()/2})})},jSlider.prototype.onresize=function(){var self=this;this.sizes={domWidth:this.domNode.width(),domOffset:this.domNode.offset()},$.each(this.o.pointers,function(i){self.redraw(this)})},jSlider.prototype.update=function(){this.onresize(),this.drawScale()},jSlider.prototype.limits=function(x,pointer){if(!this.settings.smooth){var step=100*this.settings.step/this.settings.interval;x=Math.round(x/step)*step}var another=this.o.pointers[1-pointer.uid];return another&&pointer.uid&&x<another.value.prc&&(x=another.value.prc),another&&!pointer.uid&&x>another.value.prc&&(x=another.value.prc),x<0&&(x=0),x>100&&(x=100),Math.round(10*x)/10},jSlider.prototype.redraw=function(pointer){return!!this.is.init&&(this.setValue(),this.o.pointers[0]&&this.o.pointers[1]&&this.o.value.css({left:this.o.pointers[0].value.prc+"%",width:this.o.pointers[1].value.prc-this.o.pointers[0].value.prc+"%"}),this.o.labels[pointer.uid].value.html(this.nice(pointer.value.origin)),void this.redrawLabels(pointer))},jSlider.prototype.redrawLabels=function(pointer){function setPosition(label,sizes,prc){return sizes.margin=-sizes.label/2,label_left=sizes.border+sizes.margin,label_left<0&&(sizes.margin-=label_left),sizes.border+sizes.label/2>self.sizes.domWidth?(sizes.margin=0,sizes.right=!0):sizes.right=!1,label.o.css({left:prc+"%",marginLeft:sizes.margin,right:"auto"}),sizes.right&&label.o.css({left:"auto",right:0}),sizes}var self=this,label=this.o.labels[pointer.uid],prc=pointer.value.prc,sizes={label:label.o.outerWidth(),right:!1,border:prc*this.sizes.domWidth/100};if(!this.settings.single){var another=this.o.pointers[1-pointer.uid],another_label=this.o.labels[another.uid];switch(pointer.uid){case 0:sizes.border+sizes.label/2>another_label.o.offset().left-this.sizes.domOffset.left?(another_label.o.css({visibility:"hidden"}),another_label.value.html(this.nice(another.value.origin)),label.o.css({visibility:"visible"}),prc=(another.value.prc-prc)/2+prc,another.value.prc!=pointer.value.prc&&(label.value.html(this.nice(pointer.value.origin)+"&nbsp;&ndash;&nbsp;"+this.nice(another.value.origin)),sizes.label=label.o.outerWidth(),sizes.border=prc*this.sizes.domWidth/100)):another_label.o.css({visibility:"visible"});break;case 1:sizes.border-sizes.label/2<another_label.o.offset().left-this.sizes.domOffset.left+another_label.o.outerWidth()?(another_label.o.css({visibility:"hidden"}),another_label.value.html(this.nice(another.value.origin)),label.o.css({visibility:"visible"}),prc=(prc-another.value.prc)/2+another.value.prc,another.value.prc!=pointer.value.prc&&(label.value.html(this.nice(another.value.origin)+"&nbsp;&ndash;&nbsp;"+this.nice(pointer.value.origin)),sizes.label=label.o.outerWidth(),sizes.border=prc*this.sizes.domWidth/100)):another_label.o.css({visibility:"visible"})}}if(sizes=setPosition(label,sizes,prc),another_label){var sizes={label:another_label.o.outerWidth(),right:!1,border:another.value.prc*this.sizes.domWidth/100};sizes=setPosition(another_label,sizes,another.value.prc)}this.redrawLimits()},jSlider.prototype.redrawLimits=function(){if(this.settings.limits){var limits=[!0,!0];for(key in this.o.pointers)if(!this.settings.single||0==key){var pointer=this.o.pointers[key],label=this.o.labels[pointer.uid],label_left=label.o.offset().left-this.sizes.domOffset.left,limit=this.o.limits[0];label_left<limit.outerWidth()&&(limits[0]=!1);var limit=this.o.limits[1];label_left+label.o.outerWidth()>this.sizes.domWidth-limit.outerWidth()&&(limits[1]=!1)}for(var i=0;i<limits.length;i++)limits[i]?this.o.limits[i].fadeIn("fast"):this.o.limits[i].fadeOut("fast")}},jSlider.prototype.setValue=function(){var value=this.getValue();this.inputNode.attr("value",value),this.onstatechange.call(this,value)},jSlider.prototype.getValue=function(){if(!this.is.init)return!1;var $this=this,value="";return $.each(this.o.pointers,function(i){void 0==this.value.prc||isNaN(this.value.prc)||(value+=(i>0?";":"")+$this.prcToValue(this.value.prc))}),value},jSlider.prototype.getPrcValue=function(){if(!this.is.init)return!1;var value="";return $.each(this.o.pointers,function(i){void 0==this.value.prc||isNaN(this.value.prc)||(value+=(i>0?";":"")+this.value.prc)}),value},jSlider.prototype.prcToValue=function(prc){if(this.settings.heterogeneity&&this.settings.heterogeneity.length>0)for(var h=this.settings.heterogeneity,_start=0,_from=this.settings.from,i=0;i<=h.length;i++){if(h[i])var v=h[i].split("/");else var v=[100,this.settings.to];if(v[0]=new Number(v[0]),v[1]=new Number(v[1]),prc>=_start&&prc<=v[0])var value=_from+(prc-_start)*(v[1]-_from)/(v[0]-_start);_start=v[0],_from=v[1]}else var value=this.settings.from+prc*this.settings.interval/100;return this.round(value)},jSlider.prototype.valueToPrc=function(value,pointer){if(this.settings.heterogeneity&&this.settings.heterogeneity.length>0)for(var h=this.settings.heterogeneity,_start=0,_from=this.settings.from,i=0;i<=h.length;i++){if(h[i])var v=h[i].split("/");else var v=[100,this.settings.to];if(v[0]=new Number(v[0]),v[1]=new Number(v[1]),value>=_from&&value<=v[1])var prc=pointer.limits(_start+(value-_from)*(v[0]-_start)/(v[1]-_from));_start=v[0],_from=v[1]}else var prc=pointer.limits(100*(value-this.settings.from)/this.settings.interval);return prc},jSlider.prototype.round=function(value){return value=Math.round(value/this.settings.step)*this.settings.step,value=this.settings.round?Math.round(value*Math.pow(10,this.settings.round))/Math.pow(10,this.settings.round):Math.round(value)},jSlider.prototype.nice=function(value){return value=value.toString().replace(/,/gi,".").replace(/ /gi,""),$.formatNumber?$.formatNumber(new Number(value),this.settings.format||{}).replace(/-/gi,"&minus;"):new Number(value)},jSliderPointer.prototype=new Draggable,jSliderPointer.prototype.oninit=function(ptr,id,_constructor){this.uid=id,this.parent=_constructor,this.value={},this.settings=this.parent.settings},jSliderPointer.prototype.onmousedown=function(evt){this._parent={offset:this.parent.domNode.offset(),width:this.parent.domNode.width()},this.ptr.addDependClass("hover"),this.setIndexOver()},jSliderPointer.prototype.onmousemove=function(evt,x){var coords=this._getPageCoords(evt);this._set(this.calc(coords.x))},jSliderPointer.prototype.onmouseup=function(evt){this.parent.settings.callback&&$.isFunction(this.parent.settings.callback)&&this.parent.settings.callback.call(this.parent,this.parent.getValue()),this.ptr.removeDependClass("hover")},jSliderPointer.prototype.setIndexOver=function(){this.parent.setPointersIndex(1),this.index(2)},jSliderPointer.prototype.index=function(i){this.ptr.css({zIndex:i})},jSliderPointer.prototype.limits=function(x){return this.parent.limits(x,this)},jSliderPointer.prototype.calc=function(coords){var x=this.limits(100*(coords-this._parent.offset.left)/this._parent.width);return x},jSliderPointer.prototype.set=function(value,opt_origin){this.value.origin=this.parent.round(value),this._set(this.parent.valueToPrc(value,this),opt_origin)},jSliderPointer.prototype._set=function(prc,opt_origin){opt_origin||(this.value.origin=this.parent.prcToValue(prc)),this.value.prc=prc,this.ptr.css({left:prc+"%"}),this.parent.redraw(this)}}(jQuery),function($){function both(val){return"object"==typeof val?val:{top:val,left:val}}var $scrollTo=$.scrollTo=function(target,duration,settings){$(window).scrollTo(target,duration,settings)};$scrollTo.defaults={axis:"xy",duration:parseFloat($.fn.jquery)>=1.3?0:1,limit:!0},$scrollTo.window=function(scope){return $(window)._scrollable()},$.fn._scrollable=function(){return this.map(function(){var elem=this,isWin=!elem.nodeName||$.inArray(elem.nodeName.toLowerCase(),["iframe","#document","html","body"])!=-1;if(!isWin)return elem;var doc=(elem.contentWindow||elem).document||elem.ownerDocument||elem;return/webkit/i.test(navigator.userAgent)||"BackCompat"==doc.compatMode?doc.body:doc.documentElement})},$.fn.scrollTo=function(target,duration,settings){return"object"==typeof duration&&(settings=duration,duration=0),"function"==typeof settings&&(settings={onAfter:settings}),"max"==target&&(target=9e9),settings=$.extend({},$scrollTo.defaults,settings),duration=duration||settings.duration,settings.queue=settings.queue&&settings.axis.length>1,settings.queue&&(duration/=2),settings.offset=both(settings.offset),settings.over=both(settings.over),this._scrollable().each(function(){function animate(callback){$elem.animate(attr,duration,settings.easing,callback&&function(){callback.call(this,target,settings)})}if(null!=target){var toff,elem=this,$elem=$(elem),targ=target,attr={},win=$elem.is("html,body");switch(typeof targ){case"number":case"string":if(/^([+-]=?)?\d+(\.\d+)?(px|%)?$/.test(targ)){targ=both(targ);break}if(targ=$(targ,this),!targ.length)return;case"object":(targ.is||targ.style)&&(toff=(targ=$(targ)).offset())}$.each(settings.axis.split(""),function(i,axis){var Pos="x"==axis?"Left":"Top",pos=Pos.toLowerCase(),key="scroll"+Pos,old=elem[key],max=$scrollTo.max(elem,axis);if(toff)attr[key]=toff[pos]+(win?0:old-$elem.offset()[pos]),settings.margin&&(attr[key]-=parseInt(targ.css("margin"+Pos))||0,attr[key]-=parseInt(targ.css("border"+Pos+"Width"))||0),attr[key]+=settings.offset[pos]||0,settings.over[pos]&&(attr[key]+=targ["x"==axis?"width":"height"]()*settings.over[pos]);else{var val=targ[pos];attr[key]=val.slice&&"%"==val.slice(-1)?parseFloat(val)/100*max:val}settings.limit&&/^\d+$/.test(attr[key])&&(attr[key]=attr[key]<=0?0:Math.min(attr[key],max)),!i&&settings.queue&&(old!=attr[key]&&animate(settings.onAfterFirst),delete attr[key])}),animate(settings.onAfter)}}).end()},$scrollTo.max=function(elem,axis){var Dim="x"==axis?"Width":"Height",scroll="scroll"+Dim;if(!$(elem).is("html,body"))return elem[scroll]-$(elem)[Dim.toLowerCase()]();var size="client"+Dim,html=elem.ownerDocument.documentElement,body=elem.ownerDocument.body;return Math.max(html[scroll],body[scroll])-Math.min(html[size],body[size])}}(jQuery),function(){var __indexOf=[].indexOf||function(item){for(var i=0,l=this.length;i<l;i++)if(i in this&&this[i]===item)return i;return-1},__slice=[].slice;!function(root,factory){return"function"==typeof define&&define.amd?define("waypoints",["jquery"],function($){return factory($,root)}):factory(root.jQuery,root)}(window,function($,window){var $w,Context,Waypoint,allWaypoints,contextCounter,contextKey,contexts,isTouch,jQMethods,methods,resizeEvent,scrollEvent,waypointCounter,waypointKey,wp,wps;return $w=$(window),isTouch=__indexOf.call(window,"ontouchstart")>=0,allWaypoints={horizontal:{},vertical:{}},contextCounter=1,contexts={},contextKey="waypoints-context-id",resizeEvent="resize.waypoints",scrollEvent="scroll.waypoints",waypointCounter=1,waypointKey="waypoints-waypoint-ids",wp="waypoint",wps="waypoints",Context=function(){function Context($element){var _this=this;this.$element=$element,this.element=$element[0],this.didResize=!1,this.didScroll=!1,this.id="context"+contextCounter++,this.oldScroll={x:$element.scrollLeft(),y:$element.scrollTop()},this.waypoints={horizontal:{},vertical:{}},this.element[contextKey]=this.id,contexts[this.id]=this,$element.bind(scrollEvent,function(){var scrollHandler;if(!_this.didScroll&&!isTouch)return _this.didScroll=!0,scrollHandler=function(){return _this.doScroll(),_this.didScroll=!1},window.setTimeout(scrollHandler,$[wps].settings.scrollThrottle)}),$element.bind(resizeEvent,function(){var resizeHandler;if(!_this.didResize)return _this.didResize=!0,resizeHandler=function(){return $[wps]("refresh"),_this.didResize=!1},window.setTimeout(resizeHandler,$[wps].settings.resizeThrottle)})}return Context.prototype.doScroll=function(){var axes,_this=this;return axes={horizontal:{newScroll:this.$element.scrollLeft(),oldScroll:this.oldScroll.x,forward:"right",backward:"left"},vertical:{newScroll:this.$element.scrollTop(),oldScroll:this.oldScroll.y,forward:"down",backward:"up"}},!isTouch||axes.vertical.oldScroll&&axes.vertical.newScroll||$[wps]("refresh"),$.each(axes,function(aKey,axis){var direction,isForward,triggered;return triggered=[],isForward=axis.newScroll>axis.oldScroll,direction=isForward?axis.forward:axis.backward,$.each(_this.waypoints[aKey],function(wKey,waypoint){var _ref,_ref1;return axis.oldScroll<(_ref=waypoint.offset)&&_ref<=axis.newScroll?triggered.push(waypoint):axis.newScroll<(_ref1=waypoint.offset)&&_ref1<=axis.oldScroll?triggered.push(waypoint):void 0}),triggered.sort(function(a,b){return a.offset-b.offset}),isForward||triggered.reverse(),$.each(triggered,function(i,waypoint){if(waypoint.options.continuous||i===triggered.length-1)return waypoint.trigger([direction])})}),this.oldScroll={x:axes.horizontal.newScroll,y:axes.vertical.newScroll}},Context.prototype.refresh=function(){var axes,cOffset,isWin,_this=this;return isWin=$.isWindow(this.element),cOffset=this.$element.offset(),this.doScroll(),axes={horizontal:{contextOffset:isWin?0:cOffset.left,contextScroll:isWin?0:this.oldScroll.x,contextDimension:this.$element.width(),oldScroll:this.oldScroll.x,forward:"right",backward:"left",offsetProp:"left"},vertical:{contextOffset:isWin?0:cOffset.top,contextScroll:isWin?0:this.oldScroll.y,contextDimension:isWin?$[wps]("viewportHeight"):this.$element.height(),oldScroll:this.oldScroll.y,forward:"down",backward:"up",offsetProp:"top"}},$.each(axes,function(aKey,axis){return $.each(_this.waypoints[aKey],function(i,waypoint){var adjustment,elementOffset,oldOffset,_ref,_ref1;if(adjustment=waypoint.options.offset,oldOffset=waypoint.offset,elementOffset=$.isWindow(waypoint.element)?0:waypoint.$element.offset()[axis.offsetProp],$.isFunction(adjustment)?adjustment=adjustment.apply(waypoint.element):"string"==typeof adjustment&&(adjustment=parseFloat(adjustment),waypoint.options.offset.indexOf("%")>-1&&(adjustment=Math.ceil(axis.contextDimension*adjustment/100))),waypoint.offset=elementOffset-axis.contextOffset+axis.contextScroll-adjustment,(!waypoint.options.onlyOnScroll||null==oldOffset)&&waypoint.enabled)return null!==oldOffset&&oldOffset<(_ref=axis.oldScroll)&&_ref<=waypoint.offset?waypoint.trigger([axis.backward]):null!==oldOffset&&oldOffset>(_ref1=axis.oldScroll)&&_ref1>=waypoint.offset?waypoint.trigger([axis.forward]):null===oldOffset&&axis.oldScroll>=waypoint.offset?waypoint.trigger([axis.forward]):void 0})})},Context.prototype.checkEmpty=function(){if($.isEmptyObject(this.waypoints.horizontal)&&$.isEmptyObject(this.waypoints.vertical))return this.$element.unbind([resizeEvent,scrollEvent].join(" ")),delete contexts[this.id]},Context}(),Waypoint=function(){function Waypoint($element,context,options){var idList,_ref;"bottom-in-view"===options.offset&&(options.offset=function(){var contextHeight;return contextHeight=$[wps]("viewportHeight"),$.isWindow(context.element)||(contextHeight=context.$element.height()),contextHeight-$(this).outerHeight()}),this.$element=$element,this.element=$element[0],this.axis=options.horizontal?"horizontal":"vertical",this.callback=options.handler,this.context=context,this.enabled=options.enabled,this.id="waypoints"+waypointCounter++,this.offset=null,this.options=options,context.waypoints[this.axis][this.id]=this,allWaypoints[this.axis][this.id]=this,idList=null!=(_ref=this.element[waypointKey])?_ref:[],idList.push(this.id),this.element[waypointKey]=idList}return Waypoint.prototype.trigger=function(args){if(this.enabled)return null!=this.callback&&this.callback.apply(this.element,args),this.options.triggerOnce?this.destroy():void 0},Waypoint.prototype.disable=function(){return this.enabled=!1},Waypoint.prototype.enable=function(){return this.context.refresh(),this.enabled=!0},Waypoint.prototype.destroy=function(){return delete allWaypoints[this.axis][this.id],delete this.context.waypoints[this.axis][this.id],this.context.checkEmpty()},Waypoint.getWaypointsByElement=function(element){var all,ids;return(ids=element[waypointKey])?(all=$.extend({},allWaypoints.horizontal,allWaypoints.vertical),$.map(ids,function(id){return all[id]})):[]},Waypoint}(),methods={init:function(f,options){var _ref;return options=$.extend({},$.fn[wp].defaults,options),null==(_ref=options.handler)&&(options.handler=f),this.each(function(){var $this,context,contextElement,_ref1;return $this=$(this),contextElement=null!=(_ref1=options.context)?_ref1:$.fn[wp].defaults.context,$.isWindow(contextElement)||(contextElement=$this.closest(contextElement)),contextElement=$(contextElement),context=contexts[contextElement[0][contextKey]],context||(context=new Context(contextElement)),new Waypoint($this,context,options)}),$[wps]("refresh"),this},disable:function(){return methods._invoke.call(this,"disable")},enable:function(){return methods._invoke.call(this,"enable")},destroy:function(){return methods._invoke.call(this,"destroy")},prev:function(axis,selector){return methods._traverse.call(this,axis,selector,function(stack,index,waypoints){if(index>0)return stack.push(waypoints[index-1])})},next:function(axis,selector){return methods._traverse.call(this,axis,selector,function(stack,index,waypoints){if(index<waypoints.length-1)return stack.push(waypoints[index+1])})},_traverse:function(axis,selector,push){var stack,waypoints;return null==axis&&(axis="vertical"),null==selector&&(selector=window),waypoints=jQMethods.aggregate(selector),stack=[],this.each(function(){var index;return index=$.inArray(this,waypoints[axis]),push(stack,index,waypoints[axis])}),this.pushStack(stack)},_invoke:function(method){return this.each(function(){var waypoints;return waypoints=Waypoint.getWaypointsByElement(this),$.each(waypoints,function(i,waypoint){return waypoint[method](),!0})}),this}},$.fn[wp]=function(){var args,method;return method=arguments[0],args=2<=arguments.length?__slice.call(arguments,1):[],methods[method]?methods[method].apply(this,args):$.isFunction(method)?methods.init.apply(this,arguments):$.isPlainObject(method)?methods.init.apply(this,[null,method]):method?$.error("The "+method+" method does not exist in jQuery Waypoints."):$.error("jQuery Waypoints needs a callback function or handler option.")},$.fn[wp].defaults={context:window,continuous:!0,enabled:!0,horizontal:!1,offset:0,triggerOnce:!1},jQMethods={refresh:function(){return $.each(contexts,function(i,context){return context.refresh()})},viewportHeight:function(){var _ref;return null!=(_ref=window.innerHeight)?_ref:$w.height()},aggregate:function(contextSelector){var collection,waypoints,_ref;return collection=allWaypoints,contextSelector&&(collection=null!=(_ref=contexts[$(contextSelector)[0][contextKey]])?_ref.waypoints:void 0),collection?(waypoints={horizontal:[],vertical:[]},$.each(waypoints,function(axis,arr){return $.each(collection[axis],function(key,waypoint){return arr.push(waypoint)}),arr.sort(function(a,b){return a.offset-b.offset}),waypoints[axis]=$.map(arr,function(waypoint){return waypoint.element}),waypoints[axis]=$.unique(waypoints[axis])}),waypoints):[]},above:function(contextSelector){return null==contextSelector&&(contextSelector=window),jQMethods._filter(contextSelector,"vertical",function(context,waypoint){return waypoint.offset<=context.oldScroll.y})},below:function(contextSelector){return null==contextSelector&&(contextSelector=window),jQMethods._filter(contextSelector,"vertical",function(context,waypoint){return waypoint.offset>context.oldScroll.y})},left:function(contextSelector){return null==contextSelector&&(contextSelector=window),jQMethods._filter(contextSelector,"horizontal",function(context,waypoint){return waypoint.offset<=context.oldScroll.x})},right:function(contextSelector){return null==contextSelector&&(contextSelector=window),jQMethods._filter(contextSelector,"horizontal",function(context,waypoint){return waypoint.offset>context.oldScroll.x})},enable:function(){return jQMethods._invoke("enable")},disable:function(){return jQMethods._invoke("disable")},destroy:function(){return jQMethods._invoke("destroy")},extendFn:function(methodName,f){return methods[methodName]=f},_invoke:function(method){var waypoints;return waypoints=$.extend({},allWaypoints.vertical,allWaypoints.horizontal),$.each(waypoints,function(key,waypoint){return waypoint[method](),!0})},_filter:function(selector,axis,test){var context,waypoints;return(context=contexts[$(selector)[0][contextKey]])?(waypoints=[],$.each(context.waypoints[axis],function(i,waypoint){if(test(context,waypoint))return waypoints.push(waypoint)}),waypoints.sort(function(a,b){return a.offset-b.offset}),$.map(waypoints,function(waypoint){return waypoint.element})):[]}},$[wps]=function(){var args,method;return method=arguments[0],args=2<=arguments.length?__slice.call(arguments,1):[],jQMethods[method]?jQMethods[method].apply(null,args):jQMethods.aggregate.call(null,method)},$[wps].settings={resizeThrottle:100,scrollThrottle:30},$w.on("load.waypoints",function(){return $[wps]("refresh")})})}.call(this),function(factory){if("function"==typeof define&&define.amd)define(factory);else if("object"==typeof exports)module.exports=factory();else{var _OldCookies=window.Cookies,api=window.Cookies=factory();api.noConflict=function(){return window.Cookies=_OldCookies,api}}}(function(){function extend(){for(var i=0,result={};i<arguments.length;i++){var attributes=arguments[i];for(var key in attributes)result[key]=attributes[key]}return result}function init(converter){function api(key,value,attributes){var result;if(arguments.length>1){if(attributes=extend({path:"/"},api.defaults,attributes),"number"==typeof attributes.expires){var expires=new Date;expires.setMilliseconds(expires.getMilliseconds()+864e5*attributes.expires),attributes.expires=expires}try{result=JSON.stringify(value),/^[\{\[]/.test(result)&&(value=result)}catch(e){}return value=encodeURIComponent(String(value)),value=value.replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),key=encodeURIComponent(String(key)),key=key.replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent),key=key.replace(/[\(\)]/g,escape),document.cookie=[key,"=",value,attributes.expires&&"; expires="+attributes.expires.toUTCString(),attributes.path&&"; path="+attributes.path,attributes.domain&&"; domain="+attributes.domain,attributes.secure?"; secure":""].join("")}key||(result={});for(var cookies=document.cookie?document.cookie.split("; "):[],rdecode=/(%[0-9A-Z]{2})+/g,i=0;i<cookies.length;i++){var parts=cookies[i].split("="),name=parts[0].replace(rdecode,decodeURIComponent),cookie=parts.slice(1).join("=");'"'===cookie.charAt(0)&&(cookie=cookie.slice(1,-1));try{if(cookie=converter&&converter(cookie,name)||cookie.replace(rdecode,decodeURIComponent),this.json)try{cookie=JSON.parse(cookie)}catch(e){}if(key===name){result=cookie;break}key||(result[name]=cookie)}catch(e){}}return result}return api.get=api.set=api,api.getJSON=function(){return api.apply({json:!0},[].slice.call(arguments))},api.defaults={},api.remove=function(key,attributes){api(key,"",extend(attributes,{expires:-1}))},api.withConverter=init,api}return init()}),function(factory){"function"==typeof define&&define.amd?define([],factory):"object"==typeof exports?module.exports=factory():window.noUiSlider=factory()}(function(){"use strict";function unique(array){return array.filter(function(a){return!this[a]&&(this[a]=!0)},{})}function closest(value,to){return Math.round(value/to)*to}function offset(elem){var rect=elem.getBoundingClientRect(),doc=elem.ownerDocument,docElem=doc.documentElement,pageOffset=getPageOffset();return/webkit.*Chrome.*Mobile/i.test(navigator.userAgent)&&(pageOffset.x=0),{top:rect.top+pageOffset.y-docElem.clientTop,left:rect.left+pageOffset.x-docElem.clientLeft}}function isNumeric(a){return"number"==typeof a&&!isNaN(a)&&isFinite(a)}function accurateNumber(number){var p=Math.pow(10,7);return Number((Math.round(number*p)/p).toFixed(7))}function addClassFor(element,className,duration){addClass(element,className),setTimeout(function(){removeClass(element,className)},duration)}function limit(a){return Math.max(Math.min(a,100),0)}function asArray(a){return Array.isArray(a)?a:[a]}function countDecimals(numStr){var pieces=numStr.split(".");return pieces.length>1?pieces[1].length:0}function addClass(el,className){el.classList?el.classList.add(className):el.className+=" "+className}function removeClass(el,className){el.classList?el.classList.remove(className):el.className=el.className.replace(new RegExp("(^|\\b)"+className.split(" ").join("|")+"(\\b|$)","gi")," ")}function hasClass(el,className){el.classList?el.classList.contains(className):new RegExp("(^| )"+className+"( |$)","gi").test(el.className)}function getPageOffset(){var supportPageOffset=void 0!==window.pageXOffset,isCSS1Compat="CSS1Compat"===(document.compatMode||""),x=supportPageOffset?window.pageXOffset:isCSS1Compat?document.documentElement.scrollLeft:document.body.scrollLeft,y=supportPageOffset?window.pageYOffset:isCSS1Compat?document.documentElement.scrollTop:document.body.scrollTop;return{x:x,y:y}}function addCssPrefix(cssPrefix){return function(className){return cssPrefix+className}}function subRangeRatio(pa,pb){return 100/(pb-pa)}function fromPercentage(range,value){return 100*value/(range[1]-range[0])}function toPercentage(range,value){
return fromPercentage(range,range[0]<0?value+Math.abs(range[0]):value-range[0])}function isPercentage(range,value){return value*(range[1]-range[0])/100+range[0]}function getJ(value,arr){for(var j=1;value>=arr[j];)j+=1;return j}function toStepping(xVal,xPct,value){if(value>=xVal.slice(-1)[0])return 100;var va,vb,pa,pb,j=getJ(value,xVal);return va=xVal[j-1],vb=xVal[j],pa=xPct[j-1],pb=xPct[j],pa+toPercentage([va,vb],value)/subRangeRatio(pa,pb)}function fromStepping(xVal,xPct,value){if(value>=100)return xVal.slice(-1)[0];var va,vb,pa,pb,j=getJ(value,xPct);return va=xVal[j-1],vb=xVal[j],pa=xPct[j-1],pb=xPct[j],isPercentage([va,vb],(value-pa)*subRangeRatio(pa,pb))}function getStep(xPct,xSteps,snap,value){if(100===value)return value;var a,b,j=getJ(value,xPct);return snap?(a=xPct[j-1],b=xPct[j],value-a>(b-a)/2?b:a):xSteps[j-1]?xPct[j-1]+closest(value-xPct[j-1],xSteps[j-1]):value}function handleEntryPoint(index,value,that){var percentage;if("number"==typeof value&&(value=[value]),"[object Array]"!==Object.prototype.toString.call(value))throw new Error("noUiSlider: 'range' contains invalid value.");if(percentage="min"===index?0:"max"===index?100:parseFloat(index),!isNumeric(percentage)||!isNumeric(value[0]))throw new Error("noUiSlider: 'range' value isn't numeric.");that.xPct.push(percentage),that.xVal.push(value[0]),percentage?that.xSteps.push(!isNaN(value[1])&&value[1]):isNaN(value[1])||(that.xSteps[0]=value[1])}function handleStepPoint(i,n,that){return!n||void(that.xSteps[i]=fromPercentage([that.xVal[i],that.xVal[i+1]],n)/subRangeRatio(that.xPct[i],that.xPct[i+1]))}function Spectrum(entry,snap,direction,singleStep){this.xPct=[],this.xVal=[],this.xSteps=[singleStep||!1],this.xNumSteps=[!1],this.snap=snap,this.direction=direction;var index,ordered=[];for(index in entry)entry.hasOwnProperty(index)&&ordered.push([entry[index],index]);for(ordered.length&&"object"==typeof ordered[0][0]?ordered.sort(function(a,b){return a[0][0]-b[0][0]}):ordered.sort(function(a,b){return a[0]-b[0]}),index=0;index<ordered.length;index++)handleEntryPoint(ordered[index][1],ordered[index][0],this);for(this.xNumSteps=this.xSteps.slice(0),index=0;index<this.xNumSteps.length;index++)handleStepPoint(index,this.xNumSteps[index],this)}function testStep(parsed,entry){if(!isNumeric(entry))throw new Error("noUiSlider: 'step' is not numeric.");parsed.singleStep=entry}function testRange(parsed,entry){if("object"!=typeof entry||Array.isArray(entry))throw new Error("noUiSlider: 'range' is not an object.");if(void 0===entry.min||void 0===entry.max)throw new Error("noUiSlider: Missing 'min' or 'max' in 'range'.");parsed.spectrum=new Spectrum(entry,parsed.snap,parsed.dir,parsed.singleStep)}function testStart(parsed,entry){if(entry=asArray(entry),!Array.isArray(entry)||!entry.length||entry.length>2)throw new Error("noUiSlider: 'start' option is incorrect.");parsed.handles=entry.length,parsed.start=entry}function testSnap(parsed,entry){if(parsed.snap=entry,"boolean"!=typeof entry)throw new Error("noUiSlider: 'snap' option must be a boolean.")}function testAnimate(parsed,entry){if(parsed.animate=entry,"boolean"!=typeof entry)throw new Error("noUiSlider: 'animate' option must be a boolean.")}function testConnect(parsed,entry){if("lower"===entry&&1===parsed.handles)parsed.connect=1;else if("upper"===entry&&1===parsed.handles)parsed.connect=2;else if(entry===!0&&2===parsed.handles)parsed.connect=3;else{if(entry!==!1)throw new Error("noUiSlider: 'connect' option doesn't match handle count.");parsed.connect=0}}function testOrientation(parsed,entry){switch(entry){case"horizontal":parsed.ort=0;break;case"vertical":parsed.ort=1;break;default:throw new Error("noUiSlider: 'orientation' option is invalid.")}}function testMargin(parsed,entry){if(!isNumeric(entry))throw new Error("noUiSlider: 'margin' option must be numeric.");if(parsed.margin=parsed.spectrum.getMargin(entry),!parsed.margin)throw new Error("noUiSlider: 'margin' option is only supported on linear sliders.")}function testLimit(parsed,entry){if(!isNumeric(entry))throw new Error("noUiSlider: 'limit' option must be numeric.");if(parsed.limit=parsed.spectrum.getMargin(entry),!parsed.limit)throw new Error("noUiSlider: 'limit' option is only supported on linear sliders.")}function testDirection(parsed,entry){switch(entry){case"ltr":parsed.dir=0;break;case"rtl":parsed.dir=1,parsed.connect=[0,2,1,3][parsed.connect];break;default:throw new Error("noUiSlider: 'direction' option was not recognized.")}}function testBehaviour(parsed,entry){if("string"!=typeof entry)throw new Error("noUiSlider: 'behaviour' must be a string containing options.");var tap=entry.indexOf("tap")>=0,drag=entry.indexOf("drag")>=0,fixed=entry.indexOf("fixed")>=0,snap=entry.indexOf("snap")>=0;if(drag&&!parsed.connect)throw new Error("noUiSlider: 'drag' behaviour must be used with 'connect': true.");parsed.events={tap:tap||snap,drag:drag,fixed:fixed,snap:snap}}function testTooltips(parsed,entry){if(entry===!0&&(parsed.tooltips=!0),entry&&entry.format){if("function"!=typeof entry.format)throw new Error("noUiSlider: 'tooltips.format' must be an object.");parsed.tooltips={format:entry.format}}}function testFormat(parsed,entry){if(parsed.format=entry,"function"==typeof entry.to&&"function"==typeof entry.from)return!0;throw new Error("noUiSlider: 'format' requires 'to' and 'from' methods.")}function testCssPrefix(parsed,entry){if(void 0!==entry&&"string"!=typeof entry)throw new Error("noUiSlider: 'cssPrefix' must be a string.");parsed.cssPrefix=entry}function testOptions(options){var tests,parsed={margin:0,limit:0,animate:!0,format:defaultFormatter};tests={step:{r:!1,t:testStep},start:{r:!0,t:testStart},connect:{r:!0,t:testConnect},direction:{r:!0,t:testDirection},snap:{r:!1,t:testSnap},animate:{r:!1,t:testAnimate},range:{r:!0,t:testRange},orientation:{r:!1,t:testOrientation},margin:{r:!1,t:testMargin},limit:{r:!1,t:testLimit},behaviour:{r:!0,t:testBehaviour},format:{r:!1,t:testFormat},tooltips:{r:!1,t:testTooltips},cssPrefix:{r:!1,t:testCssPrefix}};var defaults={connect:!1,direction:"ltr",behaviour:"tap",orientation:"horizontal"};return Object.keys(defaults).forEach(function(name){void 0===options[name]&&(options[name]=defaults[name])}),Object.keys(tests).forEach(function(name){var test=tests[name];if(void 0===options[name]){if(test.r)throw new Error("noUiSlider: '"+name+"' is required.");return!0}test.t(parsed,options[name])}),parsed.pips=options.pips,parsed.style=parsed.ort?"top":"left",parsed}function closure(target,options){function getPositions(a,b,delimit){var c=a+b[0],d=a+b[1];return delimit?(c<0&&(d+=Math.abs(c)),d>100&&(c-=d-100),[limit(c),limit(d)]):[c,d]}function fixEvent(e,pageOffset){e.preventDefault();var x,y,touch=0===e.type.indexOf("touch"),mouse=0===e.type.indexOf("mouse"),pointer=0===e.type.indexOf("pointer"),event=e;return 0===e.type.indexOf("MSPointer")&&(pointer=!0),touch&&(x=e.changedTouches[0].pageX,y=e.changedTouches[0].pageY),pageOffset=pageOffset||getPageOffset(),(mouse||pointer)&&(x=e.clientX+pageOffset.x,y=e.clientY+pageOffset.y),event.pageOffset=pageOffset,event.points=[x,y],event.cursor=mouse||pointer,event}function addHandle(direction,index){var origin=document.createElement("div"),handle=document.createElement("div"),additions=["-lower","-upper"];return direction&&additions.reverse(),addClass(handle,cssClasses[3]),addClass(handle,cssClasses[3]+additions[index]),addClass(origin,cssClasses[2]),origin.appendChild(handle),origin}function addConnection(connect,target,handles){switch(connect){case 1:addClass(target,cssClasses[7]),addClass(handles[0],cssClasses[6]);break;case 3:addClass(handles[1],cssClasses[6]);case 2:addClass(handles[0],cssClasses[7]);case 0:addClass(target,cssClasses[6])}}function addHandles(nrHandles,direction,base){var index,handles=[];for(index=0;index<nrHandles;index+=1)handles.push(base.appendChild(addHandle(direction,index)));return handles}function addSlider(direction,orientation,target){addClass(target,cssClasses[0]),addClass(target,cssClasses[8+direction]),addClass(target,cssClasses[4+orientation]);var div=document.createElement("div");return addClass(div,cssClasses[1]),target.appendChild(div),div}function defaultFormatTooltipValue(formattedValue){return formattedValue}function addTooltip(handle){var element=document.createElement("div");return element.className=cssClasses[18],handle.firstChild.appendChild(element)}function tooltips(tooltipsOptions){var formatTooltipValue=tooltipsOptions.format?tooltipsOptions.format:defaultFormatTooltipValue,tips=scope_Handles.map(addTooltip);bindEvent("update",function(formattedValues,handleId,rawValues){tips[handleId].innerHTML=formatTooltipValue(formattedValues[handleId],rawValues[handleId])})}function getGroup(mode,values,stepped){if("range"===mode||"steps"===mode)return scope_Spectrum.xVal;if("count"===mode){var v,spread=100/(values-1),i=0;for(values=[];(v=i++*spread)<=100;)values.push(v);mode="positions"}return"positions"===mode?values.map(function(value){return scope_Spectrum.fromStepping(stepped?scope_Spectrum.getStep(value):value)}):"values"===mode?stepped?values.map(function(value){return scope_Spectrum.fromStepping(scope_Spectrum.getStep(scope_Spectrum.toStepping(value)))}):values:void 0}function generateSpread(density,mode,group){function safeIncrement(value,increment){return(value+increment).toFixed(7)/1}var originalSpectrumDirection=scope_Spectrum.direction,indexes={},firstInRange=scope_Spectrum.xVal[0],lastInRange=scope_Spectrum.xVal[scope_Spectrum.xVal.length-1],ignoreFirst=!1,ignoreLast=!1,prevPct=0;return scope_Spectrum.direction=0,group=unique(group.slice().sort(function(a,b){return a-b})),group[0]!==firstInRange&&(group.unshift(firstInRange),ignoreFirst=!0),group[group.length-1]!==lastInRange&&(group.push(lastInRange),ignoreLast=!0),group.forEach(function(current,index){var step,i,q,newPct,pctDifference,pctPos,type,steps,realSteps,stepsize,low=current,high=group[index+1];if("steps"===mode&&(step=scope_Spectrum.xNumSteps[index]),step||(step=high-low),low!==!1&&void 0!==high)for(i=low;i<=high;i=safeIncrement(i,step)){for(newPct=scope_Spectrum.toStepping(i),pctDifference=newPct-prevPct,steps=pctDifference/density,realSteps=Math.round(steps),stepsize=pctDifference/realSteps,q=1;q<=realSteps;q+=1)pctPos=prevPct+q*stepsize,indexes[pctPos.toFixed(5)]=["x",0];type=group.indexOf(i)>-1?1:"steps"===mode?2:0,!index&&ignoreFirst&&(type=0),i===high&&ignoreLast||(indexes[newPct.toFixed(5)]=[i,type]),prevPct=newPct}}),scope_Spectrum.direction=originalSpectrumDirection,indexes}function addMarking(spread,filterFunc,formatter){function getSize(type){return["-normal","-large","-sub"][type]}function getTags(offset,source,values){return'class="'+source+" "+source+"-"+style+" "+source+getSize(values[1])+'" style="'+options.style+": "+offset+'%"'}function addSpread(offset,values){scope_Spectrum.direction&&(offset=100-offset),values[1]=values[1]&&filterFunc?filterFunc(values[0],values[1]):values[1],element.innerHTML+="<div "+getTags(offset,"noUi-marker",values)+"></div>",values[1]&&(element.innerHTML+="<div "+getTags(offset,"noUi-value",values)+">"+formatter.to(values[0])+"</div>")}var style=["horizontal","vertical"][options.ort],element=document.createElement("div");return addClass(element,"noUi-pips"),addClass(element,"noUi-pips-"+style),Object.keys(spread).forEach(function(a){addSpread(a,spread[a])}),element}function pips(grid){var mode=grid.mode,density=grid.density||1,filter=grid.filter||!1,values=grid.values||!1,stepped=grid.stepped||!1,group=getGroup(mode,values,stepped),spread=generateSpread(density,mode,group),format=grid.format||{to:Math.round};return scope_Target.appendChild(addMarking(spread,filter,format))}function baseSize(){return scope_Base["offset"+["Width","Height"][options.ort]]}function fireEvent(event,handleNumber){void 0!==handleNumber&&1!==options.handles&&(handleNumber=Math.abs(handleNumber-options.dir)),Object.keys(scope_Events).forEach(function(targetEvent){var eventType=targetEvent.split(".")[0];event===eventType&&scope_Events[targetEvent].forEach(function(callback){callback(asArray(valueGet()),handleNumber,inSliderOrder(Array.prototype.slice.call(scope_Values)))})})}function inSliderOrder(values){return 1===values.length?values[0]:options.dir?values.reverse():values}function attach(events,element,callback,data){var method=function(e){return!scope_Target.hasAttribute("disabled")&&(!hasClass(scope_Target,cssClasses[14])&&(e=fixEvent(e,data.pageOffset),!(events===actions.start&&void 0!==e.buttons&&e.buttons>1)&&(e.calcPoint=e.points[options.ort],void callback(e,data))))},methods=[];return events.split(" ").forEach(function(eventName){element.addEventListener(eventName,method,!1),methods.push([eventName,method])}),methods}function move(event,data){if(0===event.buttons&&0===event.which&&0!==data.buttonsProperty)return end(event,data);var positions,i,handles=data.handles||scope_Handles,state=!1,proposal=100*(event.calcPoint-data.start)/data.baseSize,handleNumber=handles[0]===scope_Handles[0]?0:1;if(positions=getPositions(proposal,data.positions,handles.length>1),state=setHandle(handles[0],positions[handleNumber],1===handles.length),handles.length>1){if(state=setHandle(handles[1],positions[handleNumber?0:1],!1)||state)for(i=0;i<data.handles.length;i++)fireEvent("slide",i)}else state&&fireEvent("slide",handleNumber)}function end(event,data){var active=scope_Base.querySelector("."+cssClasses[15]),handleNumber=data.handles[0]===scope_Handles[0]?0:1;null!==active&&removeClass(active,cssClasses[15]),event.cursor&&(document.body.style.cursor="",document.body.removeEventListener("selectstart",document.body.noUiListener));var d=document.documentElement;d.noUiListeners.forEach(function(c){d.removeEventListener(c[0],c[1])}),removeClass(scope_Target,cssClasses[12]),fireEvent("set",handleNumber),fireEvent("change",handleNumber)}function start(event,data){var d=document.documentElement;if(1===data.handles.length&&(addClass(data.handles[0].children[0],cssClasses[15]),data.handles[0].hasAttribute("disabled")))return!1;event.stopPropagation();var moveEvent=attach(actions.move,d,move,{start:event.calcPoint,baseSize:baseSize(),pageOffset:event.pageOffset,handles:data.handles,buttonsProperty:event.buttons,positions:[scope_Locations[0],scope_Locations[scope_Handles.length-1]]}),endEvent=attach(actions.end,d,end,{handles:data.handles});if(d.noUiListeners=moveEvent.concat(endEvent),event.cursor){document.body.style.cursor=getComputedStyle(event.target).cursor,scope_Handles.length>1&&addClass(scope_Target,cssClasses[12]);var f=function(){return!1};document.body.noUiListener=f,document.body.addEventListener("selectstart",f,!1)}}function tap(event){var handleNumber,to,location=event.calcPoint,total=0;return event.stopPropagation(),scope_Handles.forEach(function(a){total+=offset(a)[options.style]}),handleNumber=location<total/2||1===scope_Handles.length?0:1,location-=offset(scope_Base)[options.style],to=100*location/baseSize(),options.events.snap||addClassFor(scope_Target,cssClasses[14],300),!scope_Handles[handleNumber].hasAttribute("disabled")&&(setHandle(scope_Handles[handleNumber],to),fireEvent("slide",handleNumber),fireEvent("set",handleNumber),fireEvent("change",handleNumber),void(options.events.snap&&start(event,{handles:[scope_Handles[handleNumber]]})))}function events(behaviour){var i,drag;if(!behaviour.fixed)for(i=0;i<scope_Handles.length;i+=1)attach(actions.start,scope_Handles[i].children[0],start,{handles:[scope_Handles[i]]});behaviour.tap&&attach(actions.start,scope_Base,tap,{handles:scope_Handles}),behaviour.drag&&(drag=[scope_Base.querySelector("."+cssClasses[7])],addClass(drag[0],cssClasses[10]),behaviour.fixed&&drag.push(scope_Handles[drag[0]===scope_Handles[0]?1:0].children[0]),drag.forEach(function(element){attach(actions.start,element,start,{handles:scope_Handles})}))}function setHandle(handle,to,noLimitOption){var trigger=handle!==scope_Handles[0]?1:0,lowerMargin=scope_Locations[0]+options.margin,upperMargin=scope_Locations[1]-options.margin,lowerLimit=scope_Locations[0]+options.limit,upperLimit=scope_Locations[1]-options.limit,newScopeValue=scope_Spectrum.fromStepping(to);return scope_Handles.length>1&&(to=trigger?Math.max(to,lowerMargin):Math.min(to,upperMargin)),noLimitOption!==!1&&options.limit&&scope_Handles.length>1&&(to=trigger?Math.min(to,lowerLimit):Math.max(to,upperLimit)),to=scope_Spectrum.getStep(to),to=limit(parseFloat(to.toFixed(7))),(to!==scope_Locations[trigger]||newScopeValue!==scope_Values[trigger])&&(window.requestAnimationFrame?window.requestAnimationFrame(function(){handle.style[options.style]=to+"%"}):handle.style[options.style]=to+"%",handle.previousSibling||(removeClass(handle,cssClasses[17]),to>50&&addClass(handle,cssClasses[17])),scope_Locations[trigger]=to,scope_Values[trigger]=scope_Spectrum.fromStepping(to),fireEvent("update",trigger),!0)}function setValues(count,values){var i,trigger,to;for(options.limit&&(count+=1),i=0;i<count;i+=1)trigger=i%2,to=values[trigger],null!==to&&to!==!1&&("number"==typeof to&&(to=String(to)),to=options.format.from(to),(to===!1||isNaN(to)||setHandle(scope_Handles[trigger],scope_Spectrum.toStepping(to),i===3-options.dir)===!1)&&fireEvent("update",trigger))}function valueSet(input){var count,i,values=asArray(input);for(options.dir&&options.handles>1&&values.reverse(),options.animate&&scope_Locations[0]!==-1&&addClassFor(scope_Target,cssClasses[14],300),count=scope_Handles.length>1?3:1,1===values.length&&(count=1),setValues(count,values),i=0;i<scope_Handles.length;i++)fireEvent("set",i)}function valueGet(){var i,retour=[];for(i=0;i<options.handles;i+=1)retour[i]=options.format.to(scope_Values[i]);return inSliderOrder(retour)}function destroy(){cssClasses.forEach(function(cls){cls&&removeClass(scope_Target,cls)}),scope_Target.innerHTML="",delete scope_Target.noUiSlider}function getCurrentStep(){var retour=scope_Locations.map(function(location,index){var step=scope_Spectrum.getApplicableStep(location),stepDecimals=countDecimals(String(step[2])),value=scope_Values[index],increment=100===location?null:step[2],prev=Number((value-step[2]).toFixed(stepDecimals)),decrement=0===location?null:prev>=step[1]?step[2]:step[0]||!1;return[decrement,increment]});return inSliderOrder(retour)}function bindEvent(namespacedEvent,callback){scope_Events[namespacedEvent]=scope_Events[namespacedEvent]||[],scope_Events[namespacedEvent].push(callback),"update"===namespacedEvent.split(".")[0]&&scope_Handles.forEach(function(a,index){fireEvent("update",index)})}function removeEvent(namespacedEvent){var event=namespacedEvent.split(".")[0],namespace=namespacedEvent.substring(event.length);Object.keys(scope_Events).forEach(function(bind){var tEvent=bind.split(".")[0],tNamespace=bind.substring(tEvent.length);event&&event!==tEvent||namespace&&namespace!==tNamespace||delete scope_Events[bind]})}function updateOptions(optionsToUpdate){var newOptions=testOptions({start:[0,0],margin:optionsToUpdate.margin,limit:optionsToUpdate.limit,step:optionsToUpdate.step,range:optionsToUpdate.range,animate:optionsToUpdate.animate});options.margin=newOptions.margin,options.limit=newOptions.limit,options.step=newOptions.step,options.range=newOptions.range,options.animate=newOptions.animate,scope_Spectrum=newOptions.spectrum}var scope_Base,scope_Handles,scope_Target=target,scope_Locations=[-1,-1],scope_Spectrum=options.spectrum,scope_Values=[],scope_Events={},cssClasses=["target","base","origin","handle","horizontal","vertical","background","connect","ltr","rtl","draggable","","state-drag","","state-tap","active","","stacking","tooltip"].map(addCssPrefix(options.cssPrefix||defaultCssPrefix));if(scope_Target.noUiSlider)throw new Error("Slider was already initialized.");return scope_Base=addSlider(options.dir,options.ort,scope_Target),scope_Handles=addHandles(options.handles,options.dir,scope_Base),addConnection(options.connect,scope_Target,scope_Handles),events(options.events),options.pips&&pips(options.pips),options.tooltips&&tooltips(options.tooltips),{destroy:destroy,steps:getCurrentStep,on:bindEvent,off:removeEvent,get:valueGet,set:valueSet,updateOptions:updateOptions}}function initialize(target,originalOptions){if(!target.nodeName)throw new Error("noUiSlider.create requires a single element.");var options=testOptions(originalOptions,target),slider=closure(target,options);return slider.set(options.start),target.noUiSlider=slider,slider}var actions=window.navigator.pointerEnabled?{start:"pointerdown",move:"pointermove",end:"pointerup"}:window.navigator.msPointerEnabled?{start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}:{start:"mousedown touchstart",move:"mousemove touchmove",end:"mouseup touchend"},defaultCssPrefix="noUi-";Spectrum.prototype.getMargin=function(value){return 2===this.xPct.length&&fromPercentage(this.xVal,value)},Spectrum.prototype.toStepping=function(value){return value=toStepping(this.xVal,this.xPct,value),this.direction&&(value=100-value),value},Spectrum.prototype.fromStepping=function(value){return this.direction&&(value=100-value),accurateNumber(fromStepping(this.xVal,this.xPct,value))},Spectrum.prototype.getStep=function(value){return this.direction&&(value=100-value),value=getStep(this.xPct,this.xSteps,this.snap,value),this.direction&&(value=100-value),value},Spectrum.prototype.getApplicableStep=function(value){var j=getJ(value,this.xPct),offset=100===value?2:1;return[this.xNumSteps[j-2],this.xVal[j-offset],this.xNumSteps[j-offset]]},Spectrum.prototype.convert=function(value){return this.getStep(this.toStepping(value))};var defaultFormatter={to:function(value){return void 0!==value&&value.toFixed(2)},from:Number};return{create:initialize}}),function(factory){"use strict";"function"==typeof define&&define.amd?define(["jquery"],factory):"undefined"!=typeof exports?module.exports=factory(require("jquery")):factory(jQuery)}(function($){"use strict";var Slick=window.Slick||{};Slick=function(){function Slick(element,settings){var dataSettings,_=this;_.defaults={accessibility:!0,adaptiveHeight:!1,appendArrows:$(element),appendDots:$(element),arrows:!0,asNavFor:null,prevArrow:'<button type="button" data-role="none" class="slick-prev" aria-label="Previous" tabindex="0" role="button">Previous</button>',nextArrow:'<button type="button" data-role="none" class="slick-next" aria-label="Next" tabindex="0" role="button">Next</button>',autoplay:!1,autoplaySpeed:3e3,centerMode:!1,centerPadding:"50px",cssEase:"ease",customPaging:function(slider,i){return'<button type="button" data-role="none" role="button" aria-required="false" tabindex="0">'+(i+1)+"</button>"},dots:!1,dotsClass:"slick-dots",draggable:!0,easing:"linear",edgeFriction:.35,fade:!1,focusOnSelect:!1,infinite:!0,initialSlide:0,lazyLoad:"ondemand",mobileFirst:!1,pauseOnHover:!0,pauseOnDotsHover:!1,respondTo:"window",responsive:null,rows:1,rtl:!1,slide:"",slidesPerRow:1,slidesToShow:1,slidesToScroll:1,speed:500,swipe:!0,swipeToSlide:!1,touchMove:!0,touchThreshold:5,useCSS:!0,useTransform:!1,variableWidth:!1,vertical:!1,verticalSwiping:!1,waitForAnimate:!0,zIndex:1e3},_.initials={animating:!1,dragging:!1,autoPlayTimer:null,currentDirection:0,currentLeft:null,currentSlide:0,direction:1,$dots:null,listWidth:null,listHeight:null,loadIndex:0,$nextArrow:null,$prevArrow:null,slideCount:null,slideWidth:null,$slideTrack:null,$slides:null,sliding:!1,slideOffset:0,swipeLeft:null,$list:null,touchObject:{},transformsEnabled:!1,unslicked:!1},$.extend(_,_.initials),_.activeBreakpoint=null,_.animType=null,_.animProp=null,_.breakpoints=[],_.breakpointSettings=[],_.cssTransitions=!1,_.hidden="hidden",_.paused=!1,_.positionProp=null,_.respondTo=null,_.rowCount=1,_.shouldClick=!0,_.$slider=$(element),_.$slidesCache=null,_.transformType=null,_.transitionType=null,_.visibilityChange="visibilitychange",_.windowWidth=0,_.windowTimer=null,dataSettings=$(element).data("slick")||{},_.options=$.extend({},_.defaults,dataSettings,settings),_.currentSlide=_.options.initialSlide,_.originalSettings=_.options,"undefined"!=typeof document.mozHidden?(_.hidden="mozHidden",_.visibilityChange="mozvisibilitychange"):"undefined"!=typeof document.webkitHidden&&(_.hidden="webkitHidden",_.visibilityChange="webkitvisibilitychange"),_.autoPlay=$.proxy(_.autoPlay,_),_.autoPlayClear=$.proxy(_.autoPlayClear,_),_.changeSlide=$.proxy(_.changeSlide,_),_.clickHandler=$.proxy(_.clickHandler,_),_.selectHandler=$.proxy(_.selectHandler,_),_.setPosition=$.proxy(_.setPosition,_),_.swipeHandler=$.proxy(_.swipeHandler,_),_.dragHandler=$.proxy(_.dragHandler,_),_.keyHandler=$.proxy(_.keyHandler,_),_.autoPlayIterator=$.proxy(_.autoPlayIterator,_),_.instanceUid=instanceUid++,_.htmlExpr=/^(?:\s*(<[\w\W]+>)[^>]*)$/,_.registerBreakpoints(),_.init(!0),_.checkResponsive(!0)}var instanceUid=0;return Slick}(),Slick.prototype.addSlide=Slick.prototype.slickAdd=function(markup,index,addBefore){var _=this;if("boolean"==typeof index)addBefore=index,index=null;else if(index<0||index>=_.slideCount)return!1;_.unload(),"number"==typeof index?0===index&&0===_.$slides.length?$(markup).appendTo(_.$slideTrack):addBefore?$(markup).insertBefore(_.$slides.eq(index)):$(markup).insertAfter(_.$slides.eq(index)):addBefore===!0?$(markup).prependTo(_.$slideTrack):$(markup).appendTo(_.$slideTrack),_.$slides=_.$slideTrack.children(this.options.slide),_.$slideTrack.children(this.options.slide).detach(),_.$slideTrack.append(_.$slides),_.$slides.each(function(index,element){$(element).attr("data-slick-index",index)}),_.$slidesCache=_.$slides,_.reinit()},Slick.prototype.animateHeight=function(){var _=this;if(1===_.options.slidesToShow&&_.options.adaptiveHeight===!0&&_.options.vertical===!1){var targetHeight=_.$slides.eq(_.currentSlide).outerHeight(!0);_.$list.animate({height:targetHeight},_.options.speed)}},Slick.prototype.animateSlide=function(targetLeft,callback){var animProps={},_=this;_.animateHeight(),_.options.rtl===!0&&_.options.vertical===!1&&(targetLeft=-targetLeft),_.transformsEnabled===!1?_.options.vertical===!1?_.$slideTrack.animate({left:targetLeft},_.options.speed,_.options.easing,callback):_.$slideTrack.animate({top:targetLeft},_.options.speed,_.options.easing,callback):_.cssTransitions===!1?(_.options.rtl===!0&&(_.currentLeft=-_.currentLeft),$({animStart:_.currentLeft}).animate({animStart:targetLeft},{duration:_.options.speed,easing:_.options.easing,step:function(now){now=Math.ceil(now),_.options.vertical===!1?(animProps[_.animType]="translate("+now+"px, 0px)",_.$slideTrack.css(animProps)):(animProps[_.animType]="translate(0px,"+now+"px)",_.$slideTrack.css(animProps))},complete:function(){callback&&callback.call()}})):(_.applyTransition(),targetLeft=Math.ceil(targetLeft),_.options.vertical===!1?animProps[_.animType]="translate3d("+targetLeft+"px, 0px, 0px)":animProps[_.animType]="translate3d(0px,"+targetLeft+"px, 0px)",_.$slideTrack.css(animProps),callback&&setTimeout(function(){_.disableTransition(),callback.call()},_.options.speed))},Slick.prototype.asNavFor=function(index){var _=this,asNavFor=_.options.asNavFor;asNavFor&&null!==asNavFor&&(asNavFor=$(asNavFor).not(_.$slider)),null!==asNavFor&&"object"==typeof asNavFor&&asNavFor.each(function(){var target=$(this).slick("getSlick");target.unslicked||target.slideHandler(index,!0)})},Slick.prototype.applyTransition=function(slide){var _=this,transition={};_.options.fade===!1?transition[_.transitionType]=_.transformType+" "+_.options.speed+"ms "+_.options.cssEase:transition[_.transitionType]="opacity "+_.options.speed+"ms "+_.options.cssEase,_.options.fade===!1?_.$slideTrack.css(transition):_.$slides.eq(slide).css(transition)},Slick.prototype.autoPlay=function(){var _=this;_.autoPlayTimer&&clearInterval(_.autoPlayTimer),_.slideCount>_.options.slidesToShow&&_.paused!==!0&&(_.autoPlayTimer=setInterval(_.autoPlayIterator,_.options.autoplaySpeed))},Slick.prototype.autoPlayClear=function(){var _=this;_.autoPlayTimer&&clearInterval(_.autoPlayTimer)},Slick.prototype.autoPlayIterator=function(){var _=this;_.options.infinite===!1?1===_.direction?(_.currentSlide+1===_.slideCount-1&&(_.direction=0),_.slideHandler(_.currentSlide+_.options.slidesToScroll)):(_.currentSlide-1===0&&(_.direction=1),_.slideHandler(_.currentSlide-_.options.slidesToScroll)):_.slideHandler(_.currentSlide+_.options.slidesToScroll)},Slick.prototype.buildArrows=function(){var _=this;_.options.arrows===!0&&(_.$prevArrow=$(_.options.prevArrow).addClass("slick-arrow"),_.$nextArrow=$(_.options.nextArrow).addClass("slick-arrow"),_.slideCount>_.options.slidesToShow?(_.$prevArrow.removeClass("slick-hidden").removeAttr("aria-hidden tabindex"),_.$nextArrow.removeClass("slick-hidden").removeAttr("aria-hidden tabindex"),_.htmlExpr.test(_.options.prevArrow)&&_.$prevArrow.prependTo(_.options.appendArrows),_.htmlExpr.test(_.options.nextArrow)&&_.$nextArrow.appendTo(_.options.appendArrows),_.options.infinite!==!0&&_.$prevArrow.addClass("slick-disabled").attr("aria-disabled","true")):_.$prevArrow.add(_.$nextArrow).addClass("slick-hidden").attr({"aria-disabled":"true",tabindex:"-1"}))},Slick.prototype.buildDots=function(){var i,dotString,_=this;if(_.options.dots===!0&&_.slideCount>_.options.slidesToShow){for(dotString='<ul class="'+_.options.dotsClass+'">',i=0;i<=_.getDotCount();i+=1)dotString+="<li>"+_.options.customPaging.call(this,_,i)+"</li>";dotString+="</ul>",_.$dots=$(dotString).appendTo(_.options.appendDots),_.$dots.find("li").first().addClass("slick-active").attr("aria-hidden","false")}},Slick.prototype.buildOut=function(){var _=this;_.$slides=_.$slider.children(_.options.slide+":not(.slick-cloned)").addClass("slick-slide"),_.slideCount=_.$slides.length,_.$slides.each(function(index,element){$(element).attr("data-slick-index",index).data("originalStyling",$(element).attr("style")||"")}),_.$slider.addClass("slick-slider"),_.$slideTrack=0===_.slideCount?$('<div class="slick-track"/>').appendTo(_.$slider):_.$slides.wrapAll('<div class="slick-track"/>').parent(),_.$list=_.$slideTrack.wrap('<div aria-live="polite" class="slick-list"/>').parent(),_.$slideTrack.css("opacity",0),_.options.centerMode!==!0&&_.options.swipeToSlide!==!0||(_.options.slidesToScroll=1),$("img[data-lazy]",_.$slider).not("[src]").addClass("slick-loading"),_.setupInfinite(),_.buildArrows(),_.buildDots(),_.updateDots(),_.setSlideClasses("number"==typeof _.currentSlide?_.currentSlide:0),_.options.draggable===!0&&_.$list.addClass("draggable")},Slick.prototype.buildRows=function(){var a,b,c,newSlides,numOfSlides,originalSlides,slidesPerSection,_=this;if(newSlides=document.createDocumentFragment(),originalSlides=_.$slider.children(),_.options.rows>1){for(slidesPerSection=_.options.slidesPerRow*_.options.rows,numOfSlides=Math.ceil(originalSlides.length/slidesPerSection),a=0;a<numOfSlides;a++){var slide=document.createElement("div");for(b=0;b<_.options.rows;b++){var row=document.createElement("div");for(c=0;c<_.options.slidesPerRow;c++){var target=a*slidesPerSection+(b*_.options.slidesPerRow+c);originalSlides.get(target)&&row.appendChild(originalSlides.get(target))}slide.appendChild(row)}newSlides.appendChild(slide)}_.$slider.html(newSlides),_.$slider.children().children().children().css({width:100/_.options.slidesPerRow+"%",display:"inline-block"})}},Slick.prototype.checkResponsive=function(initial,forceUpdate){var breakpoint,targetBreakpoint,respondToWidth,_=this,triggerBreakpoint=!1,sliderWidth=_.$slider.width(),windowWidth=window.innerWidth||$(window).width();if("window"===_.respondTo?respondToWidth=windowWidth:"slider"===_.respondTo?respondToWidth=sliderWidth:"min"===_.respondTo&&(respondToWidth=Math.min(windowWidth,sliderWidth)),_.options.responsive&&_.options.responsive.length&&null!==_.options.responsive){targetBreakpoint=null;for(breakpoint in _.breakpoints)_.breakpoints.hasOwnProperty(breakpoint)&&(_.originalSettings.mobileFirst===!1?respondToWidth<_.breakpoints[breakpoint]&&(targetBreakpoint=_.breakpoints[breakpoint]):respondToWidth>_.breakpoints[breakpoint]&&(targetBreakpoint=_.breakpoints[breakpoint]));null!==targetBreakpoint?null!==_.activeBreakpoint?(targetBreakpoint!==_.activeBreakpoint||forceUpdate)&&(_.activeBreakpoint=targetBreakpoint,
"unslick"===_.breakpointSettings[targetBreakpoint]?_.unslick(targetBreakpoint):(_.options=$.extend({},_.originalSettings,_.breakpointSettings[targetBreakpoint]),initial===!0&&(_.currentSlide=_.options.initialSlide),_.refresh(initial)),triggerBreakpoint=targetBreakpoint):(_.activeBreakpoint=targetBreakpoint,"unslick"===_.breakpointSettings[targetBreakpoint]?_.unslick(targetBreakpoint):(_.options=$.extend({},_.originalSettings,_.breakpointSettings[targetBreakpoint]),initial===!0&&(_.currentSlide=_.options.initialSlide),_.refresh(initial)),triggerBreakpoint=targetBreakpoint):null!==_.activeBreakpoint&&(_.activeBreakpoint=null,_.options=_.originalSettings,initial===!0&&(_.currentSlide=_.options.initialSlide),_.refresh(initial),triggerBreakpoint=targetBreakpoint),initial||triggerBreakpoint===!1||_.$slider.trigger("breakpoint",[_,triggerBreakpoint])}},Slick.prototype.changeSlide=function(event,dontAnimate){var indexOffset,slideOffset,unevenOffset,_=this,$target=$(event.target);switch($target.is("a")&&event.preventDefault(),$target.is("li")||($target=$target.closest("li")),unevenOffset=_.slideCount%_.options.slidesToScroll!==0,indexOffset=unevenOffset?0:(_.slideCount-_.currentSlide)%_.options.slidesToScroll,event.data.message){case"previous":slideOffset=0===indexOffset?_.options.slidesToScroll:_.options.slidesToShow-indexOffset,_.slideCount>_.options.slidesToShow&&_.slideHandler(_.currentSlide-slideOffset,!1,dontAnimate);break;case"next":slideOffset=0===indexOffset?_.options.slidesToScroll:indexOffset,_.slideCount>_.options.slidesToShow&&_.slideHandler(_.currentSlide+slideOffset,!1,dontAnimate);break;case"index":var index=0===event.data.index?0:event.data.index||$target.index()*_.options.slidesToScroll;_.slideHandler(_.checkNavigable(index),!1,dontAnimate),$target.children().trigger("focus");break;default:return}},Slick.prototype.checkNavigable=function(index){var navigables,prevNavigable,_=this;if(navigables=_.getNavigableIndexes(),prevNavigable=0,index>navigables[navigables.length-1])index=navigables[navigables.length-1];else for(var n in navigables){if(index<navigables[n]){index=prevNavigable;break}prevNavigable=navigables[n]}return index},Slick.prototype.cleanUpEvents=function(){var _=this;_.options.dots&&null!==_.$dots&&($("li",_.$dots).off("click.slick",_.changeSlide),_.options.pauseOnDotsHover===!0&&_.options.autoplay===!0&&$("li",_.$dots).off("mouseenter.slick",$.proxy(_.setPaused,_,!0)).off("mouseleave.slick",$.proxy(_.setPaused,_,!1))),_.options.arrows===!0&&_.slideCount>_.options.slidesToShow&&(_.$prevArrow&&_.$prevArrow.off("click.slick",_.changeSlide),_.$nextArrow&&_.$nextArrow.off("click.slick",_.changeSlide)),_.$list.off("touchstart.slick mousedown.slick",_.swipeHandler),_.$list.off("touchmove.slick mousemove.slick",_.swipeHandler),_.$list.off("touchend.slick mouseup.slick",_.swipeHandler),_.$list.off("touchcancel.slick mouseleave.slick",_.swipeHandler),_.$list.off("click.slick",_.clickHandler),$(document).off(_.visibilityChange,_.visibility),_.$list.off("mouseenter.slick",$.proxy(_.setPaused,_,!0)),_.$list.off("mouseleave.slick",$.proxy(_.setPaused,_,!1)),_.options.accessibility===!0&&_.$list.off("keydown.slick",_.keyHandler),_.options.focusOnSelect===!0&&$(_.$slideTrack).children().off("click.slick",_.selectHandler),$(window).off("orientationchange.slick.slick-"+_.instanceUid,_.orientationChange),$(window).off("resize.slick.slick-"+_.instanceUid,_.resize),$("[draggable!=true]",_.$slideTrack).off("dragstart",_.preventDefault),$(window).off("load.slick.slick-"+_.instanceUid,_.setPosition),$(document).off("ready.slick.slick-"+_.instanceUid,_.setPosition)},Slick.prototype.cleanUpRows=function(){var originalSlides,_=this;_.options.rows>1&&(originalSlides=_.$slides.children().children(),originalSlides.removeAttr("style"),_.$slider.html(originalSlides))},Slick.prototype.clickHandler=function(event){var _=this;_.shouldClick===!1&&(event.stopImmediatePropagation(),event.stopPropagation(),event.preventDefault())},Slick.prototype.destroy=function(refresh){var _=this;_.autoPlayClear(),_.touchObject={},_.cleanUpEvents(),$(".slick-cloned",_.$slider).detach(),_.$dots&&_.$dots.remove(),_.$prevArrow&&_.$prevArrow.length&&(_.$prevArrow.removeClass("slick-disabled slick-arrow slick-hidden").removeAttr("aria-hidden aria-disabled tabindex").css("display",""),_.htmlExpr.test(_.options.prevArrow)&&_.$prevArrow.remove()),_.$nextArrow&&_.$nextArrow.length&&(_.$nextArrow.removeClass("slick-disabled slick-arrow slick-hidden").removeAttr("aria-hidden aria-disabled tabindex").css("display",""),_.htmlExpr.test(_.options.nextArrow)&&_.$nextArrow.remove()),_.$slides&&(_.$slides.removeClass("slick-slide slick-active slick-center slick-visible slick-current").removeAttr("aria-hidden").removeAttr("data-slick-index").each(function(){$(this).attr("style",$(this).data("originalStyling"))}),_.$slideTrack.children(this.options.slide).detach(),_.$slideTrack.detach(),_.$list.detach(),_.$slider.append(_.$slides)),_.cleanUpRows(),_.$slider.removeClass("slick-slider"),_.$slider.removeClass("slick-initialized"),_.unslicked=!0,refresh||_.$slider.trigger("destroy",[_])},Slick.prototype.disableTransition=function(slide){var _=this,transition={};transition[_.transitionType]="",_.options.fade===!1?_.$slideTrack.css(transition):_.$slides.eq(slide).css(transition)},Slick.prototype.fadeSlide=function(slideIndex,callback){var _=this;_.cssTransitions===!1?(_.$slides.eq(slideIndex).css({zIndex:_.options.zIndex}),_.$slides.eq(slideIndex).animate({opacity:1},_.options.speed,_.options.easing,callback)):(_.applyTransition(slideIndex),_.$slides.eq(slideIndex).css({opacity:1,zIndex:_.options.zIndex}),callback&&setTimeout(function(){_.disableTransition(slideIndex),callback.call()},_.options.speed))},Slick.prototype.fadeSlideOut=function(slideIndex){var _=this;_.cssTransitions===!1?_.$slides.eq(slideIndex).animate({opacity:0,zIndex:_.options.zIndex-2},_.options.speed,_.options.easing):(_.applyTransition(slideIndex),_.$slides.eq(slideIndex).css({opacity:0,zIndex:_.options.zIndex-2}))},Slick.prototype.filterSlides=Slick.prototype.slickFilter=function(filter){var _=this;null!==filter&&(_.$slidesCache=_.$slides,_.unload(),_.$slideTrack.children(this.options.slide).detach(),_.$slidesCache.filter(filter).appendTo(_.$slideTrack),_.reinit())},Slick.prototype.getCurrent=Slick.prototype.slickCurrentSlide=function(){var _=this;return _.currentSlide},Slick.prototype.getDotCount=function(){var _=this,breakPoint=0,counter=0,pagerQty=0;if(_.options.infinite===!0)for(;breakPoint<_.slideCount;)++pagerQty,breakPoint=counter+_.options.slidesToShow,counter+=_.options.slidesToScroll<=_.options.slidesToShow?_.options.slidesToScroll:_.options.slidesToShow;else if(_.options.centerMode===!0)pagerQty=_.slideCount;else for(;breakPoint<_.slideCount;)++pagerQty,breakPoint=counter+_.options.slidesToShow,counter+=_.options.slidesToScroll<=_.options.slidesToShow?_.options.slidesToScroll:_.options.slidesToShow;return pagerQty-1},Slick.prototype.getLeft=function(slideIndex){var targetLeft,verticalHeight,targetSlide,_=this,verticalOffset=0;return _.slideOffset=0,verticalHeight=_.$slides.first().outerHeight(!0),_.options.infinite===!0?(_.slideCount>_.options.slidesToShow&&(_.slideOffset=_.slideWidth*_.options.slidesToShow*-1,verticalOffset=verticalHeight*_.options.slidesToShow*-1),_.slideCount%_.options.slidesToScroll!==0&&slideIndex+_.options.slidesToScroll>_.slideCount&&_.slideCount>_.options.slidesToShow&&(slideIndex>_.slideCount?(_.slideOffset=(_.options.slidesToShow-(slideIndex-_.slideCount))*_.slideWidth*-1,verticalOffset=(_.options.slidesToShow-(slideIndex-_.slideCount))*verticalHeight*-1):(_.slideOffset=_.slideCount%_.options.slidesToScroll*_.slideWidth*-1,verticalOffset=_.slideCount%_.options.slidesToScroll*verticalHeight*-1))):slideIndex+_.options.slidesToShow>_.slideCount&&(_.slideOffset=(slideIndex+_.options.slidesToShow-_.slideCount)*_.slideWidth,verticalOffset=(slideIndex+_.options.slidesToShow-_.slideCount)*verticalHeight),_.slideCount<=_.options.slidesToShow&&(_.slideOffset=0,verticalOffset=0),_.options.centerMode===!0&&_.options.infinite===!0?_.slideOffset+=_.slideWidth*Math.floor(_.options.slidesToShow/2)-_.slideWidth:_.options.centerMode===!0&&(_.slideOffset=0,_.slideOffset+=_.slideWidth*Math.floor(_.options.slidesToShow/2)),targetLeft=_.options.vertical===!1?slideIndex*_.slideWidth*-1+_.slideOffset:slideIndex*verticalHeight*-1+verticalOffset,_.options.variableWidth===!0&&(targetSlide=_.slideCount<=_.options.slidesToShow||_.options.infinite===!1?_.$slideTrack.children(".slick-slide").eq(slideIndex):_.$slideTrack.children(".slick-slide").eq(slideIndex+_.options.slidesToShow),targetLeft=_.options.rtl===!0?targetSlide[0]?(_.$slideTrack.width()-targetSlide[0].offsetLeft-targetSlide.width())*-1:0:targetSlide[0]?targetSlide[0].offsetLeft*-1:0,_.options.centerMode===!0&&(targetSlide=_.slideCount<=_.options.slidesToShow||_.options.infinite===!1?_.$slideTrack.children(".slick-slide").eq(slideIndex):_.$slideTrack.children(".slick-slide").eq(slideIndex+_.options.slidesToShow+1),targetLeft=_.options.rtl===!0?targetSlide[0]?(_.$slideTrack.width()-targetSlide[0].offsetLeft-targetSlide.width())*-1:0:targetSlide[0]?targetSlide[0].offsetLeft*-1:0,targetLeft+=(_.$list.width()-targetSlide.outerWidth())/2)),targetLeft},Slick.prototype.getOption=Slick.prototype.slickGetOption=function(option){var _=this;return _.options[option]},Slick.prototype.getNavigableIndexes=function(){var max,_=this,breakPoint=0,counter=0,indexes=[];for(_.options.infinite===!1?max=_.slideCount:(breakPoint=_.options.slidesToScroll*-1,counter=_.options.slidesToScroll*-1,max=2*_.slideCount);breakPoint<max;)indexes.push(breakPoint),breakPoint=counter+_.options.slidesToScroll,counter+=_.options.slidesToScroll<=_.options.slidesToShow?_.options.slidesToScroll:_.options.slidesToShow;return indexes},Slick.prototype.getSlick=function(){return this},Slick.prototype.getSlideCount=function(){var slidesTraversed,swipedSlide,centerOffset,_=this;return centerOffset=_.options.centerMode===!0?_.slideWidth*Math.floor(_.options.slidesToShow/2):0,_.options.swipeToSlide===!0?(_.$slideTrack.find(".slick-slide").each(function(index,slide){if(slide.offsetLeft-centerOffset+$(slide).outerWidth()/2>_.swipeLeft*-1)return swipedSlide=slide,!1}),slidesTraversed=Math.abs($(swipedSlide).attr("data-slick-index")-_.currentSlide)||1):_.options.slidesToScroll},Slick.prototype.goTo=Slick.prototype.slickGoTo=function(slide,dontAnimate){var _=this;_.changeSlide({data:{message:"index",index:parseInt(slide)}},dontAnimate)},Slick.prototype.init=function(creation){var _=this;$(_.$slider).hasClass("slick-initialized")||($(_.$slider).addClass("slick-initialized"),_.buildRows(),_.buildOut(),_.setProps(),_.startLoad(),_.loadSlider(),_.initializeEvents(),_.updateArrows(),_.updateDots()),creation&&_.$slider.trigger("init",[_]),_.options.accessibility===!0&&_.initADA()},Slick.prototype.initArrowEvents=function(){var _=this;_.options.arrows===!0&&_.slideCount>_.options.slidesToShow&&(_.$prevArrow.on("click.slick",{message:"previous"},_.changeSlide),_.$nextArrow.on("click.slick",{message:"next"},_.changeSlide))},Slick.prototype.initDotEvents=function(){var _=this;_.options.dots===!0&&_.slideCount>_.options.slidesToShow&&$("li",_.$dots).on("click.slick",{message:"index"},_.changeSlide),_.options.dots===!0&&_.options.pauseOnDotsHover===!0&&_.options.autoplay===!0&&$("li",_.$dots).on("mouseenter.slick",$.proxy(_.setPaused,_,!0)).on("mouseleave.slick",$.proxy(_.setPaused,_,!1))},Slick.prototype.initializeEvents=function(){var _=this;_.initArrowEvents(),_.initDotEvents(),_.$list.on("touchstart.slick mousedown.slick",{action:"start"},_.swipeHandler),_.$list.on("touchmove.slick mousemove.slick",{action:"move"},_.swipeHandler),_.$list.on("touchend.slick mouseup.slick",{action:"end"},_.swipeHandler),_.$list.on("touchcancel.slick mouseleave.slick",{action:"end"},_.swipeHandler),_.$list.on("click.slick",_.clickHandler),$(document).on(_.visibilityChange,$.proxy(_.visibility,_)),_.$list.on("mouseenter.slick",$.proxy(_.setPaused,_,!0)),_.$list.on("mouseleave.slick",$.proxy(_.setPaused,_,!1)),_.options.accessibility===!0&&_.$list.on("keydown.slick",_.keyHandler),_.options.focusOnSelect===!0&&$(_.$slideTrack).children().on("click.slick",_.selectHandler),$(window).on("orientationchange.slick.slick-"+_.instanceUid,$.proxy(_.orientationChange,_)),$(window).on("resize.slick.slick-"+_.instanceUid,$.proxy(_.resize,_)),$("[draggable!=true]",_.$slideTrack).on("dragstart",_.preventDefault),$(window).on("load.slick.slick-"+_.instanceUid,_.setPosition),$(document).on("ready.slick.slick-"+_.instanceUid,_.setPosition)},Slick.prototype.initUI=function(){var _=this;_.options.arrows===!0&&_.slideCount>_.options.slidesToShow&&(_.$prevArrow.show(),_.$nextArrow.show()),_.options.dots===!0&&_.slideCount>_.options.slidesToShow&&_.$dots.show(),_.options.autoplay===!0&&_.autoPlay()},Slick.prototype.keyHandler=function(event){var _=this;event.target.tagName.match("TEXTAREA|INPUT|SELECT")||(37===event.keyCode&&_.options.accessibility===!0?_.changeSlide({data:{message:"previous"}}):39===event.keyCode&&_.options.accessibility===!0&&_.changeSlide({data:{message:"next"}}))},Slick.prototype.lazyLoad=function(){function loadImages(imagesScope){$("img[data-lazy]",imagesScope).each(function(){var image=$(this),imageSource=$(this).attr("data-lazy"),imageToLoad=document.createElement("img");imageToLoad.onload=function(){image.animate({opacity:0},100,function(){image.attr("src",imageSource).animate({opacity:1},200,function(){image.removeAttr("data-lazy").removeClass("slick-loading")})})},imageToLoad.src=imageSource})}var loadRange,cloneRange,rangeStart,rangeEnd,_=this;_.options.centerMode===!0?_.options.infinite===!0?(rangeStart=_.currentSlide+(_.options.slidesToShow/2+1),rangeEnd=rangeStart+_.options.slidesToShow+2):(rangeStart=Math.max(0,_.currentSlide-(_.options.slidesToShow/2+1)),rangeEnd=2+(_.options.slidesToShow/2+1)+_.currentSlide):(rangeStart=_.options.infinite?_.options.slidesToShow+_.currentSlide:_.currentSlide,rangeEnd=rangeStart+_.options.slidesToShow,_.options.fade===!0&&(rangeStart>0&&rangeStart--,rangeEnd<=_.slideCount&&rangeEnd++)),loadRange=_.$slider.find(".slick-slide").slice(rangeStart,rangeEnd),loadImages(loadRange),_.slideCount<=_.options.slidesToShow?(cloneRange=_.$slider.find(".slick-slide"),loadImages(cloneRange)):_.currentSlide>=_.slideCount-_.options.slidesToShow?(cloneRange=_.$slider.find(".slick-cloned").slice(0,_.options.slidesToShow),loadImages(cloneRange)):0===_.currentSlide&&(cloneRange=_.$slider.find(".slick-cloned").slice(_.options.slidesToShow*-1),loadImages(cloneRange))},Slick.prototype.loadSlider=function(){var _=this;_.setPosition(),_.$slideTrack.css({opacity:1}),_.$slider.removeClass("slick-loading"),_.initUI(),"progressive"===_.options.lazyLoad&&_.progressiveLazyLoad()},Slick.prototype.next=Slick.prototype.slickNext=function(){var _=this;_.changeSlide({data:{message:"next"}})},Slick.prototype.orientationChange=function(){var _=this;_.checkResponsive(),_.setPosition()},Slick.prototype.pause=Slick.prototype.slickPause=function(){var _=this;_.autoPlayClear(),_.paused=!0},Slick.prototype.play=Slick.prototype.slickPlay=function(){var _=this;_.paused=!1,_.autoPlay()},Slick.prototype.postSlide=function(index){var _=this;_.$slider.trigger("afterChange",[_,index]),_.animating=!1,_.setPosition(),_.swipeLeft=null,_.options.autoplay===!0&&_.paused===!1&&_.autoPlay(),_.options.accessibility===!0&&_.initADA()},Slick.prototype.prev=Slick.prototype.slickPrev=function(){var _=this;_.changeSlide({data:{message:"previous"}})},Slick.prototype.preventDefault=function(event){event.preventDefault()},Slick.prototype.progressiveLazyLoad=function(){var imgCount,targetImage,_=this;imgCount=$("img[data-lazy]",_.$slider).length,imgCount>0&&(targetImage=$("img[data-lazy]",_.$slider).first(),targetImage.attr("src",null),targetImage.attr("src",targetImage.attr("data-lazy")).removeClass("slick-loading").load(function(){targetImage.removeAttr("data-lazy"),_.progressiveLazyLoad(),_.options.adaptiveHeight===!0&&_.setPosition()}).error(function(){targetImage.removeAttr("data-lazy"),_.progressiveLazyLoad()}))},Slick.prototype.refresh=function(initializing){var currentSlide,firstVisible,_=this;firstVisible=_.slideCount-_.options.slidesToShow,_.options.infinite||(_.slideCount<=_.options.slidesToShow?_.currentSlide=0:_.currentSlide>firstVisible&&(_.currentSlide=firstVisible)),currentSlide=_.currentSlide,_.destroy(!0),$.extend(_,_.initials,{currentSlide:currentSlide}),_.init(),initializing||_.changeSlide({data:{message:"index",index:currentSlide}},!1)},Slick.prototype.registerBreakpoints=function(){var breakpoint,currentBreakpoint,l,_=this,responsiveSettings=_.options.responsive||null;if("array"===$.type(responsiveSettings)&&responsiveSettings.length){_.respondTo=_.options.respondTo||"window";for(breakpoint in responsiveSettings)if(l=_.breakpoints.length-1,currentBreakpoint=responsiveSettings[breakpoint].breakpoint,responsiveSettings.hasOwnProperty(breakpoint)){for(;l>=0;)_.breakpoints[l]&&_.breakpoints[l]===currentBreakpoint&&_.breakpoints.splice(l,1),l--;_.breakpoints.push(currentBreakpoint),_.breakpointSettings[currentBreakpoint]=responsiveSettings[breakpoint].settings}_.breakpoints.sort(function(a,b){return _.options.mobileFirst?a-b:b-a})}},Slick.prototype.reinit=function(){var _=this;_.$slides=_.$slideTrack.children(_.options.slide).addClass("slick-slide"),_.slideCount=_.$slides.length,_.currentSlide>=_.slideCount&&0!==_.currentSlide&&(_.currentSlide=_.currentSlide-_.options.slidesToScroll),_.slideCount<=_.options.slidesToShow&&(_.currentSlide=0),_.registerBreakpoints(),_.setProps(),_.setupInfinite(),_.buildArrows(),_.updateArrows(),_.initArrowEvents(),_.buildDots(),_.updateDots(),_.initDotEvents(),_.checkResponsive(!1,!0),_.options.focusOnSelect===!0&&$(_.$slideTrack).children().on("click.slick",_.selectHandler),_.setSlideClasses(0),_.setPosition(),_.$slider.trigger("reInit",[_]),_.options.autoplay===!0&&_.focusHandler()},Slick.prototype.resize=function(){var _=this;$(window).width()!==_.windowWidth&&(clearTimeout(_.windowDelay),_.windowDelay=window.setTimeout(function(){_.windowWidth=$(window).width(),_.checkResponsive(),_.unslicked||_.setPosition()},50))},Slick.prototype.removeSlide=Slick.prototype.slickRemove=function(index,removeBefore,removeAll){var _=this;return"boolean"==typeof index?(removeBefore=index,index=removeBefore===!0?0:_.slideCount-1):index=removeBefore===!0?--index:index,!(_.slideCount<1||index<0||index>_.slideCount-1)&&(_.unload(),removeAll===!0?_.$slideTrack.children().remove():_.$slideTrack.children(this.options.slide).eq(index).remove(),_.$slides=_.$slideTrack.children(this.options.slide),_.$slideTrack.children(this.options.slide).detach(),_.$slideTrack.append(_.$slides),_.$slidesCache=_.$slides,void _.reinit())},Slick.prototype.setCSS=function(position){var x,y,_=this,positionProps={};_.options.rtl===!0&&(position=-position),x="left"==_.positionProp?Math.ceil(position)+"px":"0px",y="top"==_.positionProp?Math.ceil(position)+"px":"0px",positionProps[_.positionProp]=position,_.transformsEnabled===!1?_.$slideTrack.css(positionProps):(positionProps={},_.cssTransitions===!1?(positionProps[_.animType]="translate("+x+", "+y+")",_.$slideTrack.css(positionProps)):(positionProps[_.animType]="translate3d("+x+", "+y+", 0px)",_.$slideTrack.css(positionProps)))},Slick.prototype.setDimensions=function(){var _=this;_.options.vertical===!1?_.options.centerMode===!0&&_.$list.css({padding:"0px "+_.options.centerPadding}):(_.$list.height(_.$slides.first().outerHeight(!0)*_.options.slidesToShow),_.options.centerMode===!0&&_.$list.css({padding:_.options.centerPadding+" 0px"})),_.listWidth=_.$list.width(),_.listHeight=_.$list.height(),_.options.vertical===!1&&_.options.variableWidth===!1?(_.slideWidth=Math.ceil(_.listWidth/_.options.slidesToShow),_.$slideTrack.width(Math.ceil(_.slideWidth*_.$slideTrack.children(".slick-slide").length))):_.options.variableWidth===!0?_.$slideTrack.width(5e3*_.slideCount):(_.slideWidth=Math.ceil(_.listWidth),_.$slideTrack.height(Math.ceil(_.$slides.first().outerHeight(!0)*_.$slideTrack.children(".slick-slide").length)));var offset=_.$slides.first().outerWidth(!0)-_.$slides.first().width();_.options.variableWidth===!1&&_.$slideTrack.children(".slick-slide").width(_.slideWidth-offset)},Slick.prototype.setFade=function(){var targetLeft,_=this;_.$slides.each(function(index,element){targetLeft=_.slideWidth*index*-1,_.options.rtl===!0?$(element).css({position:"relative",right:targetLeft,top:0,zIndex:_.options.zIndex-2,opacity:0}):$(element).css({position:"relative",left:targetLeft,top:0,zIndex:_.options.zIndex-2,opacity:0})}),_.$slides.eq(_.currentSlide).css({zIndex:_.options.zIndex-1,opacity:1})},Slick.prototype.setHeight=function(){var _=this;if(1===_.options.slidesToShow&&_.options.adaptiveHeight===!0&&_.options.vertical===!1){var targetHeight=_.$slides.eq(_.currentSlide).outerHeight(!0);_.$list.css("height",targetHeight)}},Slick.prototype.setOption=Slick.prototype.slickSetOption=function(option,value,refresh){var l,item,_=this;if("responsive"===option&&"array"===$.type(value))for(item in value)if("array"!==$.type(_.options.responsive))_.options.responsive=[value[item]];else{for(l=_.options.responsive.length-1;l>=0;)_.options.responsive[l].breakpoint===value[item].breakpoint&&_.options.responsive.splice(l,1),l--;_.options.responsive.push(value[item])}else _.options[option]=value;refresh===!0&&(_.unload(),_.reinit())},Slick.prototype.setPosition=function(){var _=this;_.setDimensions(),_.setHeight(),_.options.fade===!1?_.setCSS(_.getLeft(_.currentSlide)):_.setFade(),_.$slider.trigger("setPosition",[_])},Slick.prototype.setProps=function(){var _=this,bodyStyle=document.body.style;_.positionProp=_.options.vertical===!0?"top":"left","top"===_.positionProp?_.$slider.addClass("slick-vertical"):_.$slider.removeClass("slick-vertical"),void 0===bodyStyle.WebkitTransition&&void 0===bodyStyle.MozTransition&&void 0===bodyStyle.msTransition||_.options.useCSS===!0&&(_.cssTransitions=!0),_.options.fade&&("number"==typeof _.options.zIndex?_.options.zIndex<3&&(_.options.zIndex=3):_.options.zIndex=_.defaults.zIndex),void 0!==bodyStyle.OTransform&&(_.animType="OTransform",_.transformType="-o-transform",_.transitionType="OTransition",void 0===bodyStyle.perspectiveProperty&&void 0===bodyStyle.webkitPerspective&&(_.animType=!1)),void 0!==bodyStyle.MozTransform&&(_.animType="MozTransform",_.transformType="-moz-transform",_.transitionType="MozTransition",void 0===bodyStyle.perspectiveProperty&&void 0===bodyStyle.MozPerspective&&(_.animType=!1)),void 0!==bodyStyle.webkitTransform&&(_.animType="webkitTransform",_.transformType="-webkit-transform",_.transitionType="webkitTransition",void 0===bodyStyle.perspectiveProperty&&void 0===bodyStyle.webkitPerspective&&(_.animType=!1)),void 0!==bodyStyle.msTransform&&(_.animType="msTransform",_.transformType="-ms-transform",_.transitionType="msTransition",void 0===bodyStyle.msTransform&&(_.animType=!1)),void 0!==bodyStyle.transform&&_.animType!==!1&&(_.animType="transform",_.transformType="transform",_.transitionType="transition"),_.transformsEnabled=_.options.useTransform&&null!==_.animType&&_.animType!==!1},Slick.prototype.setSlideClasses=function(index){var centerOffset,allSlides,indexOffset,remainder,_=this;allSlides=_.$slider.find(".slick-slide").removeClass("slick-active slick-center slick-current").attr("aria-hidden","true"),_.$slides.eq(index).addClass("slick-current"),_.options.centerMode===!0?(centerOffset=Math.floor(_.options.slidesToShow/2),_.options.infinite===!0&&(index>=centerOffset&&index<=_.slideCount-1-centerOffset?_.$slides.slice(index-centerOffset,index+centerOffset+1).addClass("slick-active").attr("aria-hidden","false"):(indexOffset=_.options.slidesToShow+index,allSlides.slice(indexOffset-centerOffset+1,indexOffset+centerOffset+2).addClass("slick-active").attr("aria-hidden","false")),0===index?allSlides.eq(allSlides.length-1-_.options.slidesToShow).addClass("slick-center"):index===_.slideCount-1&&allSlides.eq(_.options.slidesToShow).addClass("slick-center")),_.$slides.eq(index).addClass("slick-center")):index>=0&&index<=_.slideCount-_.options.slidesToShow?_.$slides.slice(index,index+_.options.slidesToShow).addClass("slick-active").attr("aria-hidden","false"):allSlides.length<=_.options.slidesToShow?allSlides.addClass("slick-active").attr("aria-hidden","false"):(remainder=_.slideCount%_.options.slidesToShow,indexOffset=_.options.infinite===!0?_.options.slidesToShow+index:index,_.options.slidesToShow==_.options.slidesToScroll&&_.slideCount-index<_.options.slidesToShow?allSlides.slice(indexOffset-(_.options.slidesToShow-remainder),indexOffset+remainder).addClass("slick-active").attr("aria-hidden","false"):allSlides.slice(indexOffset,indexOffset+_.options.slidesToShow).addClass("slick-active").attr("aria-hidden","false")),"ondemand"===_.options.lazyLoad&&_.lazyLoad()},Slick.prototype.setupInfinite=function(){var i,slideIndex,infiniteCount,_=this;if(_.options.fade===!0&&(_.options.centerMode=!1),_.options.infinite===!0&&_.options.fade===!1&&(slideIndex=null,_.slideCount>_.options.slidesToShow)){for(infiniteCount=_.options.centerMode===!0?_.options.slidesToShow+1:_.options.slidesToShow,i=_.slideCount;i>_.slideCount-infiniteCount;i-=1)slideIndex=i-1,$(_.$slides[slideIndex]).clone(!0).attr("id","").attr("data-slick-index",slideIndex-_.slideCount).prependTo(_.$slideTrack).addClass("slick-cloned");for(i=0;i<infiniteCount;i+=1)slideIndex=i,$(_.$slides[slideIndex]).clone(!0).attr("id","").attr("data-slick-index",slideIndex+_.slideCount).appendTo(_.$slideTrack).addClass("slick-cloned");_.$slideTrack.find(".slick-cloned").find("[id]").each(function(){$(this).attr("id","")})}},Slick.prototype.setPaused=function(paused){var _=this;_.options.autoplay===!0&&_.options.pauseOnHover===!0&&(_.paused=paused,paused?_.autoPlayClear():_.autoPlay())},Slick.prototype.selectHandler=function(event){var _=this,targetElement=$(event.target).is(".slick-slide")?$(event.target):$(event.target).parents(".slick-slide"),index=parseInt(targetElement.attr("data-slick-index"));return index||(index=0),_.slideCount<=_.options.slidesToShow?(_.setSlideClasses(index),void _.asNavFor(index)):void _.slideHandler(index)},Slick.prototype.slideHandler=function(index,sync,dontAnimate){var targetSlide,animSlide,oldSlide,slideLeft,targetLeft=null,_=this;if(sync=sync||!1,(_.animating!==!0||_.options.waitForAnimate!==!0)&&!(_.options.fade===!0&&_.currentSlide===index||_.slideCount<=_.options.slidesToShow))return sync===!1&&_.asNavFor(index),targetSlide=index,targetLeft=_.getLeft(targetSlide),slideLeft=_.getLeft(_.currentSlide),_.currentLeft=null===_.swipeLeft?slideLeft:_.swipeLeft,_.options.infinite===!1&&_.options.centerMode===!1&&(index<0||index>_.getDotCount()*_.options.slidesToScroll)?void(_.options.fade===!1&&(targetSlide=_.currentSlide,dontAnimate!==!0?_.animateSlide(slideLeft,function(){_.postSlide(targetSlide)}):_.postSlide(targetSlide))):_.options.infinite===!1&&_.options.centerMode===!0&&(index<0||index>_.slideCount-_.options.slidesToScroll)?void(_.options.fade===!1&&(targetSlide=_.currentSlide,dontAnimate!==!0?_.animateSlide(slideLeft,function(){_.postSlide(targetSlide)}):_.postSlide(targetSlide))):(_.options.autoplay===!0&&clearInterval(_.autoPlayTimer),animSlide=targetSlide<0?_.slideCount%_.options.slidesToScroll!==0?_.slideCount-_.slideCount%_.options.slidesToScroll:_.slideCount+targetSlide:targetSlide>=_.slideCount?_.slideCount%_.options.slidesToScroll!==0?0:targetSlide-_.slideCount:targetSlide,_.animating=!0,_.$slider.trigger("beforeChange",[_,_.currentSlide,animSlide]),oldSlide=_.currentSlide,_.currentSlide=animSlide,_.setSlideClasses(_.currentSlide),_.updateDots(),_.updateArrows(),_.options.fade===!0?(dontAnimate!==!0?(_.fadeSlideOut(oldSlide),_.fadeSlide(animSlide,function(){_.postSlide(animSlide)})):_.postSlide(animSlide),void _.animateHeight()):void(dontAnimate!==!0?_.animateSlide(targetLeft,function(){_.postSlide(animSlide)}):_.postSlide(animSlide)))},Slick.prototype.startLoad=function(){var _=this;_.options.arrows===!0&&_.slideCount>_.options.slidesToShow&&(_.$prevArrow.hide(),_.$nextArrow.hide()),_.options.dots===!0&&_.slideCount>_.options.slidesToShow&&_.$dots.hide(),_.$slider.addClass("slick-loading")},Slick.prototype.swipeDirection=function(){var xDist,yDist,r,swipeAngle,_=this;return xDist=_.touchObject.startX-_.touchObject.curX,yDist=_.touchObject.startY-_.touchObject.curY,r=Math.atan2(yDist,xDist),swipeAngle=Math.round(180*r/Math.PI),swipeAngle<0&&(swipeAngle=360-Math.abs(swipeAngle)),swipeAngle<=45&&swipeAngle>=0?_.options.rtl===!1?"left":"right":swipeAngle<=360&&swipeAngle>=315?_.options.rtl===!1?"left":"right":swipeAngle>=135&&swipeAngle<=225?_.options.rtl===!1?"right":"left":_.options.verticalSwiping===!0?swipeAngle>=35&&swipeAngle<=135?"left":"right":"vertical"},Slick.prototype.swipeEnd=function(event){var slideCount,_=this;if(_.dragging=!1,_.shouldClick=!(_.touchObject.swipeLength>10),void 0===_.touchObject.curX)return!1;if(_.touchObject.edgeHit===!0&&_.$slider.trigger("edge",[_,_.swipeDirection()]),_.touchObject.swipeLength>=_.touchObject.minSwipe)switch(_.swipeDirection()){case"left":slideCount=_.options.swipeToSlide?_.checkNavigable(_.currentSlide+_.getSlideCount()):_.currentSlide+_.getSlideCount(),_.slideHandler(slideCount),_.currentDirection=0,_.touchObject={},_.$slider.trigger("swipe",[_,"left"]);break;case"right":slideCount=_.options.swipeToSlide?_.checkNavigable(_.currentSlide-_.getSlideCount()):_.currentSlide-_.getSlideCount(),_.slideHandler(slideCount),_.currentDirection=1,_.touchObject={},_.$slider.trigger("swipe",[_,"right"])}else _.touchObject.startX!==_.touchObject.curX&&(_.slideHandler(_.currentSlide),_.touchObject={})},Slick.prototype.swipeHandler=function(event){var _=this;if(!(_.options.swipe===!1||"ontouchend"in document&&_.options.swipe===!1||_.options.draggable===!1&&event.type.indexOf("mouse")!==-1))switch(_.touchObject.fingerCount=event.originalEvent&&void 0!==event.originalEvent.touches?event.originalEvent.touches.length:1,_.touchObject.minSwipe=_.listWidth/_.options.touchThreshold,_.options.verticalSwiping===!0&&(_.touchObject.minSwipe=_.listHeight/_.options.touchThreshold),event.data.action){case"start":_.swipeStart(event);break;case"move":_.swipeMove(event);break;case"end":_.swipeEnd(event)}},Slick.prototype.swipeMove=function(event){var curLeft,swipeDirection,swipeLength,positionOffset,touches,_=this;return touches=void 0!==event.originalEvent?event.originalEvent.touches:null,!(!_.dragging||touches&&1!==touches.length)&&(curLeft=_.getLeft(_.currentSlide),_.touchObject.curX=void 0!==touches?touches[0].pageX:event.clientX,_.touchObject.curY=void 0!==touches?touches[0].pageY:event.clientY,_.touchObject.swipeLength=Math.round(Math.sqrt(Math.pow(_.touchObject.curX-_.touchObject.startX,2))),_.options.verticalSwiping===!0&&(_.touchObject.swipeLength=Math.round(Math.sqrt(Math.pow(_.touchObject.curY-_.touchObject.startY,2)))),swipeDirection=_.swipeDirection(),"vertical"!==swipeDirection?(void 0!==event.originalEvent&&_.touchObject.swipeLength>4&&event.preventDefault(),positionOffset=(_.options.rtl===!1?1:-1)*(_.touchObject.curX>_.touchObject.startX?1:-1),_.options.verticalSwiping===!0&&(positionOffset=_.touchObject.curY>_.touchObject.startY?1:-1),swipeLength=_.touchObject.swipeLength,_.touchObject.edgeHit=!1,_.options.infinite===!1&&(0===_.currentSlide&&"right"===swipeDirection||_.currentSlide>=_.getDotCount()&&"left"===swipeDirection)&&(swipeLength=_.touchObject.swipeLength*_.options.edgeFriction,_.touchObject.edgeHit=!0),_.options.vertical===!1?_.swipeLeft=curLeft+swipeLength*positionOffset:_.swipeLeft=curLeft+swipeLength*(_.$list.height()/_.listWidth)*positionOffset,_.options.verticalSwiping===!0&&(_.swipeLeft=curLeft+swipeLength*positionOffset),_.options.fade!==!0&&_.options.touchMove!==!1&&(_.animating===!0?(_.swipeLeft=null,!1):void _.setCSS(_.swipeLeft))):void 0);
},Slick.prototype.swipeStart=function(event){var touches,_=this;return 1!==_.touchObject.fingerCount||_.slideCount<=_.options.slidesToShow?(_.touchObject={},!1):(void 0!==event.originalEvent&&void 0!==event.originalEvent.touches&&(touches=event.originalEvent.touches[0]),_.touchObject.startX=_.touchObject.curX=void 0!==touches?touches.pageX:event.clientX,_.touchObject.startY=_.touchObject.curY=void 0!==touches?touches.pageY:event.clientY,void(_.dragging=!0))},Slick.prototype.unfilterSlides=Slick.prototype.slickUnfilter=function(){var _=this;null!==_.$slidesCache&&(_.unload(),_.$slideTrack.children(this.options.slide).detach(),_.$slidesCache.appendTo(_.$slideTrack),_.reinit())},Slick.prototype.unload=function(){var _=this;$(".slick-cloned",_.$slider).remove(),_.$dots&&_.$dots.remove(),_.$prevArrow&&_.htmlExpr.test(_.options.prevArrow)&&_.$prevArrow.remove(),_.$nextArrow&&_.htmlExpr.test(_.options.nextArrow)&&_.$nextArrow.remove(),_.$slides.removeClass("slick-slide slick-active slick-visible slick-current").attr("aria-hidden","true").css("width","")},Slick.prototype.unslick=function(fromBreakpoint){var _=this;_.$slider.trigger("unslick",[_,fromBreakpoint]),_.destroy()},Slick.prototype.updateArrows=function(){var centerOffset,_=this;centerOffset=Math.floor(_.options.slidesToShow/2),_.options.arrows===!0&&_.slideCount>_.options.slidesToShow&&!_.options.infinite&&(_.$prevArrow.removeClass("slick-disabled").attr("aria-disabled","false"),_.$nextArrow.removeClass("slick-disabled").attr("aria-disabled","false"),0===_.currentSlide?(_.$prevArrow.addClass("slick-disabled").attr("aria-disabled","true"),_.$nextArrow.removeClass("slick-disabled").attr("aria-disabled","false")):_.currentSlide>=_.slideCount-_.options.slidesToShow&&_.options.centerMode===!1?(_.$nextArrow.addClass("slick-disabled").attr("aria-disabled","true"),_.$prevArrow.removeClass("slick-disabled").attr("aria-disabled","false")):_.currentSlide>=_.slideCount-1&&_.options.centerMode===!0&&(_.$nextArrow.addClass("slick-disabled").attr("aria-disabled","true"),_.$prevArrow.removeClass("slick-disabled").attr("aria-disabled","false")))},Slick.prototype.updateDots=function(){var _=this;null!==_.$dots&&(_.$dots.find("li").removeClass("slick-active").attr("aria-hidden","true"),_.$dots.find("li").eq(Math.floor(_.currentSlide/_.options.slidesToScroll)).addClass("slick-active").attr("aria-hidden","false"))},Slick.prototype.visibility=function(){var _=this;document[_.hidden]?(_.paused=!0,_.autoPlayClear()):_.options.autoplay===!0&&(_.paused=!1,_.autoPlay())},Slick.prototype.initADA=function(){var _=this;_.$slides.add(_.$slideTrack.find(".slick-cloned")).attr({"aria-hidden":"true",tabindex:"-1"}).find("a, input, button, select").attr({tabindex:"-1"}),_.$slideTrack.attr("role","listbox"),_.$slides.not(_.$slideTrack.find(".slick-cloned")).each(function(i){$(this).attr({role:"option","aria-describedby":"slick-slide"+_.instanceUid+i})}),null!==_.$dots&&_.$dots.attr("role","tablist").find("li").each(function(i){$(this).attr({role:"presentation","aria-selected":"false","aria-controls":"navigation"+_.instanceUid+i,id:"slick-slide"+_.instanceUid+i})}).first().attr("aria-selected","true").end().find("button").attr("role","button").end().closest("div").attr("role","toolbar"),_.activateADA()},Slick.prototype.activateADA=function(){var _=this;_.$slideTrack.find(".slick-active").attr({"aria-hidden":"false"}).find("a, input, button, select").attr({tabindex:"0"})},Slick.prototype.focusHandler=function(){var _=this;_.$slider.on("focus.slick blur.slick","*",function(event){event.stopImmediatePropagation();var sf=$(this);setTimeout(function(){_.isPlay&&(sf.is(":focus")?(_.autoPlayClear(),_.paused=!0):(_.paused=!1,_.autoPlay()))},0)})},$.fn.slick=function(){var i,ret,_=this,opt=arguments[0],args=Array.prototype.slice.call(arguments,1),l=_.length;for(i=0;i<l;i++)if("object"==typeof opt||"undefined"==typeof opt?_[i].slick=new Slick(_[i],opt):ret=_[i].slick[opt].apply(_[i].slick,args),"undefined"!=typeof ret)return ret;return _}}),$.feature("f_facebook",function(){var fb_root=$("#fb-root");if(0===fb_root.length)return $.facebook=function(options){options=$.extend({disabled:function(){}},options),options.disabled()},void($.facebook_ready=function(callback){callback()});var accepted_permissions={},StateEnum={START:1,LOADING:2,READY:3},state=StateEnum.START,ready_callbacks=[];if(window.fbAsyncInit=function(){FB.init({appId:fb_root.data("client_id"),status:!0,cookie:!0,xfbml:!0,oauth:!0,version:"v2.2"}),state=StateEnum.READY;for(var i=0;i<ready_callbacks.length;++i)ready_callbacks[i]()},$.facebook=function(options){if(options=$.extend({success:function(FB){},failure:function(response){},check_permissions:!1,permissions:""},options),state!==StateEnum.READY)throw"$.facebook() called too early.";return void 0!==accepted_permissions[options.permissions]?void options.success(FB):void FB.login(function(response){if(!response.authResponse)return void options.failure(response);var success=function(){accepted_permissions[options.permissions]=!0,state=StateEnum.READY,options.success(FB)};return options.check_permissions?void FB.api("/me/permissions",function(permissions_response){var test=function(){for(var perms=options.permissions.split(","),i=0;i<perms.length;++i)if(0!==perms[i].length&&1!==permissions_response.data[0][perms[i]])return!1;return!0};test()?success():options.failure(response)}):void success()},{scope:options.permissions})},$.facebook_ready=function(callback){return state===StateEnum.READY?void callback():void ready_callbacks.push(callback)},state===StateEnum.START){state=StateEnum.LOADING;var elem=document.createElement("script");elem.async=!0,elem.src=document.location.protocol+"//connect.facebook.net/en_US/sdk.js",fb_root.append(elem)}}),$.feature("f_facebook",function(){$("input[type=checkbox][data-requires_facebook_permissions]").on("change",function(){var checkbox=$(this);if(checkbox.is(":checked")){checkbox.prop("checked",!1),checkbox.attr("disabled",!0);var done=function(){checkbox.prop("checked",!0),checkbox.attr("disabled",!1)};$.facebook({success:function(FB){$.post(checkbox.data("facebook_update_url"),{access_token:FB.getAccessToken()},done)},disabled:function(){$.post(checkbox.data("facebook_update_url"),{access_token:"dummy"},done)},permissions:checkbox.data("requires_facebook_permissions"),check_permissions:!0})}})}),$.feature("f_messages",function(){$.extend({message:function(options){return options=$.extend({level:"success",message:"",hide_after:3e3},options),$('<div class="alert"/>').addClass("alert-"+("error"==options.level?"danger":options.level)).text(options.message).appendTo(".js-alerts").hide().slideDown(function(){var elem=$(this);0!==options.hide_after&&setTimeout(function(){elem.slideUp(function(){elem.remove()})},options.hide_after)})}})}),$.feature("f_messages",function(){$(document).ajaxComplete(function(event,xhr,settings){try{data=$.parseJSON(xhr.responseText)}catch(e){return}$.each(data.__messages__||[],function(){$.message({level:this.level,message:this.message})})})}),$.feature("f_product_outfit_recommendations",function(){$("body").on("show-outfit-recommendations",".js-outfit-recommendations",function(){var elem=$(this),xhrUrl=elem.data("url");xhrUrl&&$.get(elem.data("url")).success(function(result){updateDOM(elem,result),elem.find(".js-lazy-load").each(function(){$(this).css("background-image",$(this).data("background-image"))})}).error(function(){$(elem.data("target-container")).addClass("hidden")})})}),$.feature("f_product_similar_item_colours",function(){$("body").on("show-similar-item-colours",".js-similar-item-colours",function(){var elem=$(this),xhrUrl=elem.data("url");xhrUrl&&$.get(xhrUrl,function(resp){"success"===resp.status&&(elem.html(resp.html),elem.find(".js-lazy-load").each(function(){var $self=$(this);$self.css("background-image",$self.data("background-image"))}),$(elem.data("target-container")).removeClass("hidden"))})})}),$.feature("f_product_wear_it_with",function(){$("body").on("show-wear-it-with",".js-wear-it-with",function(e){var elem=$(this);$.get(elem.data("url"),function(resp){"success"===resp.status&&(elem.html(resp.html),elem.closest("collapse").addClass("in"),$(elem.data("target-container")).removeClass("hidden"))})})}),$.feature("f_billing",function(){var cvc=$("#cvc"),number=$("#number"),exp_month=$("#exp_month"),exp_year=$("#exp_year"),name_on_card=$(".js-billing-name-on-card"),address_line1=$(".js-billing-address-1"),address_line2=$(".js-billing-address-2"),address_city=$(".js-billing-city"),address_state=$(".js-billing-address-state"),address_zip=$(".js-billing-zip"),address_country=$(".js-billing-country"),err_number=$(".js-error-number"),err_cvc=$(".js-error-cvc"),err_expiry=$(".js-error-expiry");$(".js-billing-button").click(function(){var valid=!0,button=$(this);if(button.hasClass("disabled"))return!1;$("#declined").hide(),cvc.removeClass("error"),number.removeClass("error"),exp_month.removeClass("error"),exp_year.removeClass("error"),err_number.hide(),err_cvc.hide(),err_expiry.hide();var params={cvc:cvc.val(),number:number.val(),exp_month:exp_month.val(),exp_year:exp_year.val(),name:name_on_card.val(),address_line1:address_line1.val(),address_line2:address_line2.val(),address_city:address_city.val(),address_state:address_state.val(),address_zip:address_zip.val(),address_country:address_country.val()},errors=[];return $.map([[[number],Stripe.validateCardNumber(params.number),err_number],[[cvc],Stripe.validateCVC(params.cvc),err_cvc],[[exp_month,exp_year],Stripe.validateExpiry(params.exp_month,params.exp_year),err_expiry]],function(elem){var els=elem[0],part_valid=elem[1],msg=elem[2];if(!part_valid){msg.show(),errors.push({message:msg.text()});for(var i=0;i<els.length;i++)els[i].addClass("error")}valid=valid&&part_valid}),valid?(button.addClass("disabled"),$(".loading").show(),Stripe.createToken(params,function(status,response){return response.error?($("#declined").text(response.error.message),$("#declined").show(),$(".loading").hide(),void button.removeClass("disabled")):($("#stripe_token").val(response.id),void $("#stripe_token").parents("form").submit())}),!1):($("body").scrollTo(".error-message:visible, input.error"),!1)}),number.on("keydown",function(e){var digit,lastDigits,value;if(digit=String.fromCharCode(e.which),/^\d+$/.test(digit))return value=number.val(),lastDigits="American Express"===Stripe.cardType(value)?value.match(/^(\d{4}|\d{4}\s\d{6})$/):value.match(/(?:^|\s)(\d{4})$/),lastDigits?number.val(value+" "):void 0}),""===number.val()&&number.focus()}),$.feature("f_box",function(){function open(hard){isBoxOpen=!0,box.addClass("display"),hard&&box.addClass("display-hard"),box.addClass("box-opened"),localStorage.setItem("thread.box.opened",(new Date).getTime())}function close(hard){box.bind(transitionEndEvent,function(){isBoxOpen=!1,box.unbind(transitionEndEvent)}),clearTimeout(boxOpenTimer),box.removeClass("display"),hard&&box.removeClass("display-hard")}function toggleOpenClose(hard){isBoxOpen?close(hard):open(hard)}function getDaysSinceOpened(){if(!localStorage.getItem("thread.box.opened"))return 0;var lastOpened=new Date(Number(localStorage.getItem("thread.box.opened"))),now=new Date,difference=now-lastOpened,days=difference/864e5;return days}var boxOpenTimer,box=$(".js-box"),transitionEndEvent="transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",isBoxOpen=!1,scrollbarWidth=15;box.bind("open",function(e,hard){open(hard)}),box.bind("close",function(e,hard){close(hard)}),box.css("display",""),getDaysSinceOpened()>=30&&setTimeout(function(){box.addClass("show-tooltip"),setTimeout(function(){box.removeClass("show-tooltip")},6e3)},2e3),$("body").on("click",".sidebar-body-overlay",function(e){e.preventDefault(),close(!0)}),$("body").on("click",".js-toggle-box-hard",function(e){$(window).width()<=991||(e.preventDefault(),toggleOpenClose(!0))}),$("body").on("click",".js-box-tab",function(e){e.preventDefault(),open(!0)}),$("body").on("mouseenter",".js-box-sidebar",function(e){box.hasClass("display-hard")||isBoxOpen||e.pageX>=$(window).width()-scrollbarWidth||(boxOpenTimer=setTimeout(function(){open()},300),$(window).unbind(".hideSidebarOnScroll"))}),$("body").on("mouseleave",".js-box-sidebar",function(){box.hasClass("display-hard")||close()}),$("body").on("change",".js-free-tee-size-selector",function(){$.post($(this).val(),function(){})})}),$.feature("f_brand_size_guides",function(){function setIframeHeight($iframe){$iframe.height($iframe.contents().height())}function isPortrait(){return $(window).height()>$(window).width()}function flipTable(tableEl,doc){if(!isPortrait())return $(tableEl);var tbl=$(tableEl).clone();$("body",doc).append(tbl);var contentRows=tbl.find("tr:not(:eq(0))").clone(),labelCells=tbl.find("tr:not(:eq(0)) td:nth-child(1)").clone(),sizeNameCells=tbl.find("tr:eq(0) td:not(:eq(0))").clone();return tbl.find("td:not(td:eq(0))").remove(),tbl.find("tr:not(tr:eq(0))").remove(),tbl.find("tr:eq(0)").append(labelCells),sizeNameCells.each(function(i,el){var sizeInfo=contentRows.find("td:eq("+(i+1)+")"),newTr=$("<tr>",doc);newTr.append(el),newTr.append(sizeInfo.clone()),tbl.append(newTr)}),$(tableEl).replaceWith(tbl),tbl}function fixStyles(tableEl){var tbl=$(tableEl);isPortrait()?(tbl.find("tr td:first-child").css("border-right","solid 1px black"),tbl.find("tr td:first-child span").css("font-weight","700"),tbl.find("tr td:not(:last-child):not(:first-child)").css("border-right","solid 1px #d9d9d9")):(tbl.find("tr:not(:last-child):not(:first-child)").css("border-bottom","solid 1px #d9d9d9"),tbl.find("tr:first-child span").css("font-weight","700"),tbl.find("tr:first-child").css("border-bottom","solid 1px black"))}function flipTables(doc){$("table:has(tr:eq(0) td:eq(2))",doc).each(function(i,el){var flippedTable=flipTable(el,doc);fixStyles(flippedTable)})}function removeAllMatchingElements(selector,doc){doc.querySelectorAll(selector).forEach(function(el){el.parentElement.removeChild(el)})}function writeDocToIframe(ifr,doc){ifr&&ifr.contentDocument&&(ifr.contentDocument.open(),ifr.contentDocument.write(doc),removeAllMatchingElements("#header",ifr.contentDocument),removeAllMatchingElements("#footer",ifr.contentDocument),removeAllMatchingElements("script",ifr.contentDocument),removeAllMatchingElements("p.c15",ifr.contentDocument),flipTables(ifr.contentDocument),$("table",ifr.contentDocument).css("margin","0 auto"),ifr.contentDocument.close())}function updateSizeGuide(item){item.sizeGuideUrl&&"%s"!=item.sizeGuideUrl&&$.ajax(item.sizeGuideUrl).then(function(doc){item.brand&&$(".size-guide-title .brand-name").text(item.brand);var ifr=$(".size-guide iframe")[0];if(ifr){ifr.contentDocument&&writeDocToIframe(ifr,doc);var $iframe=$(ifr);$iframe.load(function(){writeDocToIframe(ifr,doc),setIframeHeight($iframe)}),$(".size-guide-link").show()}})}$("body").on("click",".size-guide-close-link",function(e){e.preventDefault(),e.stopPropagation(),$(".item-info").show(),$(".size-guide").hide()}),$("body").on("click",".size-guide-link",function(e){e.preventDefault(),e.stopPropagation(),$(".item-info").hide(),$(".size-guide").show(),$("body").scrollTo(0,0);var $iframe=$(".size-guide iframe");setIframeHeight($iframe),$.ajax({url:"/events",type:"POST",data:JSON.stringify({size_guide_view:{item_colour_id:$(e.toElement).attr("data-item-colour-id"),user_id:$(e.toElement).attr("data-user-id"),brand_id:$(e.toElement).attr("data-brand-id")}})})});var sizeGuideUrl=$(".size-guide iframe").attr("data-size-guide-url");sizeGuideUrl&&updateSizeGuide({sizeGuideUrl:sizeGuideUrl}),$("body").on("sidebarItemChanged",function(e,changedItem){updateSizeGuide(changedItem)})}),$.feature("f_browse_occasions",function(){var initial=$(".js-occasions-placeholder");initial.length>0&&$.get(initial.data("url"),function(resp){initial.html(resp.html)})}),$.feature("f_callout_review",function(){$(".js-callout-delete").on("click",function(e){e.preventDefault();var el=$(this);confirm(el.data("confirm-text"))&&(el.button("loading"),$.ajax({url:el.data("url")}).done(function(){el.parents(".js-callout-row").remove()}))})}),$.feature("f_cart_overlay",function(){$("body").on("click",".js-show-cart-overlay",function(e){e.metaKey||e.shiftKey||e.ctrlKey||e.altKey||$(window).width()<=768||$(window).height()<=600||(e.preventDefault(),$("body").css("overflow","hidden"),$(".js-cart-overlay").removeClass("hidden").addClass("slide-up"),$(".js-cart-overlay-background").removeClass("hidden"))}),$("body").on("click",".js-hide-cart-overlay",function(){$(".js-cart-overlay").addClass("hidden"),$(".js-cart-overlay-background").addClass("hidden"),$("body").removeAttr("style")}),$(document).on("keydown",function(e){var escKey=27,cart_overlay=$(".js-cart-overlay");e.which!==escKey||cart_overlay.hasClass("hidden")||(e.preventDefault(),cart_overlay.addClass("hidden"),$(".js-cart-overlay-background").addClass("hidden"),$("body").removeAttr("style"))})}),$.feature("f_cart_review",function(){$("body").on("click",".js-place-order button",function(){var button=$(this),buttons=$(".js-place-order button"),error=$(".js-order-error"),loading=buttons.siblings(".loading");if(button.hasClass("disabled"))return!1;buttons.addClass("disabled"),error.hide(),loading.show(),buttons.addClass("loading");var data={viewport_width:$(window).width(),viewport_height:$(window).height()};$.post(button.data("url"),data,function(attempt){var count=0,poll_enabled=!0,poll_timeout=null;!function poll(){return count>=10?(clearTimeout(poll_timeout),poll_enabled=!1,$(".js-order-warning").show(),loading.hide(),void buttons.hide()):void $.get(attempt.url,function(data){switch(data.state){case"success":window.location.href=data.success_url,poll_enabled=!1;break;case"in_progress":break;default:poll_enabled=!1,error.html(data.response).show(),loading.hide(),buttons.removeClass("disabled loading")}}).always(function(){poll_enabled&&(poll_timeout=setTimeout(poll,Math.min(500*++count,2e3)))})}()})})}),$.feature("f_cart_review",function(){var container=$(".js-payment-details");$.get(container.data("url")).done(function(data){container.find(".js-card-type").text(data.type),container.find(".js-card-last4").text(data.last4),container.find(".js-card-exp-month").text(data.exp_month),container.find(".js-card-exp-year").text(data.exp_year)}).always(function(){container.siblings(".js-spinner").hide()})}),$.feature("f_cart_review",function(){var container=$(".js-upsell-container");$.get(container.data("url")).success(function(response){updateDOM(container,response)}).error(function(){$(".js-upsell-wrapper").remove()}),container.on("click",".category .show-more",function(){var button=$(this),candidates=button.parents(".category").find(".item");candidates.filter(":hidden").show(),0===candidates.filter(":hidden").length&&button.hide()})}),$.feature("f_cart2",function(){function update_cart(){var wrapper=$(".js-cart2-wrapper");$.get(wrapper.data("url"),function(resp){wrapper.replaceWith(resp.html)}),update_box()}function update_box(){var box=$(".js-box");0!==box.length&&$.get(box.data("url")).done(function(resp){updateDOM(box,resp),box.removeClass("loading");var num_items=box.find(".box-item");0===num_items.length&&box.trigger("close",!0),$(window).bind("scroll.hideSidebarOnScroll",function(){box.trigger("close",!0),$(window).unbind(".hideSidebarOnScroll")})})}$("body").on("click",".js-add-to-cart",function(e){e.preventDefault();var button=$(this),cart=$(".js-cart"),item=button.parents(".js-item-detail, .js-hero-item, .js-upsell-item, .js-add-to-cart-item"),sizeSelector=item.find(".js-size-selector"),url=sizeSelector.data("add-to-cart-url")||sizeSelector.val(),itemModal=$(this).parents(".item-quickview"),navigation=$(".navigation"),box=$(".js-box");button.addClass("loading"),navigation.removeClass("slide-cart-in"),box.addClass("loading"),button.hasClass("disabled")||(button.addClass("disabled loading"),$("body").trigger("cartChange"),$.ajax({url:url,type:"POST"}).done(function(result){itemModal.length>0&&(itemModal.addClass("slide"),setTimeout(function(){itemModal.find(".item-quickview-close").trigger("click")},600)),cart.children(".navigation-cart").hasClass("empty-cart")&&navigation.addClass("slide-cart-in"),cart.replaceWith(result.html),box.addClass("display"),update_cart(),$(window).bind("scroll.hideSidebarOnScroll",function(){box.removeClass("display"),$(window).unbind(".hideSidebarOnScroll")})}).always(function(){button.removeClass("disabled loading")}))}),$("body").on("click",".js-remove-from-cart",function(e){e.preventDefault();var button=$(this),item=button.parents(".cart-item, .box-item"),cart=$(".js-cart"),box=$(".js-box"),cart_overlay=$(".js-cart-overlay"),navigation=$(".js-navigation"),box_exists=box.length>0;item.addClass("removing"),cart_overlay.addClass("loading"),box.addClass("loading"),navigation.removeClass("slide-cart-in"),$.ajax({url:button.attr("data-url"),type:"POST"}).done(function(response){box_exists?(cart.replaceWith($(response.html)),update_box()):item.slideUp(300,function(){var contents=$(response.html);contents.find(".js-cart-overlay").removeClass("hidden"),contents.find(".js-cart-overlay-background").removeClass("hidden"),cart.replaceWith(contents)})})}),$("body").on("click",".js-cart2-wrapper .js-remove-from-cart",function(e){e.preventDefault();var button=$(this);button.text("Removing..."),$.ajax({url:button.data("url"),type:"POST"}).done(function(){update_cart()})}),$("body").on("change",".js-quantity",function(e){e.preventDefault(),$.post($(this).val(),function(){update_cart()})}),$(update_box)}),$.feature("f_clock",function(){var offset=new Date-new Date($(".js-clock").data("offset")),update_clock=function(){var current=new Date;current.setTime(current.getTime()-offset);var hours=current.getHours(),period="AM";hours>12&&(period="PM",hours-=12);var minutes=current.getMinutes();minutes<10&&(minutes="0"+minutes),$(".js-clock").text(hours+":"+minutes+" "+period)};void 0!==window.clock&&clearInterval(window.clock),window.clock=setInterval(update_clock,1e3),update_clock()}),$.feature("f_collect_plus",function(){function set_next_button_enabled(){var $target=$($collect_plus_selector.data("form-target"));if(0!==$collect_plus_widget.length){var collect_plus_value=$(".js-collect-plus").data("form-value"),collect_plus_selected=$target.find("option[value="+collect_plus_value+"]").prop("selected"),data=JSON.parse($collect_plus_data_input.val()),empty=0==Object.keys(data).length;$(".js-next").prop("disabled",empty&&collect_plus_selected)}}function set_cart_shipping_amount(){if(0!==$collect_plus_widget.length){var $options=$(".js-shipping-type-select"),$form=$($options.data("form-target")),is_selected=function(){return $(this).prop("selected")},selected=$form.find("option").filter(is_selected).val(),option=$options.filter('[data-form-value="'+selected+'"]'),option_amount=parseFloat($(option).data("shipping-price"));$(".js-shipping-price").text(""+option_amount.toFixed(2));var $cart_total=$(".js-cart-total"),cart_total_amount=parseFloat($cart_total.data("cart-item-total"));cart_total_amount+=option_amount,$cart_total.text(""+cart_total_amount.toFixed(2))}}function setup_click_and_collect(){var api_key=$collect_plus_widget.data("api-key"),widget_css=$collect_plus_widget.data("css-override"),initial_postcode=$collect_plus_widget.data("initial-postcode"),google_maps_api_key=$collect_plus_widget.data("google-maps-api-key"),display_opts={};if($collect_plus_data_input.val()){var initial_data=JSON.parse($collect_plus_data_input.val());display_opts.storeExternalId=initial_data.storeId}parcelpoint.Store.init({apiKey:api_key,country:{name:"United Kingdom",code:"uk"},targetDiv:$collect_plus_widget.attr("id"),storeType:"full",initialView:"map",clustering:!0,minStoresReturned:3,yourLocationMarker:!0,overrideCSS:widget_css,initialAddress:initial_postcode,googleAPIKey:google_maps_api_key,messages:{noLocationSelected:"Select CollectPlus location:",search:"Enter postcode or town/city"}}),parcelpoint.Store.display(display_opts),parcelpoint.Property.onChange(["storeDetails"],function(_,newDetails){$collect_plus_data_input.val(JSON.stringify(newDetails)),set_next_button_enabled()})}var $collect_plus_selector=$(".js-shipping-type-select"),$collect_plus_data_input=$(".js-collect-plus-data"),$collect_plus_widget=$("#js-click-and-collect-widget");$collect_plus_selector.on("click",function(){var $el=$(this),$target=$($el.data("form-target")),value=$el.data("form-value");$target.find("option").prop("selected",!1),$target.find("option[value="+value+"]").prop("selected",!0),set_next_button_enabled(),set_cart_shipping_amount()});var poll=setInterval(function(){return 0===$collect_plus_widget.length?void clearInterval(poll):void("undefined"!=typeof parcelpoint&&(setup_click_and_collect(),clearInterval(poll)))},100);set_next_button_enabled(),set_cart_shipping_amount(),$(".js-mirror-to-alternate").on("keyup paste",function(){var $el=$(this);$($el.data("mirror-to")).val($el.val())}),"#click-and-collect"===window.location.hash&&$(".js-collect-plus").click()}),$.feature("f_conversation",function(){var container=$(".js-container"),messages=$(".js-messages"),compose=$(".js-compose form"),composeField=compose.find("textarea");composeField.on("change keyup keydown paste cut",function(){composeField.outerHeight(0),composeField.outerHeight(composeField[0].scrollHeight),container.css("padding-bottom",compose.outerHeight())}).change(),$(".messages").on("click",".show-previous-messages",function(e){e.preventDefault();var ele=$(this);ele.addClass("loading"),$.ajax(ele.attr("href"),{type:"GET"}).done(function(data){var initialHeight=messages.prop("scrollHeight");ele.parent().prepend(data.html),ele.remove();var newHeight=messages.prop("scrollHeight");messages.scrollTop(newHeight-initialHeight)})}),$.ajax($(".messages").data("initial"),{type:"GET"}).done(function(data){$(".messages").html(data.html),messages.scrollTop(messages.prop("scrollHeight"))}).always(function(){$(".messages.loading").hide()})}),$.feature("f_dismissible_banner",function(){$("body").on("click",".js-dismissible-banner",function(){var el=$(this);"undefined"!=typeof el.data("url")&&$.post(el.data("url"))})}),$.feature("f_edit_price_ranges",function(){function LogSlider(options){options=options||{},this.minpos=options.minpos||0,this.maxpos=options.maxpos||100,this.minlval=Math.log(options.minval||1),this.maxlval=Math.log(options.maxval||1e5),this.scale=(this.maxlval-this.minlval)/(this.maxpos-this.minpos)}function adjustSlidersToBudget(budgetIndex){$sliders.each(function(i,el){var $el=$(el),elId=$el.attr("id"),elSlug=elId.replace("id_",""),finalVal=budgetPriceMap[elSlug][budgetIndex],logSlider=$el.data("logSlider");logSlider.value(finalVal),$el.siblings(".range-companion").val(finalVal).trigger("change")})}LogSlider.prototype={value:function(position){return Math.exp((position-this.minpos)*this.scale+this.minlval)},position:function(value){return this.minpos+(Math.log(value)-this.minlval)/this.scale},roundScaleValue:function(value){var relativePosition=this.position(value);return relativePosition<=25?2*Math.floor(value/2):relativePosition>=75?10*Math.floor(value/10):5*Math.floor(value/5)}},$(".legacy-slider input").each(function(){var el=$(this);el.slider({from:el.data("min-value"),to:el.data("max-value"),step:10,dimension:"",skin:"plastic"})});var $sliders=$(".slider input[type=range]");$("body").on("click",".legacy-slider .jslider",function(){$(this).parent().siblings(".slider").remove()});var budgetPriceMap=$(".registration-step-price-ranges").data("budget-price-map");$("thread-select-buttons").on("change",function(e){var selectedRange=e.target.value,zeroOffset=selectedRange-1;adjustSlidersToBudget(zeroOffset)}),$("body").hasClass("f_price_sliders_budgets")&&($sliders.each(function(i,el){var $el=$(el),logSlider=new LogSlider({maxpos:100,minval:$el.attr("min"),maxval:$el.attr("max")});$el.data("logSlider",logSlider),$el.data("min",$el.prop("min")),$el.data("max",$el.prop("max")),$el.prop("step",0),$el.prop("min",0),$el.prop("max",100)}),setTimeout(function(){adjustSlidersToBudget(1),$(".sliders-container").removeClass("hidden"),$sliders.data("allow-animation",!0)},150))}),$.feature("f_edit_profile_photos",function(){function show_correct_buttons(){var has_selected=$("li",current_photos);has_selected.length>0?(skip_button.addClass("hidden"),next_button.removeClass("hidden")):(skip_button.removeClass("hidden"),next_button.addClass("hidden"))}function load_more_facebook_photos(url){var load_more_button=$(".js-load-more");load_more_button.hide(),$.ajax({url:url,type:"POST",data:{access_token:target.data("access_token")},success:function(data){$(".js-loading").hide(),target.append(data.html),"no_more"===data.status?$(".no-more").show():load_more_button.show()},complete:function(){show_correct_buttons();var buttons=target.find(".js-loading, .js-load-more");target.append(buttons.clone()),buttons.remove()}})}var target=$(".facebook-photos"),upload_image=$("input[name=image]"),current_photos=$("ul.current-photos"),skip_button=$(".js-skip-button"),next_button=$(".js-done-adding-button");$(".js-add-photo-now-fb").on("click",function(e){e.preventDefault(),$(".js-facebook-form").removeClass("hidden")}),$(".js-add-photo-now-upload").on("click",function(){$(".js-upload-form").find("input").trigger("click")}),upload_image.on("change",function(){this.form.submit()}),$("body").on("click",".js-load-more",function(e){e.preventDefault(),$(".js-loading").show();var last=$("li.facebook-photo",target).last();load_more_facebook_photos(last.data("load-more-url"))}),$("body").on("click",".upload-photo",function(e){e.preventDefault(),$(".js-upload-form").find("input").trigger("click")}),current_photos.on("click","a.current-photo",function(e){e.preventDefault();var el=$(this);$.post(el.data("delete-url"),function(){var facebook_url=el.parents("li").data("facebook-original-url");if("undefined"!=typeof facebook_url){var existing=$(".js-facebook-photos").find('li[data-facebook-photo-url="'+facebook_url+'"]');existing.removeClass("selected"),$(".overlay",existing).hide()}el.parents("li").remove(),show_correct_buttons()})}),target.on("click","li.facebook-photo",function(){var el=$(this);el.toggleClass("selected");var form=$("form",el),url_el=$("#id_url",form);if(url_el.val(el.data("facebook-photo-url")),$("#id_url",form).val(el.data("facebook-photo-url")),el.hasClass("selected"))$.post(form.attr("action"),form.serialize(),function(data){current_photos.prepend(data),show_correct_buttons()});else{var new_photos=$("ul.current-photos li[data-facebook-original-url]");new_photos.each(function(i,photo_el){var photo=$(photo_el);photo.data("facebook-original-url")==url_el.val()&&($("a",photo).click(),show_correct_buttons())})}}),$("#facebook_connect, .js-add-photo-now-fb").on("click",function(){var link=$(this);return!($(".js-facebook-photos").length>0)&&($.facebook({success:function(FB){$.post(link.data("url"),{access_token:FB.getAccessToken()},function(){window.location.reload()})},disabled:function(){$.post(link.data("url"),{access_token:"dummy"},function(){window.location.reload()})},permissions:"email,user_photos"}),!1)}),$(".js-loading").show(),target.length>0?load_more_facebook_photos(target.data("xhr-facebook-photos-url")):show_correct_buttons(),$.facebook_ready(function(){$("#facebook_connect").show()}),$("body").on("click",".js-done-adding-button",function(e){e.preventDefault(),$(".js-done-adding-form").submit()}),$("body").on("click",".js-facebook-form-close",function(e){e.preventDefault(),$(".js-facebook-form").addClass("hidden")})}),$.feature("f_edit_style_photos",function(){var container=$(".js-style-photos-container"),min_photos=parseInt(container.data("min-photos"),10),max_photos=parseInt(container.data("max-photos"),10),photos=$(".js-photo-toggle");$("body").on("click",".js-photo-toggle",function(e){e.preventDefault();var elem=$(this),selecting=!elem.hasClass("selected");return elem.hasClass("blocked")?(elem.addClass("invalid-action"),void setTimeout(function(){elem.removeClass("invalid-action");
},1e3)):(photos.removeClass("blocked",!selecting),elem.toggleClass("selected",selecting),sync(),void $.post(elem.data(selecting?"select-url":"unselect-url")))});var sync=function(){var num_selected=$(".js-photo-toggle.selected").length;$(".js-next").toggleClass("btn-disabled",num_selected<min_photos),num_selected>=max_photos&&$(".js-photo-toggle:not(.selected)").addClass("blocked")};sync()}),$.feature("f_gift_cards_payment",function(){function fail_with_errors(errors){purchase_button.prop("disabled",!1),purchase_button.removeClass("loading"),render_errors(errors)}function format_error(message,field){field||(field="__all__");var errors={};return errors[field]=[message],errors}function make_error_div(message){return $('<div class="error-message js-error-message"/>').text(message)}function render_errors(data){var scroll_target=null;purchase_button.removeClass("loading"),purchase_errors.children().remove(),$(".field").removeClass("error"),$(".js-error-message").remove(),$.each(data,function(key){var elem=$('[name="'+key+'"]').addClass("error");scroll_target=scroll_target||elem,$.each(this,function(){make_error_div(this).insertBefore(elem)})}),"undefined"!=typeof data.__all__&&($.each(data.__all__,function(){make_error_div(this).appendTo(purchase_errors)}),scroll_target=null),$("html, body").animate({scrollTop:scroll_target?scroll_target.offset().top-150:0},"slow")}function stripe_completion_handler(token){purchase_button.prop("disabled",!0),purchase_button.addClass("loading"),stripe_token_input.val(token.id),user_email_input.val()||user_email_input.val(token.email),purchase()}function purchase(){var data=purchase_form.serialize();$.post(purchase_form.attr("action"),data,function(attempt){if(attempt.errors)return void fail_with_errors(attempt.errors);var count=0,poll_enabled=!0;!function poll(){$.get(attempt.url,function(data){switch(data.state){case"success":window.location.href=data.url,poll_enabled=!1;break;case"in_progress":break;default:poll_enabled=!1,fail_with_errors(format_error(data.error))}}).always(function(){poll_enabled&&setTimeout(poll,Math.min(500*++count,2e3))})}()}).error(function(){fail_with_errors(format_error(purchase_form.data("generic-error-message")))})}var delivery_date=$(".js-delivery-date");delivery_date.datepicker({format:"dd/mm/yyyy",weekStart:1,todayBtn:"linked",autoclose:!0,todayHighlight:!0,startDate:new Date(delivery_date.data("min-date")),endDate:new Date(delivery_date.data("max-date"))});var purchase_button=$("#js-gift-card-purchase"),purchase_form=$("#js-gift-card-form"),purchase_errors=$(".js-gift-card-purchase-errors"),stripe_token_input=$("#js-gift-card-stripe-token-input"),user_email_input=$(".js-gift-card-user-email-input"),amount_input=$(purchase_form.data("amount-field")),stripe_key=purchase_form.data("stripe-key"),thread_logo=purchase_form.data("thread-logo");purchase_button.prop("disabled",!0);var stripe_checkout_handler=StripeCheckout.configure({key:stripe_key,image:thread_logo,locale:"en",currency:"GBP",name:"Thread",token:stripe_completion_handler,allowRememberMe:!1,billingAddress:!0});purchase_form.on("change keyup",function(){purchase_button.prop("disabled",purchase_form.find("input:required:not(:valid)").length>0)}),purchase_button.on("click",function(e){var amount=parseFloat(amount_input.val()).toFixed(2),existing_email=user_email_input.val();stripe_checkout_handler.open({amount:100*amount,description:""+amount+" Gift Card",email:existing_email}),e.preventDefault()})}),$.feature("f_home_controls",function(){$("body").on("click",".js-home-controls-toggle-view:not(.current)",function(e){e.preventDefault();var selected_tab=$(this),all_tabs=selected_tab.parents(".nav-pills").find(".js-home-controls-toggle-view");all_tabs.removeClass("current"),selected_tab.addClass("current"),all_tabs.each(function(){var tab=$(this),target=$(tab.data("target")),is_current=tab.hasClass("current");target.toggleClass("hidden-xs",!is_current)})}),$("body").on("click",".js-show-add-new-wanted-item",function(){$(this).addClass("hidden"),$(".js-new-wanted-item").removeClass("hidden")}),$("body").on("click",".js-add-wanted",function(){var el=$(this);void 0!==el.data("url")&&(el.addClass("loading"),$.post(el.data("url")).done(function(resp){el.removeAttr("data-url").removeClass("loading").addClass("btn-success"),$(el.data("target-list")).append(resp.html).find("[data-empty-state]").addClass("hidden")}))}),$("body").on("click",".js-remove-wanted",function(){var el=$(this),container=el.parents(".js-wanted-container");$.post(el.data("url")).done(function(){container.slideUp(function(){container.remove()})})}),$("body").on("change",".js-toggle-wanted-occasion",function(){var el=$(this),checked=el.prop("checked");el.prop("disabled",!0),$.post(el.data(checked?"want-url":"do-not-want-url")).done(function(){el.prop("disabled",!1)}).done(function(){$('.js-toggle-wanted-occasion[value="'+el.val()+'"]').not(this).prop("checked",checked)})}),$("body").on("change",".js-quantity-controls input",function(){var el=$(this),form=$(this).parents("form");$.ajax(form.attr("action"),{type:form.attr("method"),data:form.serialize()}).done(function(){$('.js-quantity-controls input[value="'+el.val()+'"]').not(this).prop("checked",el.prop("checked"))})}),$("body").on("click",".js-controls-done",function(){var btn=$(this),original=btn.text();btn.text("Saving..."),setTimeout(function(){btn.animate({opacity:0},500,function(){btn.addClass("done"),btn.text(btn.data("done-text")),btn.animate({opacity:1},500,function(){setTimeout(function(){btn.animate({opacity:0},500,function(){btn.removeClass("done"),btn.text(original),btn.animate({opacity:1},500)})},500)})})},500)})}),$.feature("f_hooks",function(){$("body").on("change",".js-hooks select",function(){var target=$(this).find("option:selected").val();$(window).scrollTo(target,600,{offset:-60})}),$("body").on("click",".js-hooks a",function(e){e.preventDefault();var target=$(this).attr("href");$(window).scrollTo(target,600,{offset:-60})})}),$.feature("f_image_quickview",function(){function lockBody(){$("html, body").css("overflow","hidden")}function unlockBody(){$("html, body").css("overflow","auto")}function close(el){el.hide(),el.removeClass("js-quickview-active"),unlockBody()}function show(el){$(window).width()<=767||(el.updateArrows(),el.show(),el.centerContent(),el.addClass("js-quickview-active"),lockBody())}function resizeImage(container,callback){callback=callback||$.noop;var image=container.find(".js-quickview-image"),dummyImage=new Image;dummyImage.onload=function(){var nativeImageWidth=dummyImage.width,windowWidth=$(window).width(),padding=120;image.removeClass("fullbleed contain"),nativeImageWidth+2*padding>windowWidth?(image.addClass("fullbleed"),image.css("margin-left",0)):(image.addClass("contain"),image.css("margin-left",-(nativeImageWidth+2*padding)/2)),callback()},dummyImage.src=image.attr("src")}function populate(el){var container=el.parents(".js-item-detail").find(".js-quickview");resizeImage(container,function(){show(container)})}function update(container,el){if(!el.hasClass("js-quickview-update-active")){var triggers=container.find(".js-quickview-update"),index=el.index()+1,currentTriggers=container.find(".js-quickview-update:nth-child("+index+")"),target=container.find(".js-quickview-image"),targetContainer=$(".js-quickview-image-container, .js-quickview-image"),url=el.data("url");targetContainer.addClass("loading"),$("<img/>").attr("src",url).on("load",function(){target.each(function(){target=$(this),target.is("img")?target.attr("src",url):target.css("background-image",'url("'+url+'")')}),$(this).remove(),triggers.removeClass("js-quickview-update-active quickview-update-active"),currentTriggers.addClass("js-quickview-update-active quickview-update-active"),$(".js-quickview-active").updateArrows(),targetContainer.removeClass("loading")})}}$.fn.updateArrows=function(){var quickview=$(this),triggers=quickview.find(".js-quickview-update"),nextArrow=quickview.find(".js-quickview-navigation-next"),prevArrow=quickview.find(".js-quickview-navigation-previous");nextArrow.removeClass("disabled"),prevArrow.removeClass("disabled"),triggers.first().hasClass("js-quickview-update-active")?prevArrow.addClass("disabled"):triggers.last().hasClass("js-quickview-update-active")&&nextArrow.addClass("disabled")},$.fn.centerContent=function(){var imageContainer=$(this).find(".js-quickview-image-container"),distanceToScroll=imageContainer[0].scrollHeight/2-$(window).height()/2;imageContainer.scrollTop(distanceToScroll)},$.fn.nextImage=function(){$(this).find(".js-quickview-update-active").next().click()},$.fn.previousImage=function(){$(this).find(".js-quickview-update-active").prev().click()},$("body").on("click",".js-quickview-toggle",function(e){e.preventDefault();var el=$(this);populate(el)}),$("body").on("click",".js-quickview-update",function(e){e.preventDefault();var el=$(this),container=el.parents(".js-item-detail");update(container,el)}),$("body").on("click",".js-quickview-navigation-next",function(e){e.preventDefault(),$(this).parents(".js-quickview").nextImage()}),$("body").on("click",".js-quickview-navigation-previous",function(e){e.preventDefault(),$(this).parents(".js-quickview").previousImage()}),$("body").on("click",".js-quickview-close",function(e){e.preventDefault(),close($(this).parents(".js-quickview"))}),$("body").on("click",".js-quickview-image",function(e){e.preventDefault(),$(this).parents(".js-quickview").nextImage()}),$(window).on("resize",function(){var quickview=$(".js-quickview-active");0!==quickview.length&&(resizeImage(quickview),quickview.centerContent())}),$("body").keydown(function(e){var pressedKey=e.which,el=$(".js-quickview-active");if(0!==el.length){var escKey=27,leftArrowKey=37,rightArrowKey=39,upArrowKey=38,downArrowKey=40,spaceKey=32;switch(pressedKey){case escKey:close(el),e.preventDefault();break;case leftArrowKey:case upArrowKey:el.previousImage(),e.preventDefault();break;case rightArrowKey:case downArrowKey:case spaceKey:el.nextImage(),e.preventDefault()}}})}),$.feature("f_image_rollover",function(){function on_mobile(){return $(window).width()<768}function set_background_image(elem,url){var image=cached_images[url];image&&(elem[0].style.backgroundImage="url("+image.src+")")}function cache_images(){var targets=$(".js-image-rollover");targets.each(function(){for(var images=$(this).data("item-images"),i=0;i<images.length;i++){var image=images[i];if(!(image in cached_images)){var img=new Image;img.src=image,cached_images[image]=img}}})}function bind_events(){if(on_mobile())return void(bound_on_desktop=!1);var targets=$(".js-image-rollover").not("[data-rollover-bound]");targets.on("mouseover mousemove",function(event){if(enabled){var elem=$(this),images=elem.data("item-images"),parent_offset=elem.parent().offset(),x_pos=event.pageX-parent_offset.left,image_idx=Math.floor(images.length/elem.width()*x_pos);set_background_image(elem,images[image_idx])}else current_timeout=setTimeout(function(){enabled=!0},250)}),targets.on("mouseout",function(){var elem=$(this),images=elem.data("item-images");clearTimeout(current_timeout),enabled=!1,set_background_image(elem,images[0])}),targets.attr("data-rollover-bound","true"),cache_images(),bound_on_desktop=!0}var current_timeout,cached_images={},bound_on_desktop=!1,enabled=!1;$(window).on("ajaxComplete",bind_events),$(window).on("resize",function(){on_mobile()||bound_on_desktop||bind_events()})}),$.feature("f_infinite_scroll",function(){function setup_instantclick(){InstantClick.supported&&InstantClick.instantanize(!0)}function guard(fn,el){if("loaded"!==el.attr("data-loaded")&&(el.attr("data-loaded","loaded"),"undefined"!=typeof el.data("url")))return fn(el)}function bind_waypoints(){function initial_handler(el){$.get(el.data("url"),function(resp){container.html(resp.html),bind_waypoints(),setup_instantclick(),$("body").trigger("infinite-scroll-loaded")})}function next_handler(el){$.get(el.data("url"),function(resp){container.append(resp.html),container.find(".js-infinite-scroll-control:not(:first):not(:last)").remove(),bind_waypoints(),setup_instantclick(),$("body").trigger("infinite-scroll-loaded")})}container.find(".js-infinite-scroll-item").waypoint("destroy"),container.find(".js-infinite-scroll-waypoint").waypoint("destroy"),container.find(".js-infinite-scroll-item").waypoint({offset:document.body.clientHeight/2,handler:function(direction){"down"===direction&&window.history&&window.history.replaceState&&window.history.replaceState({},"",$(this).data("page-url"))}}).waypoint({offset:function(){return $.waypoints("viewportHeight")/2-$(this).outerHeight()},handler:function(direction){"up"===direction&&window.history&&window.history.replaceState&&window.history.replaceState({},"",$(this).data("page-url"))}}),container.find('.js-infinite-scroll-waypoint[data-direction="initial"]').waypoint({offset:document.body.clientHeight,context:"body",handler:function(){return guard(initial_handler,$(this))}}),container.find('.js-infinite-scroll-waypoint[data-direction="next"]').each(function(){var el=$(this),offset=el.data("infinite-scroll-offset");"undefined"==typeof offset&&(offset="100%"),el.waypoint({offset:offset,handler:function(direction){if("down"===direction)return guard(next_handler,$(this))}})})}function bind_lazy_load(){$(".js-lazy-load").waypoint("destroy"),$(".js-lazy-load").waypoint({offset:function(){return-$(this).height()},handler:function(direction){if("up"===direction&&lazyEnabled===!0)return lazyLoad($(this))}}),$(".js-lazy-load").waypoint({offset:"100%",handler:function(direction){if("down"===direction&&lazyEnabled===!0)return lazyLoad($(this))}})}function lazyLoad(el){el.css({"background-image":el.data("background-image")}),el.waypoint("destroy"),el.removeClass("js-lazy-load")}var container=$(".js-infinite-scroll-container"),lazyEnabled=!0;$("body").on("click",".js-infinite-scroll-load-previous",function(e){e.preventDefault();var el=$(this);el.hide().siblings(".spinner").removeClass("hide").show(),$.get(el.data("url"),function(resp){var closest=el.parents(".js-infinite-scroll-control").nextAll(".js-infinite-scroll-item").first(),scroll_pos=closest.offset().top-$("body").scrollTop();lazyEnabled=!1,container.prepend(resp.html),container.find(".js-infinite-scroll-control:not(:first):not(:last)").remove(),$("body").scrollTop(closest.offset().top-scroll_pos),bind_waypoints(),bind_lazy_load(),lazyEnabled=!0,$(".js-lazy-load").each(function(){var el=$(this),viewport_offset=el.offset().top-$(document).scrollTop();viewport_offset<0&&Math.abs(viewport_offset)<el.height()&&lazyLoad(el)}),setup_instantclick(),$("body").trigger("infinite-scroll-loaded")})}),$(window).on("ajaxComplete",bind_lazy_load),$.waypoints("destroy"),bind_waypoints(),bind_lazy_load(),$.waypoints("refresh"),setTimeout(function(){window.scrollTo(0,0)},1)}),$.feature("f_inline_footer",function(){"use strict";var $body=$("body"),previous_scroll=0,current_direction="down",previous_direction="up",document_height=$(document).height(),$inline_floating_footer=$(".js-floating-footer");$(window).scroll(function(){if($inline_floating_footer.length){var scroll_position=$(this).scrollTop();scroll_position<=.1*document_height||(scroll_position>=previous_scroll?(current_direction="down",current_direction!==previous_direction&&($inline_floating_footer.removeClass("floating-footer-hidden"),$body.css({"padding-bottom":$inline_floating_footer.outerHeight()}),previous_direction=current_direction)):(current_direction="up",current_direction!==previous_direction&&($inline_floating_footer.addClass("floating-footer-hidden"),$body.css({"padding-bottom":"inherit"}),previous_direction=current_direction)),previous_scroll=$(this).scrollTop())}})}),$.feature("f_inventory_brand",function(){var brands=$(".js-brands-list");$(".js-add-similarity").on({mousedown:function(e){e.preventDefault()},click:function(){var input=$(".js-brand-selector-input"),li=$(this).closest("li");$(this).button("loading"),li.addClass("text-muted"),$.post($(this).data("url"),{weight:.5},function(result){li.remove(),input.val(""),$(".js-similarities").prepend(result)})}}),$(".js-brand-selector-input").on({focus:function(){$(this).trigger("input")},blur:function(){brands.hide()},input:function(){var val=$(this).val().trim(),re=new RegExp("\\b"+val,"i");val?brands.find("li").addClass("hidden").filter(function(){return re.test($(this).data("brand-name"))}).removeClass("hidden"):brands.find("li").removeClass("hidden"),brands.show()}}),$(".js-filter-brands").on({mousedown:function(e){e.preventDefault()},click:function(){$(this).button("toggle"),$(this).hasClass("active")?brands.find("li").filter(function(){return parseInt($(this).data("num-similarities"))>0}).hide():brands.find("li").show()}}),$(".js-similarities").on({click:function(){var el=$(this),tr=el.closest("tr"),buttons=tr.find(".btn"),weight=parseFloat(el.data("weight"));buttons.attr("disabled",!0),$.post($(this).data("url"),{weight:weight},function(){buttons.attr("disabled",!1),"delete"==el.data("action")&&tr.remove()})}},".js-brand-set-weight"),$(".js-synonyms").on({mouseover:function(){$(this).addClass("btn-danger")},mouseout:function(){$(this).removeClass("btn-danger")},click:function(){var el=$(this);el.button("loading"),$.post($(this).data("url"),function(){el.remove()})}},".js-delete-synonym"),$(".js-add-synonym").on({click:function(){var el=$(this),input=$(".js-synonym-input"),synonym=input.val().trim();el.button("loading"),$.post($(this).data("url"),{name:synonym},function(result){$(".js-synonyms").prepend(result),el.button("reset"),input.val("")}).error(function(){el.button("reset")})}}),$(".js-synonym-input").on({keypress:function(e){13===e.keyCode&&$(".js-add-synonym").trigger("click")}})}),$.feature("f_item_detail",function(){function loadNewImage(url){$("<img>").attr("src",url).on("load",function(){modalImage.attr("src",url),$(this).remove()})}var currentSidebarRequest,currentKicRequest,currentSimilarItemsRequest,currentOutfitRecommendationsRequest,modal=$("#item-quickview"),$body=$("body"),modalImage=modal.find(".js-item-image"),overlay=modal.find(".item-quickview-overlay"),close=modal.find(".item-quickview-close"),startUrl=window.location.href,sidebarCache={},keyItemCategoryCache={},onKeyDown=function(e){var escKey=27;e.which===escKey&&(e.preventDefault(),close.trigger("click"))},onClose=function(){modal.addClass("hidden"),history.pushState(null,document.title,startUrl),InstantClick.manualPageChange(startUrl),currentSidebarRequest&&currentSidebarRequest.abort(),currentKicRequest&&currentKicRequest.abort(),currentSimilarItemsRequest&&currentSimilarItemsRequest.abort(),currentOutfitRecommendationsRequest&&currentOutfitRecommendationsRequest.abort(),$body.removeAttr("style"),modal.find(".js-item-image").attr("src",""),modal.find(".item-sidebar").empty(),modal.find(".js-item-key-item-details").addClass("hidden"),modal.find(".js-item-detail-similar-items").addClass("hidden"),modal.find(".js-item-detail-outfit-recommendations").addClass("hidden")},getXhrUrlsFromElement=function($el){return{itemQuickviewSidebarUrl:$el.data("item-quickview-sidebar-url"),keyItemCategoryDetailsUrl:$el.data("key-item-category-details-url"),outfitRecommendationsUrl:$el.data("outfit-recommendations-url"),similarItemsUrl:$el.data("similar-items-url")}},getItemFromElement=function($el){return{id:$el.data("item-id"),url:$el.data("item-url"),image:$el.data("item-image"),imageOriginal:$el.data("item-image-original"),brand:$el.data("item-brand"),brandUrl:$el.data("item-brand-url"),name:$el.data("item-name"),price:$el.data("item-price"),originalPrice:$el.data("item-price"),onSale:$el.data("item-onsale"),sizeGuideUrl:$el.data("item-brand-size-guide-url")}},getItemMapped=function(item){var mappedItem={id:item.id,url:"/item/"+item.slug+"/"+item.id,image:item.images.medium[0],imageOriginal:item.images.original[0],brand:item.brand,name:item.name,price:""+item.price,originalPrice:"",onSale:item.price<item.price_previous,sizeGuideUrl:item.size_guide_url};return item.price_previous!==item.price&&(mappedItem.originalPrice=""+item.price_previous),mappedItem};$body.on("click",".js-item-quickview-trigger",function(e){if(e.metaKey||e.shiftKey||e.ctrlKey||e.altKey||$(window).width()<=768)return void $body.trigger("item_link_navigation");e.preventDefault();var $el=$(this).closest("[data-item-id]"),item=getItemFromElement($el),xhrUrls=getXhrUrlsFromElement($el);onShow(item,xhrUrls)}),$body.on("itemQuickview",function(e){var item=e.originalEvent.detail,mappedItem=getItemMapped(item),xhrUrls={itemQuickviewSidebarUrl:"/xhr/item/sidebar/"+item.id+"/"+item.sourceSlug,outfitRecommendationsUrl:"/xhr/item/outfit-recommendations/"+item.id,similarItemsUrl:"/xhr/item/similar-item-colours/"+item.id};onShow(mappedItem,xhrUrls)});var onShow=function(item,xhrUrls){modal.find(".item-sidebar-template").children().clone().appendTo(".item-sidebar"),modal.scrollTo(0);var brandLink,modalBrand=modal.find(".js-item-brand"),modalName=modal.find(".js-item-name"),modalPrice=modal.find(".js-item-price"),modalOriginalPrice=modal.find(".js-item-original-price");if(history.pushState({id:item.id},document.title,item.url),InstantClick.manualPageChange(item.url),$body.css("overflow","hidden"),modal.removeClass("hidden slide"),overlay.removeClass("hidden"),modalImage.attr("src",item.image),item.brandUrl?(brandLink=$("<a />").attr("href",item.brandUrl).text(item.brand),modalBrand.html(brandLink)):modalBrand.text(item.brand),modalName.text(item.name),modalPrice.text(item.price),modalOriginalPrice.text(item.originalPrice),loadNewImage(item.imageOriginal),sidebarCache[item.id]?(modal.find(".item-sidebar").replaceWith(sidebarCache[item.id]),$(document.body).trigger("sidebarItemChanged",item)):currentSidebarRequest=$.get(xhrUrls.itemQuickviewSidebarUrl,"",function(data){sidebarCache[item.id]=data.html,modal.find(".item-sidebar").replaceWith(data.html),$(document.body).trigger("sidebarItemChanged",item)}),xhrUrls.keyItemCategoryDetailsUrl){var kic_section=modal.find(".js-item-key-item-details");keyItemCategoryCache[item.id]?kic_section=keyItemCategoryCache[item.id]:currentKicRequest=$.get(xhrUrls.keyItemCategoryDetailsUrl,function(data){keyItemCategoryCache[item.id]=data.html,kic_section.html(data.html),kic_section.removeClass("hidden")})}currentSimilarItemsRequest=$.get(xhrUrls.similarItemsUrl,function(data){"success"===data.status&&(modal.find(".js-similar-item-colours").html(data.html),modal.find(".js-item-detail-similar-items").removeClass("hidden"),modal.find(".js-lazy-load").each(function(){var $self=$(this);$self.css("background-image",$self.data("background-image"))}))}),currentOutfitRecommendationsRequest=$.get(xhrUrls.outfitRecommendationsUrl,function(data){"success"===data.status&&(modal.find(".js-outfit-recommendations").html(data.html),modal.find(".js-item-detail-outfit-recommendations").removeClass("hidden"),modal.find(".js-lazy-load").each(function(){var $self=$(this);$self.css("background-image",$self.data("background-image"))}))}),$.post("/xhr/items/view-item-details/"+item.id,{}),"undefined"!=typeof dataLayer&&(dataLayer.push({PageType:"Productpage",ProductID:item.id,OnSale:item.onSale}),dataLayer.push({event:"product_quickview"})),modal.focus()};addEventListener("popstate",function(){modal.hasClass("hidden")||onClose()}),$(document).on("keydown",onKeyDown),close.on("click",onClose),overlay.on("click",onClose),$(document).on("click",".js-change-image",function(){var newImageURL=$(this).data("original-background-image");modalImage.attr("src",newImageURL)})}),$.feature("f_item_detail_carousel",function(){$("body").on("ready",".js-item-detail",function(){function setSlide(index){slides.removeClass("current"),slides.eq(index).addClass("current"),pagination.removeClass("current"),pagination.eq(index).addClass("current"),previous.toggle(0!==index),next.toggle(index!==numberOfSlides),slide(index)}function slide(index){var width=slides[0].getBoundingClientRect().width,distance=index*width;slideDistance(distance)}function slideDistance(distance){slidesContainer.css({"-webkit-transform":"translate3d(-"+distance+"px, 0, 0)","-moz-transform":"translate3d(-"+distance+"px, 0, 0)","-ms-transform":"translate3d(-"+distance+"px, 0, 0)","-o-transform":"translate3d(-"+distance+"px, 0, 0)",transform:"translate3d(-"+distance+"px, 0, 0)"})}var item=$(this),slidesContainer=item.find(".item-images-gallery"),slides=slidesContainer.find(".item-image"),numberOfSlides=slides.length-1,next=item.find(".item-images-navigation-next"),previous=item.find(".item-images-navigation-previous"),paginationContainer=item.find(".item-images-pagination ol"),pagination=paginationContainer.find("li");setSlide(0),next.on("click",function(){var current=paginationContainer.find(".current").index();current!==numberOfSlides&&setSlide(current+1)}),previous.on("click",function(){var current=paginationContainer.find(".current").index();0!==current&&setSlide(current-1)}),$(document).on("keydown",function(e){var pressedKey=e.which,leftArrowKey=37,rightArrowKey=39;switch(pressedKey){case leftArrowKey:e.preventDefault(),item.find(".item-images-navigation-previous").trigger("click");break;case rightArrowKey:e.preventDefault(),item.find(".item-images-navigation-next").trigger("click")}});var start=0,distance=0,itemImagesCarousel=item.find(".item-images-navigation"),width=slides[0].getBoundingClientRect().width,threshold=.25;itemImagesCarousel.on("touchstart",function(e){if($(e.target).is($(this))){var current=paginationContainer.find(".current").index();start=e.originalEvent.changedTouches[0].pageX+current*width,slidesContainer.css({"-webkit-transition":"none","-moz-transition":"none","-ms-transition":"none","-o-transition":"none",transition:"none"})}}),itemImagesCarousel.on("touchmove",function(e){if($(e.target).is($(this))){var move=e.originalEvent.changedTouches[0].pageX;distance=start-move,distance<0||distance>numberOfSlides*width||slideDistance(distance)}}),itemImagesCarousel.on("touchend",function(e){if(slidesContainer.removeAttr("style"),$(e.target).is($(this))){var current=paginationContainer.find(".current").index(),start=width*current,delta=(distance-start)/width;delta<-threshold?previous.trigger("click"):delta>threshold?next.trigger("click"):slide(current)}})})}),$.feature("f_item_detail_page",function(){var itemImage=$("body").find(".js-item-image");$(".js-item-images-slider").slick({dots:!0,appendDots:$(".js-item-images-slider-pagination"),arrows:!1,mobileFirst:!0,centerMode:!0,centerPadding:"0",infinite:!1}),$(".js-change-image").on("click",function(){itemImage.prop("src",$(this).data("original-background-image"))}),$(".js-similar-item-colours").trigger("show-similar-item-colours"),$(".js-outfit-recommendations").trigger("show-outfit-recommendations"),$(".js-calculate-sliding-panel-width").each(function(){var container=$(this),items=container.children(".js-sliding-panel-content"),percentage_width=container.data("percentage-width");container.css("width",percentage_width*items.length+"%"),items.css("width",100/items.length+"%")})}),$.feature("f_items2",function(){function setup_price_filters(){function updateLabels(values,handle){var val=parseInt(values[handle]);0===handle?price_filter_min_label.html(""+val):val===slider_max?price_filter_max_label.html("<span class='infinity-icon'>&infin;</span>"):price_filter_max_label.html(""+val)}var price_filter_mobile=$(".price-filter-slider-mobile")[0],price_filter_desktop=$("#price-filter-slider-desktop")[0],price_filter_slider=$(".price-filter-slider"),price_filter_max_label=$(".price-filter-max"),price_filter_min_label=$(".price-filter-min"),price_filter_max=parseInt(price_filter_slider.data("max-val")),price_filter_min=parseInt(price_filter_slider.data("min-val")),$price_min_input=$("#id_price_min"),$price_max_input=$("#id_price_max"),slider_max=price_filter_max+1,price_min=$price_min_input.val()||price_filter_min,price_max=$price_max_input.val()||slider_max;noUiSlider.create(price_filter_mobile,{start:[price_min,price_max],step:5,connect:!0,behaviour:"tap-drag",range:{min:[price_filter_min],"10%":[10,5],"20%":[30,5],"30%":[50,10],"40%":[80,10],"50%":[120,20],"60%":[200,50],max:[slider_max]}}),noUiSlider.create(price_filter_desktop,{start:[price_min,price_max],step:5,connect:!0,behaviour:"tap-drag",range:{min:[price_filter_min],"10%":[10,5],"20%":[30,5],"30%":[50,10],"40%":[80,10],"50%":[120,20],"60%":[200,50],max:[slider_max]}}),price_filter_slider.removeClass("hidden"),price_filter_max_label.removeClass("hidden"),price_filter_min_label.removeClass("hidden"),price_filter_desktop.noUiSlider.on("update",function(values,handle){updateLabels(values,handle)}),price_filter_mobile.noUiSlider.on("update",function(values,handle){updateLabels(values,handle)}),price_filter_desktop.noUiSlider.on("set",function(price_values){update_filter_form_price_min_max(price_values),reload_results()}),$(".js-filter-modal-trigger").on("click",function(){$(window).width()<768&&price_filter_mobile.noUiSlider.set(price_filter_desktop.noUiSlider.get())})}function setup_instantclick(){InstantClick.supported&&InstantClick.instantanize(!0)}function change_content(html){var el=$(".js-items2-content");0!==el.length&&(el.html(html),InstantClick.manualPageChange(window.location.href),setup_page(),$("div.price-filter").length>0&&setup_price_filters(),$(window).trigger("ajaxComplete"),$(".js-no-results").length||$(".js-no-more-results").addClass("hidden"))}function reload_results(){var el=$(".js-items2-content");if("undefined"!=typeof el&&0!==el.length&&(0!==$(".js-filter-form").length||!el.hasClass("js-infinite-scroll-control"))){var active_filters_bar=$(".js-active-filters-bar");active_filters_bar.find(".spinner").removeClass("hide");var filter_parameters=$.makeArray($(".js-filter-form :input").map(function(index,element){return element.name})),other_filter_parameters=$.makeArray($("[data-register-filter-parameter]").map(function(){return $(this).data("register-filter-parameter")}));filter_parameters=filter_parameters.concat(other_filter_parameters);var querystring_params={};location.search.substr(1).split("&").forEach(function(pair){if(""!==pair){var parts=pair.split("="),key=parts[0];if(filter_parameters.indexOf(key)===-1){var val=parts[1]&&decodeURIComponent(parts[1].replace(/\+/g," "));querystring_params[key]=val}}});var form_data_base=$(".js-filter-form :input").filter(function(index,element){return""!==element.value}),new_url=window.location.href.split("?")[0],form_data_params={};$.map(form_data_base.serializeArray(),function(item){form_data_params[item.name]=form_data_params[item.name]||[],form_data_params[item.name].push(item.value)}),$.extend(querystring_params,form_data_params),$.isEmptyObject(querystring_params)||(new_url+="?"+$.param(querystring_params,!0));var form_data=form_data_base.serialize();form_data+="&page="+get_url_parameter("page",1);for(var i=history.length-1;i>=0;i--)if(history[i].form==form_data)return window.history.pushState({content_index:i},document.title,new_url),void change_content(history[i].html);el.addClass("loading"),new_url!==window.location.href&&(window.history.pushState({},document.title,new_url),InstantClick.manualPageChange(new_url)),reloading_results=!0,$.ajax({type:"POST",url:el.data("url"),data:form_data}).done(function(resp){el.html(resp.html),setup_instantclick(),setup_page(),$("div.price-filter").length>0&&setup_price_filters();var idx=history.push({form:form_data,html:resp.html})-1;window.history.replaceState({content_index:idx},document.title),el.removeClass("loading"),reloading_results=!1,scroll_to_hash_position()})}}function scroll_to_hash_position(){if(saved_hash.length>1){var scroll_offset=parseInt(saved_hash.slice(1));window.scrollTo(0,scroll_offset)}}function update_filter_form(set_only_on_sale){var form=$(".js-filter-form"),search_id=$("#id_search_id").val();form.find("input:not(.js-is-react-managed):not(#id_only_on_sale)").val(""),form.find("select:not(.js-is-react-managed):not(#id_only_on_sale) option").prop("selected",!1),$(".js-active-filters-bar .js-filter").each(function(){
var el=$(this);form.find("input[name="+el.data("field")+"]").val(el.data("value")),form.find("select[name="+el.data("field")+"]").find("option[value="+el.data("value")+"]").prop("selected",!0)}),form.find("input[name=search_id]").val(search_id),"undefined"!=typeof set_only_on_sale&&($("#id_only_on_sale").prop("value",set_only_on_sale),$("#id_only_on_sale").prop("checked",set_only_on_sale))}function setup_page(){$('[data-toggle="tooltip"]').tooltip({html:!0})}function add_filter_to_active_filter_bar(js_filter_element){var field_name=js_filter_element.data("field"),active_filters_bar=$(".js-active-filters-bar");active_filters_bar.find('.js-filter[data-field="'+field_name+'"][data-multiple-select="false"]').remove(),active_filters_bar.find('.js-filter[data-dependent-on-field="'+field_name+'"]').remove(),active_filters_bar.append(js_filter_element.clone().addClass("js-filter").hide())}function remove_filter_from_active_filter_bar(field_name,value){var query,active_filters_bar=$(".js-active-filters-bar");active_filters_bar.find('.js-filter[data-dependent-on-field="'+field_name+'"]').remove(),query='.js-filter[data-field="'+field_name+'"]',null!==value&&(query+='[data-value="'+value+'"]'),active_filters_bar.find(query).remove()}function hide_blocking_elements(){$("body").removeAttr("style"),$(".js-filter-modal").addClass("hidden"),$("#browse-filters-modal").modal("hide")}function update_filter_form_price_min_max(values){var $price_min_input=$("#id_price_min"),$price_max_input=$("#id_price_max"),current_price_min=parseInt($price_min_input.val()),current_price_max=parseInt($price_max_input.val()),price_min=parseInt(values[0]),price_max=parseInt(values[1]),price_filter_slider=$(".price-filter-slider"),price_filter_max=parseInt(price_filter_slider.data("max-val")),slider_max=price_filter_max+1;current_price_min===price_min&&current_price_max===price_max||($price_min_input.val(price_min),price_max===slider_max?(remove_filter_from_active_filter_bar("price_max"),$price_max_input.val(null)):$price_max_input.val(price_max))}function url_parameters(){for(var query=window.location.search.slice(1),params=query.split("&"),params_lookup={},param=null,i=0;i<params.length;i++)param=params[i].split("="),param[0]&&(params_lookup[param[0]]=param[1]);return params_lookup}function get_url_parameter(name,default_value){var parameters=url_parameters();return parameters.hasOwnProperty(name)?parameters[name]:default_value}function set_url_parameter(name,value){var parameters=url_parameters();parameters[name]=value;var query_string="";Object.keys(parameters).forEach(function(key){query_string+=key+"="+parameters[key]+"&"});var url=window.location.href.split("?")[0];window.history.replaceState("page",document.title,url+"?"+query_string)}var saved_hash=window.location.hash,history=[],spinner=$(".js-items2-content").children(".js-spinner").eq(0).clone(),reloading_results=!1;$(".js-navigation").scrollTo(".selected",600,{offset:-($(window).width()/2)+50}),$(window).on("browse-reload-results",function(){reload_results()}),window.onpopstate=function(e){e.state&&change_content(history[e.state.content_index].html)},$("body").on("click",".js-filters .js-filter",function(){var el=$(this);return el.hasClass("selected")?(remove_filter_from_active_filter_bar(el.data("field"),el.data("value")),update_filter_form(),void reload_results()):(el.siblings().removeClass("selected").end().addClass("selected"),add_filter_to_active_filter_bar(el),hide_blocking_elements(),update_filter_form(),void reload_results())});var MOBILE_FILTERS_SELECTOR=".js-filters .js-mobile-filter",MOBILE_PENDING_ACTIVE_CLASSES="js-pending-apply selected";$("body").on("click",MOBILE_FILTERS_SELECTOR,function(){var $el=$(this);$el.data("multiple-select")===!1&&$el.siblings().removeClass(MOBILE_PENDING_ACTIVE_CLASSES),$el.toggleClass(MOBILE_PENDING_ACTIVE_CLASSES)}),$("body").on("click",".js-mobile-only-on-sale-filter",function(){$(this).toggleClass("js-pending-apply")}),$("body").on("click",".js-mobile-filters-apply",function(){$(MOBILE_FILTERS_SELECTOR).filter(".js-pending-apply").each(function(){var el=$(this);el.removeClass("js-pending-apply"),el.hasClass("selected")?add_filter_to_active_filter_bar(el):remove_filter_from_active_filter_bar(el.data("field"),el.data("value"))}),hide_blocking_elements();var set_only_on_sale=$(".js-mobile-only-on-sale-filter").filter(".js-pending-apply").prop("checked");update_filter_form(set_only_on_sale),update_filter_form_price_min_max($(".js-price-filter-slider-refine")[0].noUiSlider.get()),reload_results()}),$("body").on("click",".js-mobile-filters-close",function(){$(MOBILE_FILTERS_SELECTOR).filter(".js-pending-apply").toggleClass(MOBILE_PENDING_ACTIVE_CLASSES);var on_sale_filter=$(".js-mobile-only-on-sale-filter").filter(".js-pending-apply");on_sale_filter.prop("checked",!on_sale_filter.prop("checked"))}),$("body").on("click",".js-active-filters-bar .js-filter",function(){var el=$(this),field=el.data("field");el.hasClass("js-search-query")&&$("body").trigger("cancel_search"),remove_filter_from_active_filter_bar(field,el.data("value")),update_filter_form(),reload_results()}),$("body").on("click",".js-filter-modal-trigger",function(){$(window).width()<768&&($("body").css("overflow","hidden"),$(this).siblings(".js-filter-modal").removeClass("hidden"))}),$("body").on("click",".js-filter-modal-background",function(){$("body").removeAttr("style"),$(this).parent(".js-filter-modal").addClass("hidden")}),reload_results(),$("body").on("change",".js-only-on-sale-filter",function(){update_filter_form($(this).prop("checked")),$(".js-filter-modal-background").trigger("click"),reload_results()});var loading_more_items=!1,items_container=$(".js-items2-content"),load_more_url=items_container.data("load-more-url");$(window).scroll(_.throttle(function(){var near_bottom=$(window).scrollTop()+$(window).height()>$(document).height()-50;if(near_bottom&&!loading_more_items&&!reloading_results){items_container.append(spinner);var load_more_price_min,load_more_price_max,search_id,total_items_shown=$(".js-item").length,item_ids=[];if(items_container.find(".js-unloaded-item").slice(0,20).remove().map(function(){item_ids.push($(this).data("item-colour-id"))}),0===item_ids.length)return $(".js-no-results").length||$(".js-no-more-results").removeClass("hidden"),void items_container.children(".js-spinner").remove();load_more_price_min=$(".js-load-more-price-min").val(),load_more_price_max=$(".js-load-more-price-max").val(),search_id=$("#id_search_id").val(),loading_more_items=!0,$.ajax({type:"POST",url:load_more_url,data:{item_colours:item_ids.join(","),search_id:search_id,num_already_shown:total_items_shown,price_min:load_more_price_min,price_max:load_more_price_max},traditional:!0}).done(function(resp){items_container.find(".items-grid").append(resp.html),setup_page(),loading_more_items=!1,items_container.children(".js-spinner").remove();var page_num=parseInt(get_url_parameter("page",1),10);set_url_parameter("page",page_num+1),$(".js-no-results").length||$(".js-no-more-results").addClass("hidden")})}},200,{leading:!0})),$("body").on("item_link_navigation",function(){$(window).width()<=768&&window.history.replaceState("","","#"+window.scrollY)}),window.onpageshow=function(event){event.persisted&&scroll_to_hash_position()}}),$.feature("f_jobs",function(){function resizeDroneVideo(){var video=$("#drone-video"),ratio=.5625;video.height(video.width()*ratio)}resizeDroneVideo(),$(window).on("resize",function(){resizeDroneVideo()})}),$.feature("f_key_item_style_photos",function(){$(".js-style-photo-toggle").on("click",function(e){e.preventDefault();var elem=$(this),selecting=!elem.hasClass("selected");elem.toggleClass("selected",selecting),$.post(elem.data(selecting?"select-url":"unselect-url"))})}),$.feature("f_liked_items",function(){function refreshLikedItemsContent(){var $likedItemsContentContainer=$(".liked-items .js-items2-content");$.post($likedItemsContentContainer.data("url")).then(function(resp){$likedItemsContentContainer.html(resp.html)})}$("body").on("click",".js-sentiment[data-sentiment=positive]",function(){setTimeout(refreshLikedItemsContent,1e3)})}),$.feature("f_logged_out_overlay",function(){var el=$("#js-logged-out-modal"),key="thread-logged-out-overlay";if(0!==el.length){var timeout=parseInt(el.data("timeout"));setTimeout(function(){if("undefined"==typeof Cookies.get(key)){var timestamp=Math.floor(Date.now()/1e3);Cookies.set(key,timestamp),el.modal(),"undefined"!=typeof dataLayer&&dataLayer.push({event:"logged_out_overlay_shown"})}},timeout)}}),$.feature("f_login",function(){$(".facebook a").on("click",function(){var link=$(this);$(".facebook .loading").show(),$(".facebook .error").hide();var done=function(data){data.success!==!0?($(".facebook .error").show(),$(".facebook .loading").hide()):window.location=data.next};return $.facebook({success:function(FB){$.post(link.data("url"),{access_token:FB.getAccessToken()},done)},disabled:function(){$.post(link.data("url"),{access_token:"dummy"},done)},permissions:"email,user_photos"}),!1})}),$.feature("f_marketing",function(){$(".regenerate-ads").on("click",function(e){confirm($(this).data("alert"))||e.preventDefault()})}),$.feature("f_migration_discount",function(){function update_remaining_sale_time(){var seconds_remaining=(expires_at-new Date)/1e3;if(seconds_remaining<=0)return void banner.slideUp();var days=Math.floor(seconds_remaining/secs_day),hours=Math.floor(seconds_remaining%secs_day/secs_hour),minutes=Math.floor(seconds_remaining%secs_day%secs_hour/secs_minute);days<0&&(days=0),hours<0&&(hours=0),minutes<0&&(minutes=0),$days.text(days),$hours.text(hours),$minutes.text(minutes),0===days&&$days.parent(".days-container").hide(),0===days&&0===hours&&$hours.parent(".hours-container").hide(),0===days&&$minutes.parent(".minutes-container").show(),1===days?($days.parent(".days-container").find(".js-singular").show(),$days.parent(".days-container").find(".js-plural").hide()):($days.parent(".days-container").find(".js-plural").show(),$days.parent(".days-container").find(".js-singular").hide()),1===hours?($hours.parent(".hours-container").find(".js-singular").show(),$hours.parent(".hours-container").find(".js-plural").hide()):($hours.parent(".hours-container").find(".js-plural").show(),$hours.parent(".hours-container").find(".js-singular").hide()),1===minutes?($minutes.parent(".minutes-container").find(".js-singular").show(),$minutes.parent(".minutes-container").find(".js-plural").hide()):($minutes.parent(".minutes-container").find(".js-plural").show(),$minutes.parent(".minutes-container").find(".js-singular").hide()),setTimeout(update_remaining_sale_time,1e3)}var banner=$(".migration-discount-banner"),clock=$(".js-migration-discount-countdown"),$days=clock.find(".days"),$hours=clock.find(".hours"),$minutes=clock.find(".minutes"),expires_at=new Date;expires_at.setSeconds(expires_at.getSeconds()+parseInt(clock.data("remaining-seconds"),10));var secs_minute=60,secs_hour=60*secs_minute,secs_day=24*secs_hour;clock.length>0&&update_remaining_sale_time()}),$.feature("f_multiple_choice",function(){function update_classes(){$(".js-multiple-choice").each(function(){var target_form=$(this).data("form-target"),value=$(this).data("form-value"),target_option=$(target_form).withValue(value),selected=target_option.prop("selected");$(this).toggleClass("selected",selected).toggleClass("not-selected",!selected)})}$.fn.extend({set_submit_enabled:function(){return this.each(function(){var form_submit=$(this).closest("form").find('button[type="submit"]');if(!form_submit.is("[data-allow-empty]")){var selected=$(this).find("option").filter(function(){return $(this).prop("selected")&&""!=$(this).val()});form_submit.prop("disabled",0===selected.length)}})}}),$(".js-multiple-choice").on("click",function(){var target_form=$(this).data("form-target"),value=$(this).data("form-value"),target_option=$(target_form).withValue(value),selected=target_option.prop("selected");$(target_form).is("[multiple]")||($(target_form).find("option").removeAttr("selected"),$(".js-multiple-choice").removeClass("selected")),target_option.prop("selected",!selected),update_classes(),$(this).data("no-multiple-select-validation")||$(target_form).set_submit_enabled()}),$(".js-multiple-choice").each(function(){var target_form=$(this).data("form-target"),value=$(this).data("form-value"),target_option=$(target_form).withValue(value),selected=target_option.is("[selected]");$(this).toggleClass("selected",selected)}),$.unique($(".js-multiple-choice").map(function(){return $($(this).data("form-target"))})).set_submit_enabled()}),$.feature("f_navigation",function(){function toggleSidebar(){open?(body.removeClass("navigation-sidebar-visible"),body.removeClass("scroll-locked"),toggle.unbind(".lockPanning"),open=!1):(body.addClass("navigation-sidebar-visible"),body.addClass("scroll-locked"),toggle.bind("touchmove.lockPanning",function(e){e.preventDefault()}),open=!0)}var body=$("body"),toggle=$(".js-navigation-sidebar-toggle"),content=$(".main-container, .navigation, .box-sidebar-head, .alert"),open=!1,nav=$("header.js-navigation"),navContainer=$(".navigation-main"),headroomConf={offset:110,tolerance:{up:5,down:0},classes:{initial:"headroom-nav",pinned:"headroom-nav-pinned",unpinned:"headroom-nav-unpinned",top:"headroom-nav-top",notTop:"headroom-nav-not-top",bottom:"headroom-nav-unpinned",notBottom:"headroom-nav-bottom"}};$(window).width()<991&&nav[0]&&new Headroom(nav[0],headroomConf).init(),toggle.on("click",function(){toggleSidebar()});var start=0,distance=0;toggle.on("touchstart",function(e){start=e.originalEvent.changedTouches[0].pageX}),toggle.on("touchmove",function(e){var move=e.originalEvent.changedTouches[0].pageX;distance=-(start-move),open?distance<0&&distance>-260&&(content.css("-webkit-transform","translate3d("+(distance+260)+"px, 0, 0)"),content.css("-webkit-transition","none")):distance>0&&distance<260&&(content.css("-webkit-transform","translate3d("+distance+"px, 0, 0)"),content.css("-webkit-transition","none"))}),body.hasClass("f_breakout_nav")&&($(".f_breakout_nav").on("click",".navigation-main a",function(){var scrolledPosition=navContainer.scrollLeft();sessionStorage.setItem("navigation-main-scroll-pos",scrolledPosition)}),navContainer.scrollLeft(sessionStorage.getItem("navigation-main-scroll-pos"))),toggle.on("touchend",function(){content.removeAttr("style"),open?distance<-100&&toggleSidebar():distance>100&&toggleSidebar()}),$("body").on("cartChange",function(){nav.removeClass(headroomConf.classes.unpinned)})}),$.feature("f_olark",function(){window.olark||function(n,e,t,a,i,o,c,r,u){function l(){c.P(a),o(a)}o=function(){c.s.push(arguments)},c=o._={p:{0:+new Date},P:function(n){c.p[n]=new Date-c.p[0]},s:[],l:null,i:function(){},f:null,v:"olark"},o.configure=function(){o(t,"configure",arguments)},o.extend=function(){o(t,"extend",arguments)},o.declare=function(){o(t,"declare",arguments)},o.identify=function(){o(t,"identify",arguments)},n.addEventListener?n.addEventListener(a,l,!1):n.attachEvent("on"+a,l),c.P(1),c.P(2),n.olark=o,r=e.createElement(i),u=e.getElementsByTagName(i)[0],r.async=1,r.src="//static.olark.com/jsclient/loader1.js",u.parentNode.insertBefore(r,u)}(window,document,"call","load","script"),olark.identify("3276-985-10-4328");var chatAvailable=!1;olark("api.chat.onOperatorsAvailable",function(){chatAvailable=!0});var olark_info=$("#js-olark-info");olark_info.length&&(olark("api.visitor.updateFullName",{fullName:olark_info.data("name")}),olark("api.visitor.updateEmailAddress",{emailAddress:olark_info.data("email")}));var olark_open=$(".js-open-olark");olark_open.length&&(olark("api.box.hide"),olark_open.on("click",function(){chatAvailable&&olark("api.box.show")}))}),$.feature("f_options_form",function(){$(".js-options-form").find("input[type=checkbox]:checked, input[type=radio]:checked").parent("label").addClass("checked"),$("body").on("click",".js-options-form input[type=checkbox], .js-options-form input[type=radio]",function(){var label=$(this).parent();label.parents("form").find("label").removeClass("checked"),label.addClass("checked")})}),$.feature("f_orders",function(){var update_count=function(ele){var table=$(ele).closest("table"),third_party=ele.closest(".js-third-party-todo"),count=table.find("input:checked").length;third_party.find(".count").text(count)};$(".send-email").on("click",function(e){confirm("Really send email to user?")||e.preventDefault()}),$(".item-link").on("click",function(){$(this).parent().find("input[type=checkbox]").attr("checked","checked"),update_count($(this))}),$(".js-add-note").on("click",function(e){e.preventDefault(),$(this).hide(),$(".js-note-form").show().find("textarea").focus()}),$("input:checkbox").change(function(){update_count($(this))}),$(".js-out-of-stock").on("click",function(e){if(e.preventDefault(),confirm($(this).data("confirm-text"))){var tbody=$(this).closest("tbody")[0],url=$(this).data("url"),tr=$(this).closest("tr"),loading=$(this).find(".loading");loading.show(),$.ajax(url,{type:"POST"}).done(function(){tr.slideUp("slow",function(){tr.remove(),update_count($(tbody))})}).always(function(){loading.hide()})}}),$(".js-delete-third-party-order").on("submit",function(e){if(!confirm($(this).data("confirm-text")))return e.preventDefault(),!1}),$(".js-upload-pre-advice").on("submit",function(e){e.preventDefault();var form=$(this),button=form.find("button");if(!button.hasClass("disabled")){button.addClass("disabled");var loading=form.find(".loading");loading.show();var poll=function(url){$.get(url,function(data){data.sent&&window.location.reload()}).always(setTimeout(function(){poll(url)},1e3))};$.ajax(form.attr("action"),{type:"POST"}).done(function(data){poll(data.url)})}}),$(".js-highlight-state input").on("click",function(){var highlight=$(this).parents(".js-highlight-state");highlight.find("input").each(function(){highlight.removeClass(this.value)}),highlight.addClass(this.value)});var hash=window.location.hash;hash&&($('ul.nav a[href="'+hash+'"]').tab("show"),window.location.hash=hash)}),$.feature("f_payment",function(){function update_cvc_help_text(){var card_type=$.payment.cardType($("#number").val()),cvc_label=$('label[for="cvc"]');"amex"==card_type?cvc_label.text(cvc_label.data("amex-help-text")):cvc_label.text(cvc_label.data("non-amex-help-text"))}function use_shipping_address(){return $(".js-address-select [data-use-shipping-address]").prop("checked")}function toggle_billing_address(){$(".js-new-billing-address").toggle(!use_shipping_address())}var original_name=$('[name="name_on_card"]').val(),payment_data_unchanged=!0;$(".js-stripe-param").on("change",function(){payment_data_unchanged=!1}),$("#cvc").payment("formatCardCVC"),$("#number").payment("formatCardNumber"),$("#number").on("change",function(){$(this).toggleClass("error",!$.payment.validateCardNumber($(this).val()))}),$("#cvc").on("change",function(){$(this).toggleClass("error",!$.payment.validateCardCVC($(this).val()))}),$("#number").on("keydown change",update_cvc_help_text),update_cvc_help_text(),$(".field").on("keydown change",function(e){var fields=$(".field:visible");return $(this).removeClass("error"),$(this).siblings(".js-error-message").remove(),13===e.which&&fields.eq(fields.index($(this))+1).focus(),!0}),$(".js-address-select input").on("change",toggle_billing_address),toggle_billing_address(),$(".js-checkout-next").on("click",function(){var button=$(this);button.button("loading"),button.addClass("loading");var render_errors=function(data){var errors=$(".js-checkout-errors"),scroll_target=null;button.button("reset"),button.removeClass("loading"),errors.children().remove(),$(".field").removeClass("error"),$(".js-error-message").remove(),$.each(data,function(key){var elem=$('[name="'+key+'"]').addClass("error");scroll_target=scroll_target||elem,$.each(this,function(){$('<div class="error-message js-error-message"/>').text(this).insertBefore(elem)})}),"undefined"!=typeof data.__all__&&($.each(data.__all__,function(){$('<div class="error-message js-error-message"/>').text(this).appendTo(errors)}),scroll_target=null),$("html, body").animate({scrollTop:scroll_target?scroll_target.offset().top-150:0},"slow")},stripe_params={};$(".js-stripe-param").each(function(){var name=this.name,data=$(this).val();$(this).data("stripe-param-name")&&(name=$(this).data("stripe-param-name")),use_shipping_address()&&$(this).data("stripe-param-default")&&(data=$(this).data("stripe-param-default")),stripe_params[name]=data});var thread_params={};if($(".js-thread-param").each(function(){thread_params[this.name]=$(this).val()}),$(".js-thread-param").each(function(){$(this).prop("checked")&&(thread_params[this.name]=$(this).val())}),stripe_params.name===original_name&&payment_data_unchanged)return void $.post(button.data("url"),thread_params,function(data){return"undefined"!=typeof data.errors?void render_errors(data.errors):void(window.location.href=button.data("complete-url"))});var errors={},displayError=function(x){errors[x]=[$("#"+x).data("error-text")]};return $.payment.validateCardNumber(stripe_params.number)||displayError("number"),$.payment.validateCardCVC(stripe_params.cvc)||displayError("cvc"),$.payment.validateCardExpiry(stripe_params.exp_month,stripe_params.exp_year)||(displayError("exp_month"),displayError("exp_year")),$(".js-required-param").each(function(){0===$(this).val().trim().length&&(errors[$(this).attr("id")]=[button.data("required-text")])}),$.isEmptyObject(errors)?void Stripe.createToken(stripe_params,function(status,response){if(response.error){var errors={};return errors[response.error.param||"__all__"]=[response.error.message],void render_errors(errors)}thread_params.stripe_token=response.id,$.post(button.data("url"),thread_params,function(data){return"undefined"!=typeof data.errors?void render_errors(data.errors):void(window.location.href=button.data("complete-url"))})}):void render_errors(errors)})}),$.feature("f_postcode_lookup",function(){var api_key=$("body").data("ideal-postcodes-key");if($(".js-address-options").hide(),"undefined"==typeof api_key)throw"No postcode API key";$(".js-lookup-postcode").each(function(){var container=$(this),input=container.find(".js-postcode-input input"),button=container.find(".js-postcode-input button"),postcode_error=container.find(".js-postcode-error-empty"),unavailable_postcode_error=container.find(".js-postcode-error-unavailable"),full_address=container.find(".js-full-address");button.on("click",function(){postcode_error.addClass("hidden"),button.addClass("loading");var postcode=input.val();return 0===postcode.length?(postcode_error.removeClass("hidden"),void button.removeClass("loading")):(container.find("[data-postcode-postcode]").val(postcode.toUpperCase().trim()),void $.idealPostcodes.lookupPostcode(postcode,api_key,function(data){var options=container.find(".js-address-options");return options.find("ul").empty(),button.removeClass("loading"),2e3!==data.code||0===data.result.length?void postcode_error.removeClass("hidden"):void $.each(data.result,function(idx,data){options.show();var address="";$.each([data.line_1,data.line_2,data.line_3,data.post_town],function(idx){0!==this.length&&(address+=(idx>0?", ":"")+this)}),$('<li><a class="button" href="#"></a></li>').appendTo(options.find("ul")).find("a").text(address).on("click",function(e){e.preventDefault(),options.hide(),input.val(""),full_address.removeClass("hidden"),0===data.line_3.length&&(data.line_3=data.post_town,data.post_town=""),$.each(["line_1","line_2","line_3","post_town","postcode"],function(){container.find("[data-postcode-"+this+"]").val(data[this])})})})},function(){full_address.removeClass("hidden"),container.find("[data-postcode-postcode]").val(input.val()),input.val(""),unavailable_postcode_error.removeClass("hidden")}))}),input.on("keydown",function(e){if(13===e.which)return button.click(),e.preventDefault(),!1}),$(".js-enter-full-address").on("click",function(e){e.preventDefault(),full_address.removeClass("hidden"),$(this).parents(".js-postcode-input").addClass("hidden")})})}),$.feature("f_rate_item_colour",function(){function indicate(el,active){var item=el.parents(".js-item").length?el.parents(".js-item"):el.parents(".js-item-detail"),sentiment=el.data("sentiment");item.find(".js-sentiment").filter("[data-sentiment="+sentiment+"]").toggleClass("active",active),item.find(".js-sentiment").filter("[data-sentiment="+("positive"===sentiment?"negative":"positive")+"]").removeClass("active");var images=item.find("img");active?el.data("dim-item")?(item.removeClass("liked").addClass("disliked"),images.addClass("grayout")):(item.removeClass("disliked").addClass("liked"),images.removeClass("grayout")):(images.removeClass("grayout"),item.removeClass("disliked").removeClass("liked"))}function showStructuredFeedback(el){var button=el.find(".js-sentiment"),active=button.hasClass("active"),structuredFeedbackPopup=el.find(".js-feedback-negative-reasons");active&&!structuredFeedbackPopup.hasClass("js-tags-loaded")&&(structuredFeedbackPopup.addClass("js-tags-loaded"),$.get(button.parent().data("feedback-tags-url"),function(data){structuredFeedbackPopup.find("ul.tags").html(data.html)})),structuredFeedbackPopup.toggle(active)}function hideStructuredFeedback(el){var structuredFeedbackPopup=el.find(".js-feedback-negative-reasons");structuredFeedbackPopup.hide()}$("body").on("click",".js-sentiment",function(e){e.preventDefault(),e.stopPropagation();var el=$(this),active=!el.hasClass("active");$.post(el.data(active?"url":"url-delete")),el.hasClass("item-feedback-add")||indicate(el,active),el.parent().hasClass("js-trigger-feedback-negative-reasons")&&active?showStructuredFeedback(el.parent()):hideStructuredFeedback(el.parent())}),$("body").on("click",".js-close-feedback-negative-reasons",function(){hideStructuredFeedback($(this).parent().parent())}),$("body").on("mouseenter",".js-trigger-feedback-negative-reasons",function(){showStructuredFeedback($(this))}),$("body").on("mouseleave",".js-trigger-feedback-negative-reasons",function(){hideStructuredFeedback($(this))}),$("body").on("click",".js-feedback-negative-reasons li.js-tag",function(){var tag=$(this);tag.toggleClass("selected");var attr=tag.hasClass("selected")?"url":"url-delete";return $.post(tag.data(attr)),!1})}),$.feature("f_registration_brands",function(){var brands=$(".js-brands-list").children(),show_all_brands_button=$(".js-show-all");$(".js-logo").on("click",function(e){e.preventDefault();var el=$(this);el.toggleClass("selected").find("input").prop("disabled",!el.hasClass("selected")).end()}),show_all_brands_button.on("click",function(e){e.preventDefault(),brands.show(),$(".js-brands-input-field").show(),show_all_brands_button.hide()}),brands.slice(0,15).show(),show_all_brands_button.show()}),$.feature("f_registration_matching",function(){setTimeout(function(){window.location.href=$(".js-next").attr("href")},4e3)}),$.feature("f_registration_occasion",function(){var container=$(".js-style-photos-container"),min_photos=parseInt(container.data("min-photos"),10),max_photos=parseInt(container.data("max-photos"),10),photos=$(".js-photo-toggle");$("body").on("click",".js-photo-toggle",function(e){e.preventDefault();var elem=$(this),selecting=!elem.hasClass("selected");return elem.hasClass("blocked")?(elem.addClass("invalid-action"),void setTimeout(function(){elem.removeClass("invalid-action")},1e3)):(photos.removeClass("blocked",!selecting),elem.toggleClass("selected",selecting),sync(),void $.post(elem.data(selecting?"select-url":"unselect-url")))});var sync=function(){var num_selected=$(".js-photo-toggle.selected").length;$(".js-next").toggleClass("btn-disabled",num_selected<min_photos),num_selected>=max_photos&&$(".js-photo-toggle:not(.selected)").addClass("blocked")};sync()}),$.feature("f_registration_owned_items",function(){function show_more_items(count){shown_items+=count||20,owned_items.slice(0,shown_items).map(function(i,item){show_item(item)}),shown_items>=owned_items.length&&show_more_items_button.hide()}function show_item(item){var image=$(item).find("img"),image_url=image.data("image-url");image.attr("src",image_url),$(item).removeClass("hidden")}var shown_items=0,owned_items=$(".js-owned-items-list").children(),show_more_items_button=$(".js-show-all");$(".js-owned-item").on("click",function(e){e.preventDefault();var el=$(this);el.toggleClass("selected").find("input").prop("disabled",!el.hasClass("selected")).end()}),show_more_items_button.on("click",function(e){e.preventDefault(),show_more_items()}),show_more_items(10)}),$.feature("f_registration_photos",function(){function show_step_2(){step_1_elements.addClass("hidden"),step_2_elements.removeClass("hidden"),show_next_or_skip_button()}function show_step_1(){step_1_elements.removeClass("hidden"),step_2_elements.addClass("hidden")}function show_next_or_skip_button(){var has_selected=$("li",current_photos);has_selected.length>0?(skip_button.addClass("hidden"),next_button.removeClass("hidden")):(skip_button.removeClass("hidden"),next_button.addClass("hidden"))}function load_more_facebook_photos(url){var load_more_button=$(".js-load-more");load_more_button.hide(),$.ajax({url:url,type:"POST",data:{access_token:target.data("access_token")},success:function(data){$(".js-loading").hide(),target.append(data.html),"no_more"===data.status?$(".no-more").show():load_more_button.show()},complete:function(){var has_selected=$("li",current_photos);has_selected.length>0?show_step_2():show_step_1();var buttons=target.find(".js-loading, .js-load-more");target.append(buttons.clone()),buttons.remove()}})}var target=$(".facebook-photos"),upload_image=$("input[name=image]"),current_photos=$("ul.current-photos"),skip_button=$(".js-skip-button"),next_button=$(".js-done-adding-button"),step_1_elements=$(".js-photos-step-1"),step_2_elements=$(".js-photos-step-2");$(".js-show-photos-step-2").on("click",function(){show_step_2()}),$(".js-add-photo-now-fb").on("click",function(e){e.preventDefault(),$(".js-facebook-form").removeClass("hidden")}),$(".js-add-photo-now-upload").on("click",function(){$(".js-upload-form").find("input").trigger("click")}),upload_image.on("change",function(){this.form.submit()}),$("body").on("click",".js-load-more",function(e){e.preventDefault(),$(".js-loading").show();var last=$("li.facebook-photo",target).last();load_more_facebook_photos(last.data("load-more-url"))}),$("body").on("click",".upload-photo",function(e){e.preventDefault(),$(".js-upload-form").find("input").trigger("click")}),current_photos.on("click","a.current-photo",function(e){e.preventDefault();var el=$(this);$.post(el.data("delete-url"),function(){var facebook_url=el.parents("li").data("facebook-original-url");if("undefined"!=typeof facebook_url){var existing=$(".js-facebook-photos").find('li[data-facebook-photo-url="'+facebook_url+'"]');existing.removeClass("selected"),$(".overlay",existing).hide()}el.parents("li").remove(),show_step_2()})}),target.on("click","li.facebook-photo",function(){var el=$(this);el.toggleClass("selected");var form=$("form",el),url_el=$("#id_url",form);if(url_el.val(el.data("facebook-photo-url")),$("#id_url",form).val(el.data("facebook-photo-url")),el.hasClass("selected"))$.post(form.attr("action"),form.serialize(),function(data){current_photos.prepend(data),show_step_2()});else{var new_photos=$("ul.current-photos li[data-facebook-original-url]");new_photos.each(function(i,photo_el){var photo=$(photo_el);photo.data("facebook-original-url")==url_el.val()&&($("a",photo).click(),show_step_2())})}}),$("#facebook_connect, .js-add-photo-now-fb").on("click",function(){var link=$(this);return!$(".js-facebook-photos").length&&($.facebook({success:function(FB){$.post(link.data("url"),{access_token:FB.getAccessToken()},function(){window.location.reload()})},disabled:function(){$.post(link.data("url"),{access_token:"dummy"},function(){window.location.reload()})},permissions:"email,user_photos"}),!1)}),$.facebook_ready(function(){$("#facebook_connect").show()}),$("body").on("click",".js-done-adding-button",function(e){e.preventDefault(),
$(".js-done-adding-form").submit()}),$("body").on("click",".js-facebook-form-close",function(e){e.preventDefault(),$(".js-facebook-form").addClass("hidden")}),$(".js-loading").show(),0!==target.length?load_more_facebook_photos(target.data("xhr-facebook-photos-url")):0!==$("li",current_photos).length?show_step_2():show_step_1()}),$.feature("f_registration_style_photos3_transitional",function(){var container=$(".js-style-photos-container"),min_photos=parseInt(container.data("min-photos"),10),max_photos=parseInt(container.data("max-photos"),10),photos=$(".js-photo-toggle");$("body").on("click",".js-photo-toggle",function(e){e.preventDefault();var elem=$(this),selecting=!elem.hasClass("selected");return elem.hasClass("blocked")?(elem.addClass("invalid-action"),void setTimeout(function(){elem.removeClass("invalid-action")},1e3)):(photos.removeClass("blocked",!selecting),elem.toggleClass("selected",selecting),sync(),void $.post(elem.data(selecting?"select-url":"unselect-url")))});var sync=function(){var num_selected=$(".js-photo-toggle.selected").length;$(".js-next").toggleClass("btn-disabled",num_selected<min_photos),num_selected>=max_photos&&$(".js-photo-toggle:not(.selected)").addClass("blocked")};sync()}),$.feature("f_registration_trouser_sizes",function(){$(".js-toggle").on("click",function(e){e.preventDefault();var el=$(this),input=el.siblings("input");el.hasClass("selected")?(el.removeClass("selected"),input.attr("disabled","disabled")):(el.addClass("selected"),input.removeAttr("disabled"))})}),$.feature("f_registration_wanted_items",function(){function show_more_items(count,initial){var shown_items=popular_items.filter(":not(.hidden)").length;shown_items+=count||20,popular_items.slice(0,shown_items).map(function(i,item){show_item(item,initial)}),shown_items>=popular_items.length&&show_more_items_button.hide()}function show_item(item,initial){var el=$(item),image=el.find("img"),image_url=image.data("image-url");image.attr("src",image_url),el.removeClass("hidden"),initial||el.addClass("force-show")}var popular_items=$(".js-classification-instance.js-popular"),show_more_items_button=$(".js-show-more"),user_wanted=$(".js-wanted-items-list");$("body").on("wanted-item-added",function(){$(".js-wanted-items-list .js-item").each(function(){var el=$(this),key=el.data("key"),other=$('[data-key="'+key+'"]').not(el);other.addClass("selected")})}),$("body").on("click",".js-item",function(){var el=$(this),key=el.data("key"),other=$('[data-key="'+key+'"]').not(el),selecting=!el.hasClass("selected");selecting?$.post(el.data("add-url"),function(resp){user_wanted.append(resp.html),el.addClass("selected")}):$.post(el.data("remove-url"),function(){el.hasClass("js-user-wanted")?(el.parent(".js-classification-instance").remove(),other.removeClass("selected")):(el.removeClass("selected"),other.parent(".js-classification-instance").remove())})}),show_more_items_button.on("click",function(e){e.preventDefault(),show_more_items(20,!1)}),show_more_items(10,!0)}),$.feature("f_report_miscategorisation",function(){$(".report").on("click",function(e){e.preventDefault();var link=$(this);link.hasClass("reported")||$.post(link.attr("href"),function(){link.addClass("reported")})})}),$.feature("f_search",function(){function expandSearch(){expanded_search.removeClass("hidden"),search_overlay.removeClass("hidden"),search_input.focus(),compact_search.addClass("hidden"),$(window).width()<992&&body.addClass("scroll-locked")}function collapseSearch(){expanded_search.addClass("hidden"),search_overlay.addClass("hidden"),compact_search.removeClass("hidden"),body.removeClass("scroll-locked")}var compact_search=$(".js-search-compact"),expanded_search=$(".js-search-expanded"),search_input=expanded_search.find("input"),search_toggle=$(".js-search-toggle"),search_overlay=$(".js-search-overlay"),body=$("body");search_toggle.on("click",function(e){e.preventDefault(),expanded_search.hasClass("hidden")?expandSearch():collapseSearch()}),body.on("cancel_search",function(){search_input.val(null),collapseSearch()})}),$.feature("f_segmented_control",function(){$("body").on("click",".js-segmented-control input[type=radio]",function(){var label=$(this).parent();label.parents("form").find("label").removeClass("checked"),label.addClass("checked")})}),$.feature("f_selection",function(){window.attach_appear_event=function(){$(".load-outfit").appear(function(){var div=$(this);$.ajax({type:"GET",hide_errors:!0,url:div.data("url"),success:function(html){div.replaceWith($.trim(html))}})})}}),$.feature("f_settings_account",function(){$(".js-photo-input").on("change",function(){this.form.submit()})}),$.feature("f_settings_close_account",function(){$(".js-show-confirm").on("click",function(){$(".js-confirm").show(),$(".js-reason").hide()})}),$.feature("f_settings_close_account_done",function(){setTimeout(function(){$(".js-settings-account-closed").length&&(window.location.href=$(".js-settings-account-closed").data("redirect-url"))},7e3)}),$.feature("f_settings_mobile_navigation",function(){function redirectToDesktopPage(){var desktop_view_url=$(".js-desktop-default-view").attr("href");$(window).width()>768&&void 0!=desktop_view_url&&(window.location.href=desktop_view_url)}redirectToDesktopPage(),$(window).resize(function(){redirectToDesktopPage()})}),$.feature("f_settings_orders",function(){}),$.feature("f_signup",function(){var button=$(".facebook a"),text=button.text(),facebook_ready=!1;button.show(),button.addClass("loading"),button.text(""),button.on("click",function(){return facebook_ready}),$.facebook_ready(function(){button.removeClass("loading"),button.text(text),facebook_ready=!0})}),$.feature("f_slider",function(){"use strict";function animateSliderValueChange($slider,newValue){return $slider.data("allow-animation")?void $({animatedValueChange:parseFloat($slider.val())}).animate({animatedValueChange:newValue},{duration:180,step:function(){$slider.val(this.animatedValueChange)},complete:function(){$slider.trigger("change")}}):($slider.val(newValue),void $slider.trigger("change"))}function updateSliderValue(el){var slider=$(el),logSlider=slider.data("logSlider");if(logSlider){var sliderRangeCompanion=slider.data("range-companion");sliderRangeCompanion||(sliderRangeCompanion=slider.siblings(".range-companion"),slider.data("range-companion",sliderRangeCompanion));var sliderLabel=slider.data("slider-label");sliderLabel||(sliderLabel=slider.siblings("label.value").children(".slider-value"),slider.data("slider-label",sliderLabel));var val=logSlider.value(slider.val()),roundedVal=logSlider.roundScaleValue(val.toFixed(1));roundedVal=Math.max(roundedVal,slider.data("min")),roundedVal=Math.min(roundedVal,slider.data("max")),sliderRangeCompanion.val(roundedVal),sliderLabel.text(roundedVal)}else slider.siblings("label.value").children(".slider-value").text(slider.val())}$(".f_slider").on("change",".range-companion",function(){var $el=$(this),$slider=$el.siblings("input[type=range]"),logSlider=$slider.data("logSlider");logSlider.value($el.val()),animateSliderValueChange($slider,logSlider.position($el.val()))}),$(".f_slider").on("mousemove mousedown touchmove touchdown touchend change",'input[type="range"]',function(){updateSliderValue($(this))})}),$.feature("f_stock_notification",function(){function reset(){var container=$(".stock-notification .expanded-content");container.find(".js-notify-button").removeClass("loading"),container.find(".js-notify-success").hide(),container.find(".error").hide(),container.find(".js-notify-button").show()}$("body").on("click",".js-expand-stock-notification",function(e){e.preventDefault();var container=$(this).parents(".stock-notification");container.hasClass("expanded")?(container.find(".expanded-content").slideUp(),container.removeClass("expanded")):(container.addClass("expanded"),container.find(".expanded-content").slideDown())}),$("body").on("change",".js-stock-notification-select",function(){reset()}),$("body").on("click",".js-notify-button",function(e){e.preventDefault(),reset();var el=$(this),container=el.parents(".expanded-content"),url=container.find("select").val();return url?(container.find(".js-notify-button").addClass("loading"),void $.ajax({url:url,type:"POST"}).done(function(){container.find(".js-notify-success").show(),el.hide()}).fail(function(){container.find(".js-notify-error").show()}).always(function(){container.find(".js-notify-button").removeClass("loading")})):void container.find(".js-notify-please-select").show()})}),$.feature("f_structured_feedback",function(){var timeout=void 0,post=function(url,data,success,container){container&&(container.find(".tag-confirmation").stop().css({opacity:1}),clearTimeout(timeout),timeout=setTimeout(function(){container.find(".tag-confirmation").stop().animate({opacity:0},800)},1e3)),$.ajax({url:url,type:"POST",data:data||{},success:success||function(){}})};$("body").on("click",".feedback.tag-menu a",function(){var container=$(this).parents(".structured-feedback");container.find(".tag-menu a").removeClass("selected"),$(this).addClass("selected");var slug=$(this).data("sentiment_slug"),tabs=container.find(".tags[data-sentiment_slug="+slug+"]");return tabs.is(":visible")?tabs.hide():(container.find(".tags").hide(),tabs.show(),post($(this).data("url"),{},function(){"undefined"!=typeof mixpanel&&mixpanel.track("Added sentiment",{slug:slug})},0===tabs.length?container:null)),!1}),$("body").on("click",".structured-feedback li.tag",function(){var tag=$(this);tag.toggleClass("selected");var attr=tag.hasClass("selected")?"url":"url-delete";return post(tag.data(attr),{},function(){"undefined"!=typeof mixpanel&&mixpanel.track("Added tag",{tag:tag.text()})},tag.parents(".structured-feedback")),!1}),$("body").on("click",".structured-feedback .other-reason",function(){var tag=$(this);tag.toggleClass("selected"),tag.siblings("form").toggle()}),$("body").on("submit",".structured-feedback form",function(e){e.preventDefault();var form=$(this),error=function(){form.parent().siblings("div.other-reason-success").hide(),form.parent().siblings("div.other-reason-error").show()};form.find(".loading").show(),$.ajax({url:form.attr("action"),type:"POST",data:form.serialize(),success:function(data){switch(data.status){case"success":form.parent().siblings("div.other-reason-error").hide(),form.parent().siblings("div.other-reason-success").show();break;case"error":error()}},error:error,complete:function(){form.find(".loading").hide()}})})}),$.feature("f_structured_requests",function(){$(".request-buttons button").on("click",function(){var target_input=$($(this).data("form-target")),target_value=$(this).data("form-value");target_input.val(target_value)});var $request_content_type=$("#request-content-type");$request_content_type.on("click","button",function(){$request_content_type.hide(),$("#request-content").show()}),$("#request-content textarea").on("change keyup paste",function(){$("#id_content").val()?$(this).next("button").addClass("btn-primary"):$(this).next("button").removeClass("btn-primary")}),$("#request-content").on("click","button",function(){$("#id_content").val()&&($("#request-content").hide(),$("#request-type").show())})}),$.feature("f_wardrobe",function(){$(".js-suggestion-review").on("click",function(){var el=$(this),container=el.parents(".js-review-item");$.post(el.data("url")).done(function(){container.slideUp(function(){container.remove()})})})}),$.feature("f_superuser_inspired_by_photos",function(){$("ul.photos a.toggle").on("click",function(e){e.preventDefault();var elem=$(this);elem.toggleClass("selected"),elem.hasClass("selected")?elem.prev("input").removeAttr("disabled"):elem.prev("input").attr("disabled","disabled")})}),$.feature("f_superuser_items_ordered",function(){var container=$(".items"),url=container.data("url");container.isotope({itemSelector:".item"}),$(".items").on("mouseover",".item",function(){var item=$(this);item.addClass("hover");var metadata=item.find(".metadata-inner"),height=Math.max(0,item.height()/2-metadata.height()/2);metadata.css({"padding-top":height+"px"})}),$(".items").on("mouseout",".item",function(){$(this).removeClass("hover")});var poll=function(){$.get(url,{},function(html){var elems=$(html);url=elems.data("url"),0!==elems.children().length&&container.prepend(elems).isotope("prepended",elems).isotope("layout")}).always(function(){setTimeout(poll,6e4)})};poll()}),$.feature("f_superuser_recommendation_server",function(){var update=function(data){var result=$("#result");result.text(""),$(".loading").removeClass("hidden"),$.ajax({url:result.data("url"),data:data,type:"POST",error:function(xhr,errorText,errorThrown){result.text(errorThrown)},complete:function(){$(".loading").addClass("hidden")},success:function(html){$(".loading").addClass("hidden"),result.html(html)}})};update({}),$("body").on("click",".js-show",function(e){e.preventDefault();var link=$(this);link.addClass("hidden"),$("."+link.data("show")).removeClass("hidden")}),$("body").on("click",".js-recalculate",function(e){e.preventDefault();var button=$(this),form=button.parents("form");update(form.serialize())})}),$.feature("f_superuser_reports_output",function(){$(".js-view-output").on("click",function(e){e.preventDefault(),$(this).hide(),$(".js-output").show()})}),$.feature("f_superuser_style_details",function(){$(".js-new-style-detail").on({keypress:function(e){if(13===e.keyCode){var el=$(this),name=el.val().trim(),type=el.data("style-detail-type");el.attr("disabled",!0),$.post(el.data("url"),{name:name,style_detail_type:type},function(result){el.closest(".style-detail-group").find(".style-details").append(result).find(".empty").remove(),el.val(""),el.attr("disabled",!1)}).error(function(){el.attr("disabled",!1)})}}})}),$.feature("f_support",function(){$(".js-tag-filter").on("change",function(){window.location.href=$(this).val()}),$(".js-content").keydown(function(e){e.ctrlKey&&13===e.which&&$(this).parents("form").submit()})}),$.feature("f_support_quality_responses",function(){$(".js-show-hide-no-feedback").on("click",function(){$(".js-no-feedback").toggleClass("hide")})}),$.feature("f_thread_item_tracking",function(){var ids_to_send={},id_source_slugs={},ids_previously_sent={},bind_appear_events=function(){var jsItem=$(".js-item");jsItem.waypoint("destroy"),jsItem.waypoint({handler:function(){var $el=$(this),item_id=$el.data("item-id"),source_slug=$el.data("item-source-slug");ids_to_send[item_id]=!0,id_source_slugs[item_id]=source_slug},offset:"75%"})},log_items_viewed=function(){var to_send=[];for(var item_id in ids_to_send)item_id in ids_previously_sent||(ids_previously_sent[item_id]=!0,to_send.push({source_slug:id_source_slugs[item_id],item_id:item_id}));to_send.length>0&&$.ajax({url:"/log/items-viewed-attributed",type:"POST",data:JSON.stringify(to_send)}),setTimeout(log_items_viewed,1e3)};log_items_viewed();var matches_url_prefix=function(url){var threadXhrPrefix="/xhr/";return url.substring(0,threadXhrPrefix.length)===threadXhrPrefix};bind_appear_events(),$(document).on("ajaxComplete",function(event,xhr,settings){matches_url_prefix(settings.url)&&bind_appear_events()})}),$.feature("f_timed_competition",function(){function pluralise(str,num){return 1===num?str:str+"s"}function update_remaining_time(){var seconds_remaining=(expires_at-new Date)/1e3;if(seconds_remaining<=0)return void banner.slideUp();var days=Math.floor(seconds_remaining/secs_day),hours=Math.floor(seconds_remaining%secs_day/secs_hour),minutes=Math.floor(seconds_remaining%secs_day%secs_hour/secs_minute);days<0&&(days=0),hours<0&&(hours=0),minutes<0&&(minutes=0),days>1?clock.text(days+" days "+pluralise(hours+" hour",hours)):(hours+=24*days,clock.text(pluralise(hours+" hour",hours)+" "+pluralise(minutes+" minute",minutes))),setTimeout(update_remaining_time,1e3),text.removeClass("invisible")}var banner=$(".js-timed-competition-banner"),text=$(".js-timed-competition-text"),clock=$(".js-timed-competition-countdown"),expires_at=new Date(clock.data("expires-iso-date"));banner.on("click",".short-message",function(){banner.addClass("expanded")}),banner.on("click",".close-full button",function(){banner.removeClass("expanded")});var secs_minute=60,secs_hour=60*secs_minute,secs_day=24*secs_hour;clock&&update_remaining_time()}),$.feature("f_tip_selections",function(){$(".js-tip-selection-content").each(function(){var elem=$(this),url=elem.data("url");$.get(url).success(function(result){elem.html(result.html),elem.find(".js-lazy-load").each(function(){var img_elem=$(this);img_elem.css("background-image",img_elem.data("background-image"))})}).error(function(){console.log("Failed to get recommendations for tip selection",url),elem.text("")})})}),$.feature("f_tips_blog",function(){function showTopicsModal(){clearSelectedTopicInModal(),setSelectedTopicInModal(getSelectedTopicIndex()),$("body").css("overflow","hidden"),$(".js-topics-select-modal").removeClass("hidden")}function hideTopicsModal(){$("body").css("overflow",""),$(".js-topics-select-modal").addClass("hidden")}function getSelectedTopicIndex(){return $(".topics-list .topic-item.selected").index()}function clearSelectedTopicInModal(){$(".topics-select-modal-content .topic-item").removeClass("selected")}function setSelectedTopicInModal(index){index!==-1&&$(".topics-select-modal-content .topic-item").eq(index).addClass("selected")}$(".categories-list").on("scroll",function(){var scrolledArea=$(this).scrollLeft()+$(this).innerWidth(),scrollableWidth=$(this)[0].scrollWidth,maskClass={right:"mask-right",left:"mask-left"};0===$(this).scrollLeft()?$(".categories-list-wrapper").removeClass(maskClass.left):$(".categories-list-wrapper").hasClass(maskClass.left)||$(".categories-list-wrapper").addClass(maskClass.left),scrolledArea>=scrollableWidth?$(".categories-list-wrapper").removeClass(maskClass.right):$(".categories-list-wrapper").hasClass(maskClass.right)||$(".categories-list-wrapper").addClass(maskClass.right)}),$(".js-topics-select-modal-trigger").on("click",function(){$(window).width()<768&&showTopicsModal()}),$(".js-topics-select-modal-background").on("click",function(){hideTopicsModal()})}),$.feature("f_toggle_out_of_stock_filter",function(){$(".show-only-in-stock").on("change",function(){var attr=$(this).prop("checked")?"hide-url":"show-url",url=$(this).data(attr);$.post(url).done(function(){window.location.reload()})})}),$.feature("f_tour",function(){$(".js-tour-modal").on("hide.bs.modal",function(){$.post($(this).data("hide-highlight-url"))}),$(".js-tour-modal").modal("show"),$(".js-dismiss-intro").each(function(){$.post($(this).data("url"))})}),$.feature("f_unsupported_browser_notice",function(){function get_browser_info(){var tem,ua=navigator.userAgent,M=ua.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];return/trident/i.test(M[1])?(tem=/\brv[ :]+(\d+)/g.exec(ua)||[],{name:"IE",version:tem[1]||""}):"Chrome"===M[1]&&(tem=ua.match(/\bOPR\/(\d+)/),null!=tem)?{name:"Opera",version:tem[1]}:(M=M[2]?[M[1],M[2]]:[navigator.appName,navigator.appVersion,"-?"],null!=(tem=ua.match(/version\/(\d+)/i))&&M.splice(1,1,tem[1]),{name:M[0],version:M[1]})}var key="unsupported-browser-notice",browser=get_browser_info();if(("IE"==browser.name||"MSIE"==browser.name)&&browser.version<=9){if("undefined"!=typeof Cookies.get(key))return;$(".js-unsupported-browser-notice").removeClass("hidden")}$("body").on("click",".js-unsupported-browser-close",function(){$(".js-unsupported-browser-notice").addClass("hidden");var timestamp=Math.floor(Date.now()/1e3);Cookies.set(key,timestamp)})}),$.feature("f_user_content2",function(){function setRemoteFeedbackReasons(){$(".js-trigger-feedback-negative-reasons").removeClass("js-trigger-feedback-negative-reasons").addClass("js-trigger-feedback-negative-reasons-remote"),$(".js-trigger-feedback-negative-reasons-remote").on("click",function(){var el=$(this),dislikeButtonIsActive=el.find(".js-sentiment").hasClass("active");if(!dislikeButtonIsActive){$(".js-temp-feedback-negative-reasons").remove();var reasons=el.find(".js-feedback-negative-reasons");reasons.clone().addClass("js-temp-feedback-negative-reasons").appendTo("body").show(),$.get(el.data("feedback-tags-url"),function(data){$(".js-temp-feedback-negative-reasons").find("ul.tags").html(data.html)})}})}function unsetRemoteFeedbackReasons(){$(".js-trigger-feedback-negative-reasons-remote").removeClass("js-trigger-feedback-negative-reasons-remote").addClass("js-trigger-feedback-negative-reasons")}function loadLazyElements(){$("[data-load-xhr]").each(function(){var elem=$(this),url=elem.data("load-xhr");null!==url&&(elem.data("load-xhr",null),$.get(url).done(function(result){updateDOM(elem,result),elem.addClass("in")}))})}function setHowToWearSlider(){var howToWearSlider=$(".js-slider-how-to-wear").filter(":not(.slick-initialized)");howToWearSlider.slick({dots:!1,arrows:!0,mobileFirst:!0,centerMode:!1,infinite:!1,useTransform:!1,responsive:[{breakpoint:0,settings:"unslick"},{breakpoint:767,settings:"slick"}]});var howToWearSlideNext=howToWearSlider.find(".slick-next"),howToWearSlidePrev=howToWearSlider.find(".slick-prev");howToWearSlideNext.on("click",function(){$(this).hide().parents(".js-slider-how-to-wear").find(".slick-prev").fadeIn(300)}),howToWearSlidePrev.on("click",function(){$(this).hide().parents(".js-slider-how-to-wear").find(".slick-next").fadeIn(300)})}$(".js-calculate-sliding-panel-width").each(function(){var container=$(this),items=container.children(".js-sliding-panel-content"),percentage_width=container.data("percentage-width");container.css("width",percentage_width*items.length+"%"),items.css("width",100/items.length+"%")}),$("body").on("sentimentChange",function(e){"use strict";var $el=$(e.target),$card=$el.closest(".content-card"),$savedStatus=$card.find(".saved-status"),sentiment=e.originalEvent.detail.sentiment;$card.removeClass("sentiment-negative").removeClass("sentiment-positive").removeClass("sentiment-neutral"),"negative"===sentiment?$.scrollTo($card,300,{over:{top:-.1},onAfter:function(){$card.addClass("sentiment-"+e.originalEvent.detail.sentiment),$savedStatus.text($savedStatus.data("saved-text"))}}):($card.addClass("sentiment-"+e.originalEvent.detail.sentiment),$savedStatus.text($savedStatus.data("saved-text"))),setTimeout(function(){$savedStatus.text("")},5e3)}),$("body").on("item_colour_preferred_size",function(e){var el=$(".js-in-stock-in-your-size[data-item-colour-id="+e.item_colour_id+"]"),target=el.find(".js-size-text");"out_of_stock"!==e.item_colour_size_stock&&(el.removeClass("hidden"),target.text(e.item_colour_size_text))}),0!==$(".js-home-count").length&&$.post($(".js-infinite-scroll-control").data("mark-all-user-content-notifications-as-viewed-url")),$("body").on("click",".js-change-background-image",function(e){e.preventDefault();var el=$(this),target=el.parents(".js-change-image-container").find(".js-change-image-target");target.css("background-image",el.data("original-background-image")),target.css("background-size","contain")}),$("body").on("click",".js-scroll-to",function(e){e.preventDefault();var target="#item-"+$(this).attr("data-item-id");$("body").scrollTo($(target),300,{axis:"y"})}),loadLazyElements(),$("body").on("infinite-scroll-loaded",function(){setHowToWearSlider(),$(window).width()<768&&setRemoteFeedbackReasons(),loadLazyElements()}),$(window).resize(function(){$(window).width()<768?setRemoteFeedbackReasons():unsetRemoteFeedbackReasons()}),$("body").on("click",".js-show-alternatives",function(e){e.preventDefault();var el=$(this);el.parents(".item-container").addClass("tall"),el.addClass("hidden"),el.siblings(".js-hide-alternatives").removeClass("hidden"),el.siblings(".js-item-alternatives-content").show()}),$("body").on("click",".js-hide-alternatives",function(e){e.preventDefault();var el=$(this);el.parents(".item-container").removeClass("tall"),el.addClass("hidden"),el.siblings(".js-show-alternatives").removeClass("hidden"),el.siblings(".js-item-alternatives-content").hide()})}),$.feature("f_user_content2_hi4_viewed",function(){function bind_waypoints(){$("[data-hi4-card-unviewed-url]").waypoint("destroy"),$("[data-hi4-card-unviewed-url]").not('[data-state="loaded"]').waypoint({offset:"50%",handler:function(){var el=$(this);$.post(el.data("hi4-card-unviewed-url")),el.attr("data-state","loaded"),el.waypoint("destroy")}})}$(window).on("ajaxComplete",bind_waypoints)}),$.feature("f_user_feedback",function(){function reset(){loading.hide(),error.hide(),error_no_message.hide()}var modal=$("#js-user-feedback-modal"),loading=modal.find(".js-loading"),form=modal.find("form"),submit=modal.find(".js-submit"),error=modal.find(".js-error-message"),error_no_message=modal.find(".js-error-message-no-content"),success=modal.find(".js-success");reset(),form.on("submit",function(e){return e.preventDefault(),""===$(".js-feedback").val()?void error_no_message.slideDown("fast"):(reset(),void loading.slideDown("fast",function(){submit.button("loading"),form.find(".js-url-field").val(window.location),$.ajax({url:form.attr("action"),type:form.attr("method"),data:form.serialize()}).done(function(){loading.slideUp("fast"),form.slideUp("fast"),success.slideDown("fast",function(){setTimeout(function(){modal.modal("hide")},1500)})}).error(function(){loading.slideDown("fast",function(){error.slideUp("fast"),form.slideDown("fast")})}).always(function(){submit.button("reset")})}))}),modal.on("hidden.bs.modal",function(){form[0].reset(),form.show(),loading.hide(),error.hide(),error_no_message.hide(),success.hide()})}),$.feature("f_waiting",function(){$(".js-reassign-item").on("click",function(e){if(e.preventDefault(),confirm($(this).data("confirm-text"))){var el=$(this);el.attr("disabled",!0),$.post(el.data("url"),function(){el.closest(".item-row").remove()})}})}),$.feature("f_wardrobe",function(){$("#js-wanted-modal, #js-owned-modal").one("show.bs.modal",function(event){var modal=$(this),button=$(event.relatedTarget),url=button.data("url");$.get(url).done(function(resp){modal.find(".js-modal-content").html(resp.html),modal.find("input").focus()})}),$("#js-classification-modal").on("show.bs.modal",function(event){var modal=$(this),button=$(event.relatedTarget),url=button.data("url");$.get(url).done(function(resp){modal.find(".js-modal-content").html(resp.html),modal.find(".js-similar-item-colours").trigger("show-similar-item-colours"),modal.find(".js-wear-it-with").trigger("show-wear-it-with")})}).on("hide.bs.modal",function(){$(this).find(".js-modal-content").empty()}),$("body").on("click",".js-add-wanted, .js-add-owned",function(){var el=$(this);void 0!==el.data("url")&&(el.addClass("loading"),$.post(el.data("url")).done(function(resp){el.removeAttr("data-url").removeClass("loading").addClass("btn-success"),$(el.data("target-list")).append(resp.html).find("[data-empty-state]").addClass("hidden"),$("body").trigger("wanted-item-added")}))}),$(".wardrobe-wanted-items").on("click",".js-remove-wanted",function(){var el=$(this),container=el.parents(".js-wanted-container");$.post(el.data("url")).done(function(){container.slideUp(function(){container.remove()})})}),$("body").on("click",".js-classification-overlay-toggle-button",function(){var url,new_state,new_text,el=$(this);"removing"===el.data("state")?(url=el.data("remove-url"),new_text=el.data("add-text"),new_state="adding"):(url=el.data("add-url"),new_text=el.data("remove-text"),new_state="removing"),$.post(url).done(function(resp){"adding"===el.data("state")?$(el.data("target-list")).append(resp.html).find("[data-empty-state]").addClass("hidden"):($(el.data("target-item")).remove(),el.parents(".js-modal").modal("hide")),el.text(new_text),el.data("state",new_state)})}),$("body").on("click",".js-wardrobe-toggle-view:not(.current)",function(e){e.preventDefault();var tab=$(this),allTabs=tab.parents(".nav-pills").find(".js-wardrobe-toggle-view"),target=$(tab.data("target"));target.toggleClass("hidden-xs"),allTabs.toggleClass("current")})}),$.feature("f_wardrobe_add_items",function(){var synonyms=null,items={};$("body").on({focus:function(){var key=$(this).data("target-choices");items[key]=items[key]||$($(this).data("target-choices")).children().map(function(){return{name:$(this).data("name"),el:$(this)}}).toArray(),synonyms=synonyms||$(".js-wardrobe-synonyms").children().map(function(){return{pattern:new RegExp($(this).data("pattern")),replacement:$(this).html().trim()}}).toArray(),$(this).trigger("input")},input:function(){var results=$($(this).data("target-list")),empty=$($(this).data("target-empty")),initial=$($(this).data("target-initial")),val=$(this).val().trim(),key=$(this).data("target-choices");if(initial.toggleClass("hidden",!!val),results.addClass("hidden"),empty.addClass("hidden"),results.empty(),val){var words=val.split(/\s+/).map(function(w){for(var i=0;i<synonyms.length;i++)if(synonyms[i].pattern.test(w))return synonyms[i].replacement;return w}),re=new RegExp("(^"+words.join("\\s")+"|\\b(?:"+words.join("|")+"))","i");items[key].map(function(item){var match=item.name.match(re),score=1/0;return match&&(score=Math.abs(1-match[1].length/item.name.length)),{item:item,score:score,match:match}}).filter(function(result){return!!result.match}).sort(function(a,b){return a.score==b.score?b.item.name.length-a.item.name.length:a.score-b.score}).forEach(function(result){var result_elem=result.item.el.clone(),img=result_elem.find("img");img.attr("src",img.data("lazy-load-src")),results.append(result_elem)}),empty.toggleClass("hidden",!results.is(":empty")),results.toggleClass("hidden",results.is(":empty"))}}},".js-category-selector-input")}),$.feature("f_xhr_preferred_sizes",function(){function preselect_size(){var item_colour_ids=[];$("[data-populate-xhr-preferred-size]").each(function(i,el){var $el=$(el);item_colour_ids.push($el.data("item-colour-id")),$el.removeAttr("data-populate-xhr-preferred-size")}),0!==item_colour_ids.length&&$.ajax({url:url,type:"GET",data:{item_colour_ids:item_colour_ids},traditional:!0}).done(function(data){$.each(data,function(item_colour_id,item_colour_size_id){if("number"==typeof item_colour_size_id||null===typeof item_colour_size_id){var selected_size_stock_level,select=$(".js-size-selector[data-item-colour-id="+item_colour_id+"]"),selected_size_text="";"number"==typeof item_colour_size_id&&select.each(function(){var option=$(this).find("option[data-item-colour-size-id="+item_colour_size_id+"]");option.prop("selected",!0),selected_size_stock_level=option.data("stock-level"),selected_size_text=option.text();var low_stock="low_stock"==option.data("stock-level");$(".js-low-stock-notice[data-item-colour-id="+item_colour_id+"]").toggleClass("visible",low_stock)}),$("body").trigger({type:"item_colour_preferred_size",item_colour_id:item_colour_id,item_colour_size_id:item_colour_size_id,item_colour_size_text:selected_size_text,item_colour_size_stock:selected_size_stock_level})}})})}var url=$(".f_xhr_preferred_sizes").data("xhr-preferred-size-url");$("body").on("item_colour_preferred_size",function(e){var el=$(".js-in-stock-in-your-size[data-item-colour-id="+e.item_colour_id+"]");if(0!==el.length){var size=el.find(".js-size-text");el.find(".js-stock-level").each(function(i,stock_el){var $stock_el=$(stock_el);"out_of_stock"===e.item_colour_size_stock?$stock_el.text($stock_el.data("out-of-stock-text")):($stock_el.text($stock_el.data("in-stock-text")),size.text(e.item_colour_size_text))}),el.removeClass("hidden")}}),$(window).on("load ajaxComplete",function(){url&&preselect_size()})}),$("body").hasClass("f_instantclick")&&(InstantClick.on("change",function(isInitialLoad){isInitialLoad||window.dataLayer&&window.dataLayer.push({event:"gtm.js"},{event:"gtm.dom"},{event:"gtm.load"})}),InstantClick.init(),$(window).on("ajaxComplete",setup_instantclick));